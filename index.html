<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICE Action Hub</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --red: #e63946;
            --dark-red: #c1121f;
            --black: #0d0d0d;
            --dark-gray: #1a1a1a;
            --medium-gray: #2a2a2a;
            --white: #ffffff;
            --light-gray: #e0e0e0;
            --green: #22c55e;
            --blue: #3b82f6;
            --yellow: #eab308;
            --purple: #8b5cf6;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--black);
            color: var(--white);
            line-height: 1.5;
        }
        header {
            background: linear-gradient(135deg, var(--black), var(--dark-gray));
            padding: 1.25rem 1rem;
            text-align: center;
            border-bottom: 3px solid var(--red);
        }
        .logo { font-size: 2rem; font-weight: 900; }
        .logo span { color: var(--red); }
        .header-location { font-size: 0.9rem; color: #aaa; cursor: pointer; }
        .header-location:hover { color: var(--red); }
        nav {
            background: var(--dark-gray);
            padding: 0.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: center;
            gap: 0.25rem;
            flex-wrap: wrap;
            border-bottom: 1px solid #333;
        }
        nav button {
            background: transparent;
            border: none;
            color: #777;
            padding: 0.5rem 0.75rem;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 4px;
        }
        nav button:hover { color: var(--white); background: var(--medium-gray); }
        nav button.active { background: var(--red); color: var(--white); }
        main { max-width: 900px; margin: 0 auto; padding: 1rem; }
        section { display: none; }
        section.active { display: block; animation: fadeIn 0.2s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        h2 { font-size: 1.4rem; margin-bottom: 0.5rem; }
        .section-desc { color: #888; margin-bottom: 1rem; font-size: 0.9rem; }
        .card {
            background: var(--dark-gray);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid #333;
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
            gap: 0.5rem;
        }
        .card-title { font-size: 1rem; font-weight: 700; }
        .card-subtitle { font-size: 0.8rem; color: #888; }
        .tag {
            padding: 0.15rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            white-space: nowrap;
        }
        .tag.local { background: var(--purple); color: white; }
        .tag.ice { background: var(--red); color: white; }
        .tag.official { background: var(--blue); color: white; }
        .tag.business { background: var(--yellow); color: black; }
        .tag.federal { background: #059669; color: white; }
        .tag.state { background: #7c3aed; color: white; }
        .card-note { font-size: 0.8rem; color: #aaa; margin-bottom: 0.5rem; }
        .btn-row { display: flex; gap: 0.4rem; flex-wrap: wrap; }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.3rem;
            padding: 0.5rem 0.75rem;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            border: none;
            flex: 1;
            min-width: 80px;
        }
        .btn-call { background: var(--green); color: white; }
        .btn-call:hover { background: #16a34a; }
        .btn-email { background: var(--blue); color: white; }
        .btn-email:hover { background: #2563eb; }
        .btn-script { background: #444; color: white; }
        .btn-script:hover { background: #555; }
        .btn-primary { background: var(--red); color: white; }
        .btn-primary:hover { background: var(--dark-red); }
        .btn-secondary { background: var(--medium-gray); color: white; border: 1px solid #444; }
        .btn-secondary:hover { background: #333; }
        /* Tab styles */
        .tab-container { display: flex; gap: 0; border-radius: 6px; overflow: hidden; border: 1px solid #444; }
        .tab-btn { flex: 1; padding: 0.6rem 1rem; background: var(--dark-gray); color: #888; border: none; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .tab-btn.active { background: var(--red); color: white; }
        .tab-btn:hover:not(.active) { background: #333; color: white; }
        .news-tab-container { display: flex; gap: 0; border-radius: 6px; overflow: hidden; border: 1px solid #444; margin-bottom: 1rem; }
        .news-tab-btn { flex: 1; padding: 0.5rem 0.75rem; background: var(--dark-gray); color: #888; border: none; font-size: 0.8rem; font-weight: 600; cursor: pointer; }
        .news-tab-btn.active { background: var(--blue); color: white; }
        .script-container { margin-top: 0.75rem; display: none; }
        .script-container.open { display: block; }
        .script-box {
            background: var(--black);
            border: 1px solid #333;
            border-radius: 6px;
            padding: 0.75rem;
            font-size: 0.85rem;
            line-height: 1.6;
            white-space: pre-wrap;
            margin-bottom: 0.5rem;
            max-height: 250px;
            overflow-y: auto;
        }
        .script-box .hl { color: var(--red); font-weight: 600; }
        .copy-btn {
            background: #333;
            color: #ccc;
            border: none;
            padding: 0.4rem 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .copy-btn:hover { background: #444; }
        .copy-btn.copied { background: var(--green); color: white; }
        .category-header {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--red);
            margin: 1.25rem 0 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .category-header:first-of-type { margin-top: 0; }
        .form-group { margin-bottom: 0.75rem; }
        .form-group label { display: block; margin-bottom: 0.25rem; font-size: 0.8rem; font-weight: 600; color: #aaa; }
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 0.6rem;
            border-radius: 5px;
            border: 1px solid #333;
            background: var(--black);
            color: var(--white);
            font-size: 0.9rem;
        }
        .form-group input:focus, .form-group textarea:focus { outline: none; border-color: var(--red); }
        .form-row { display: flex; gap: 0.75rem; }
        .form-row .form-group { flex: 1; }
        .info-box {
            background: var(--medium-gray);
            border-left: 3px solid var(--blue);
            padding: 0.75rem;
            border-radius: 0 6px 6px 0;
            margin-bottom: 1rem;
            font-size: 0.85rem;
        }
        .info-box.warning { border-left-color: var(--yellow); }
        .info-box.alert { border-left-color: var(--red); background: rgba(230,57,70,0.15); }
        .info-box.success { border-left-color: var(--green); }
        .resource-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid #222;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.75rem;
        }
        .resource-item:last-child { border-bottom: none; }
        .resource-item .name { font-weight: 600; font-size: 0.9rem; }
        .resource-item .desc { font-size: 0.8rem; color: #888; }
        .resource-item .phone { color: var(--green); font-weight: 600; font-size: 0.85rem; white-space: nowrap; }
        @media (max-width: 600px) {
            nav button { padding: 0.4rem 0.5rem; font-size: 0.7rem; }
            .btn { padding: 0.4rem 0.5rem; font-size: 0.75rem; }
            .form-row { flex-direction: column; gap: 0; }
            .card { padding: 0.75rem; }
        }
        .hotline-banner {
            background: var(--red);
            color: white;
            padding: 0.5rem;
            text-align: center;
            font-size: 0.85rem;
            font-weight: 600;
        }
        .hotline-banner a { color: white; }

        /* Setup Overlay */
        .setup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--black);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        .setup-overlay.hidden { display: none; }
        .setup-box {
            background: var(--dark-gray);
            border-radius: 12px;
            padding: 2rem;
            max-width: 450px;
            width: 100%;
            border: 2px solid var(--red);
        }
        .setup-box h1 {
            text-align: center;
            margin-bottom: 0.25rem;
            font-size: 2rem;
        }
        .setup-box h1 span { color: var(--red); }
        .setup-box .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }
        .setup-box .form-group { margin-bottom: 1rem; }
        .setup-box input {
            padding: 0.75rem;
            font-size: 1rem;
        }
        .setup-error {
            color: var(--red);
            font-size: 0.85rem;
            margin-top: 0.5rem;
            display: none;
        }
        .setup-error.show { display: block; }

        /* Add target form */
        .add-target-btn {
            background: var(--medium-gray);
            border: 2px dashed #444;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            margin-top: 0.75rem;
            color: #888;
            font-size: 0.9rem;
        }
        .add-target-btn:hover { border-color: var(--red); color: white; }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.85);
            z-index: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        .modal-overlay.hidden { display: none; }
        .modal-box {
            background: var(--dark-gray);
            border-radius: 8px;
            padding: 1.5rem;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid #444;
        }
        .modal-box h3 { margin-bottom: 1rem; }
        .modal-close {
            float: right;
            background: none;
            border: none;
            color: #888;
            font-size: 1.5rem;
            cursor: pointer;
            line-height: 1;
        }
        .modal-close:hover { color: white; }

        .search-tips {
            background: var(--black);
            border: 1px solid #333;
            border-radius: 6px;
            padding: 0.75rem;
            font-size: 0.8rem;
            margin-bottom: 1rem;
        }
        .search-tips strong { color: var(--red); }
        .search-tips ul { margin: 0.5rem 0 0 1.25rem; }
        .search-tips li { margin-bottom: 0.25rem; }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #888;
        }
        .loading-spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid #333;
            border-top-color: var(--red);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-bottom: 0.5rem;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        .empty-state {
            text-align: center;
            padding: 2rem;
            color: #666;
        }
        .empty-state p { margin-bottom: 1rem; }

        .delete-btn {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            padding: 0.25rem;
            font-size: 0.8rem;
        }
        .delete-btn:hover { color: var(--red); }
    </style>
</head>
<body>
    <!-- Setup Overlay -->
    <div class="setup-overlay" id="setupOverlay">
        <div class="setup-box">
            <h1>ICE <span>ACTION</span></h1>
            <p class="subtitle">Advocacy tools for your community</p>

            <div class="form-group">
                <label>Your Address or ZIP Code</label>
                <input type="text" id="setupAddress" placeholder="55401 or Minneapolis, MN or full address">
                <div class="setup-error" id="setupError">Please enter a ZIP code, city/state, or full address</div>
            </div>

            <div style="background: rgba(230,57,70,0.1); border: 1px solid var(--red); border-radius: 6px; padding: 0.75rem; margin-bottom: 1rem; font-size: 0.8rem;">
                <strong style="color: var(--red);">Currently available:</strong>
                <span style="color: #aaa;">CA, CO, NY, TX, IL, FL, AZ, WA, MA, GA, MN, OR, DC, MD, UT, NJ, NV, NC, PA, MI, OH, VA</span>
                <p style="color: #888; margin-top: 0.5rem; margin-bottom: 0;">Don't see your state? <a href="mailto:alexishkenyon@gmail.com?subject=Add My State to ICE Action Hub" style="color: var(--red);">Email us to add it!</a></p>
            </div>

            <button class="btn btn-primary" style="width: 100%; padding: 0.75rem; font-size: 1rem;" onclick="completeSetup()">
                Get Started
            </button>

            <button class="btn btn-secondary" style="width: 100%; margin-top: 0.5rem;" onclick="skipSetup()">
                Skip for now
            </button>

            <p style="margin-top: 1rem; font-size: 0.75rem; color: #666; text-align: center;">
                Your address is used to find your elected officials.<br>
                Data is stored locally in your browser only.
            </p>

            <p style="margin-top: 0.5rem; text-align: center;">
                <a href="#" onclick="localStorage.clear(); location.reload(); return false;" style="color: #666; font-size: 0.7rem;">Reset app</a>
            </p>
        </div>
    </div>

    <!-- Add Target Modal -->
    <div class="modal-overlay hidden" id="addTargetModal">
        <div class="modal-box">
            <button class="modal-close" onclick="closeAddModal()">&times;</button>
            <h3>Add Local Target</h3>

            <div class="search-tips">
                <strong>How to find ICE-connected companies in your area:</strong>
                <ul>
                    <li>Search: "[your city] ICE contract" or "[your city] detention center"</li>
                    <li>Look for: private prisons, ankle monitor companies, deportation flight operators</li>
                    <li>Check if local police use Flock, Vigilant, or other license plate readers</li>
                    <li>Search "[your city] police ICE cooperation"</li>
                </ul>
            </div>

            <div class="form-group">
                <label>Company/Organization Name *</label>
                <input type="text" id="targetName" placeholder="e.g., Local Detention Center LLC">
            </div>
            <div class="form-group">
                <label>Contact Person</label>
                <input type="text" id="targetContact" placeholder="e.g., John Smith, CEO">
            </div>
            <div class="form-group">
                <label>Phone Number</label>
                <input type="text" id="targetPhone" placeholder="e.g., (555) 123-4567">
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="targetEmail" placeholder="e.g., contact@company.com">
            </div>
            <div class="form-group">
                <label>Why they're a target (ICE connection)</label>
                <textarea id="targetNotes" rows="3" placeholder="e.g., Operates ICE detention facility, has contract with ICE for..."></textarea>
            </div>

            <div class="btn-row">
                <button class="btn btn-secondary" onclick="closeAddModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveTarget()">Add Target</button>
            </div>
        </div>
    </div>

    <div class="hotline-banner">
        ICE RAID HOTLINE: <a href="tel:1-844-363-1423">1-844-363-1423</a> (United We Dream - Nationwide)
    </div>

    <header>
        <div class="logo">ICE <span>ACTION</span></div>
        <p class="header-location" id="headerLocation" onclick="showSetup()">Set your location</p>
    </header>

    <nav>
        <button class="active" data-section="officials">üèõÔ∏è Officials</button>
        <button data-section="corporations">üè¢ Corps</button>
        <button data-section="local">üìç Local</button>
        <button data-section="news">üì∞ News</button>
        <button data-section="protests">‚úä Action</button>
        <button data-section="resources">üìö Rights</button>
        <button data-section="raids" style="background: var(--red); color: white;">üö® ICE Activity</button>
        <button data-section="settings">‚öôÔ∏è</button>
    </nav>

    <main>
        <!-- ============== ICE ACTIVITY / RAIDS ============== -->
        <section id="raids">
            <h2>ICE Activity Tracker</h2>
            <p class="section-desc">Real-time documented ICE raids, detentions, and enforcement activity.</p>

            <div class="info-box alert" style="margin-bottom: 1rem;">
                <strong>‚ö†Ô∏è Stay Alert:</strong> ICE agents have been documented impersonating utility workers, delivery drivers, and police. Always ask for ID and a judicial warrant signed by a judge.
            </div>

            <!-- Real-time updates -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                <div>
                    <span style="font-size: 0.75rem; color: #888;" id="raids-update-time">Last updated: Loading...</span>
                </div>
                <button onclick="refreshRaids()" class="btn" style="padding: 0.25rem 0.75rem; font-size: 0.75rem; background: var(--red);">üîÑ Refresh</button>
            </div>

            <!-- Location filter tabs -->
            <div class="tab-container" style="margin-bottom: 1rem;">
                <button class="tab-btn active" onclick="switchRaidTab('local')">üìç Your Area</button>
                <button class="tab-btn" onclick="switchRaidTab('national')">üá∫üá∏ Nationwide</button>
            </div>

            <div id="raids-local-tab">
                <div class="category-header" style="background: linear-gradient(90deg, var(--red), #8B0000);">üö® ICE Activity Near You</div>
                <p style="font-size: 0.85rem; color: #888; margin-bottom: 0.75rem;" id="local-raids-location-text">Set your location to see activity in your area.</p>
                <div id="local-raids-list"></div>
            </div>

            <div id="raids-national-tab" style="display: none;">
                <div class="category-header" style="background: linear-gradient(90deg, var(--red), #8B0000);">üö® All Documented ICE Activity</div>
                <p style="font-size: 0.85rem; color: #888; margin-bottom: 0.75rem;">All documented enforcement actions across the US. Most recent first.</p>
                <div id="all-raids-list"></div>
            </div>

            <!-- Report section -->
            <div class="category-header" style="margin-top: 1.5rem;">üì¢ Report ICE Activity</div>
            <div class="card">
                <div class="card-title">Witnessed ICE activity?</div>
                <p class="card-note">Report it immediately to help warn your community and document the activity.</p>
                <div class="btn-row">
                    <a href="tel:18443631423" class="btn btn-call" style="flex: 2;">üìû United We Dream: 1-844-363-1423</a>
                </div>
                <div class="btn-row" style="margin-top: 0.5rem;">
                    <a href="mailto:alexishkenyon@gmail.com?subject=ICE Activity Report&body=Location (city, state):%0ADate/Time:%0AType (raid, checkpoint, etc.):%0ADescription:%0ANumber of agents:%0AVehicles:%0ASource/Witness:" class="btn btn-email" style="flex: 2;">üìß Submit to This Database</a>
                </div>
                <div style="margin-top: 0.75rem; font-size: 0.8rem; color: #aaa;">
                    <strong>What to report:</strong> Location, time, number of agents, vehicles, badges visible, any impersonation
                </div>
            </div>

            <!-- Live sources -->
            <div class="category-header" style="margin-top: 1rem;">üì± Real-Time Sources</div>
            <div class="card" style="padding: 0.75rem;">
                <div style="font-size: 0.85rem;">
                    <a href="https://twitter.com/UnitedWeDream" target="_blank" style="display: block; padding: 0.4rem 0; border-bottom: 1px solid #333; color: var(--blue);">@UnitedWeDream - Nationwide alerts</a>
                    <a href="https://twitter.com/documentedny" target="_blank" style="display: block; padding: 0.4rem 0; border-bottom: 1px solid #333; color: var(--blue);">@DocumentedNY - Immigration news</a>
                    <a href="https://twitter.com/ABORABOLISHICE" target="_blank" style="display: block; padding: 0.4rem 0; border-bottom: 1px solid #333; color: var(--blue);">@ABOLISHICE - Direct action</a>
                    <a href="https://www.ice.gov/news/all-news" target="_blank" style="display: block; padding: 0.4rem 0; color: var(--blue);">ICE.gov News (official)</a>
                </div>
            </div>
        </section>

        <!-- ============== OFFICIALS ============== -->
        <section id="officials" class="active">
            <h2>Your Elected Officials</h2>
            <p class="section-desc">Contact your representatives to demand action against ICE.</p>
            <div id="officials-list">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Enter your address to find your officials</p>
                </div>
            </div>
        </section>

        <!-- ============== CORPORATIONS ============== -->
        <section id="corporations">
            <h2>National Corporations</h2>
            <p class="section-desc">Major companies with ICE contracts or cooperation. These apply nationwide.</p>
            <div id="corp-list"></div>
        </section>

        <!-- ============== LOCAL ============== -->
        <section id="local">
            <h2>ICE Contractors & Local Targets</h2>
            <p class="section-desc">Companies with ICE contracts, local institutions to pressure, and places to boycott.</p>

            <!-- BUILD YOUR LOCAL LIST - TOP -->
            <div class="card" style="background: linear-gradient(135deg, var(--dark-gray), #1a1a2e); border: 2px solid var(--red); margin-bottom: 1.5rem;">
                <div class="card-title" style="color: var(--red); font-size: 1.1rem;">üìã Build Your Local List</div>
                <p class="card-note" style="margin-bottom: 1rem;">Don't see an organization, business, or local leader that should be on this list?</p>
                <div class="btn-row">
                    <button class="btn btn-primary" onclick="openAddModal()" style="flex: 2;">+ Add Local Target</button>
                    <a href="mailto:alexishkenyon@gmail.com?subject=Add to ICE Action Hub Database&body=I'd like to suggest adding the following organization/business/leader to the ICE Action Hub database:%0A%0AName:%0AType (business/institution/official):%0ALocation (city, state):%0AICE Connection:%0ASource/Evidence:%0A%0AThank you!" class="btn btn-email">üìß Suggest to Database</a>
                </div>
                <p style="font-size: 0.75rem; color: #666; margin-top: 0.75rem; margin-bottom: 0;">Add targets to your personal list, or email us to add them to the main database for everyone.</p>
            </div>

            <div class="category-header">üö® Local ICE Detention & Cooperation</div>
            <p style="font-size: 0.85rem; color: #888; margin-bottom: 1rem;" id="local-ice-ties-text">Detention centers and law enforcement with ICE cooperation in your area.</p>
            <div id="local-ice-ties-list"></div>

            <div class="category-header">üè¢ Known ICE Contractors</div>
            <p style="font-size: 0.85rem; color: #888; margin-bottom: 1rem;">These companies have direct contracts with ICE. Call them to demand they end their ICE business.</p>
            <div id="ice-companies-list"></div>

            <div class="category-header">üõí Online Retailers & Tech with ICE Ties</div>
            <p style="font-size: 0.85rem; color: #888; margin-bottom: 1rem;">Major companies profiting from ICE contracts. Consider boycotting or pressuring.</p>
            <div id="ice-retailers-list"></div>

            <div class="category-header">üìç Your Personal Local Targets</div>
            <div class="info-box">
                <strong>Your list:</strong> Local companies, police departments, or institutions you're tracking. Saved in your browser.
            </div>

            <div id="local-list"></div>

            <div class="add-target-btn" onclick="openAddModal()">
                + Add a Local Target
            </div>
        </section>

        <!-- ============== NEWS ============== -->
        <section id="news">
            <h2>ICE News Coverage</h2>
            <p class="section-desc">Comprehensive local and national immigration news with sources.</p>

            <!-- News tabs -->
            <div class="news-tab-container">
                <button class="news-tab-btn active" onclick="switchNewsTab('local')">üìç Local News</button>
                <button class="news-tab-btn" onclick="switchNewsTab('national')">üåé National News</button>
            </div>

            <!-- Local News Tab -->
            <div id="news-local-tab">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                    <p style="font-size: 0.85rem; color: #888; margin: 0;" id="local-news-text">Set your location to see local news.</p>
                </div>
                <div id="local-news-feed"></div>

                <div class="info-box" style="margin-top: 1rem;">
                    <p style="margin: 0; font-size: 0.85rem;">Don't see news from your area? <a href="mailto:alexishkenyon@gmail.com?subject=Add Local News Source&body=State:%0ANews outlet name:%0AWebsite URL:%0A" style="color: var(--red);">Submit a local source ‚Üí</a></p>
                </div>
            </div>

            <!-- National News Tab -->
            <div id="news-national-tab" style="display: none;">
                <p style="font-size: 0.85rem; color: #888; margin-bottom: 0.75rem;">National immigration and ICE news from major outlets.</p>
                <div id="national-news-feed"></div>
            </div>
        </section>

        <!-- ============== TAKE ACTION ============== -->
        <section id="protests">
            <h2>Take Action Now</h2>
            <p class="section-desc">Choose what you want to do. Every action matters.</p>

            <!-- Quick Action Buttons -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; margin-bottom: 1.5rem;">
                <a href="tel:2022243121" class="btn btn-primary" style="padding: 1rem; font-size: 0.9rem;">üìû Call Congress</a>
                <a href="#local-orgs" onclick="document.getElementById('local-orgs').scrollIntoView({behavior:'smooth'})" class="btn btn-email" style="padding: 1rem; font-size: 0.9rem;">‚úâÔ∏è Email Orgs</a>
            </div>

            <!-- LOCAL ORGANIZATIONS -->
            <div class="category-header" style="background: var(--blue);" id="local-orgs">üìç Organizations in Your Area</div>
            <p style="font-size: 0.85rem; color: #888; margin-bottom: 0.75rem;" id="local-orgs-text">Set your location to see local organizations.</p>
            <div id="local-orgs-list"></div>

            <!-- NATIONAL ORGANIZATIONS -->
            <div class="category-header" style="background: var(--purple);">üá∫üá∏ National Organizations</div>
            <p style="font-size: 0.85rem; color: #888; margin-bottom: 0.75rem;">Major organizations fighting for immigrant rights nationwide.</p>

            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">United We Dream</div>
                        <div class="card-subtitle">Largest immigrant youth-led network</div>
                    </div>
                </div>
                <p class="card-note">Rapid response training, legal help, direct action organizing.</p>
                <div class="btn-row">
                    <a href="tel:18443631423" class="btn btn-call">üìû Call</a>
                    <a href="mailto:info@unitedwedream.org?subject=I Want to Help&body=Hi,%0A%0AI want to join United We Dream and help protect immigrant communities in my area.%0A%0APlease let me know how I can get involved.%0A%0AThank you!" class="btn btn-email">‚úâÔ∏è Email</a>
                    <a href="https://unitedwedream.org" target="_blank" class="btn btn-secondary">üåê Website</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">RAICES Texas</div>
                        <div class="card-subtitle">Free legal services for immigrants</div>
                    </div>
                </div>
                <p class="card-note">Legal defense, bond assistance, family reunification.</p>
                <div class="btn-row">
                    <a href="tel:18003542448" class="btn btn-call">üìû Call</a>
                    <a href="mailto:info@raicestexas.org?subject=Volunteer or Donate&body=Hi,%0A%0AI would like to help RAICES. Please let me know about volunteer opportunities or how to donate.%0A%0AThank you!" class="btn btn-email">‚úâÔ∏è Email</a>
                    <a href="https://www.raicestexas.org" target="_blank" class="btn btn-secondary">üåê Website</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">ACLU</div>
                        <div class="card-subtitle">Legal advocacy & Know Your Rights</div>
                    </div>
                </div>
                <p class="card-note">Legal challenges to ICE, immigrant rights resources, advocacy.</p>
                <div class="btn-row">
                    <a href="mailto:media@aclu.org?subject=ICE Abuse Report&body=Hi,%0A%0AI am reporting ICE activity/abuse in my community.%0A%0ADetails:%0A%0AThank you!" class="btn btn-email">‚úâÔ∏è Email</a>
                    <a href="https://www.aclu.org/know-your-rights/immigrants-rights" target="_blank" class="btn btn-secondary">üåê Website</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">National Immigration Law Center (NILC)</div>
                        <div class="card-subtitle">Policy advocacy & legal support</div>
                    </div>
                </div>
                <p class="card-note">Defends rights of low-income immigrants through litigation and policy.</p>
                <div class="btn-row">
                    <a href="mailto:info@nilc.org?subject=Support Request&body=Hi,%0A%0AI am reaching out for support regarding immigration enforcement in my community.%0A%0AThank you!" class="btn btn-email">‚úâÔ∏è Email</a>
                    <a href="https://www.nilc.org" target="_blank" class="btn btn-secondary">üåê Website</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Immigrant Defense Project</div>
                        <div class="card-subtitle">NY-based with national resources</div>
                    </div>
                </div>
                <p class="card-note">Raid response toolkit, legal resources, ICE encounter training.</p>
                <div class="btn-row">
                    <a href="tel:12122253360" class="btn btn-call">üìû Call</a>
                    <a href="mailto:info@immdefense.org?subject=Request for Resources&body=Hi,%0A%0AI am looking for resources to help my community prepare for ICE enforcement.%0A%0AThank you!" class="btn btn-email">‚úâÔ∏è Email</a>
                    <a href="https://www.immdefense.org" target="_blank" class="btn btn-secondary">üåê Website</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div>
                        <div class="card-title">Never Again Action</div>
                        <div class="card-subtitle">Jewish-led direct action movement</div>
                    </div>
                </div>
                <p class="card-note">Organizes protests at detention centers and ICE facilities.</p>
                <div class="btn-row">
                    <a href="mailto:info@neveragainaction.com?subject=Join Actions&body=Hi,%0A%0AI want to join Never Again Action and participate in upcoming actions.%0A%0APlease add me to your list.%0A%0AThank you!" class="btn btn-email">‚úâÔ∏è Email</a>
                    <a href="https://www.neveragainaction.com" target="_blank" class="btn btn-secondary">üåê Website</a>
                </div>
            </div>

            <!-- CALL YOUR REPS -->
            <div class="category-header" style="background: var(--green);">üìû Call Your Representatives</div>

            <div class="card">
                <div class="card-title">Call Congress</div>
                <p class="card-note">Capitol switchboard connects you to any Senator or Representative.</p>
                <div class="btn-row">
                    <a href="tel:2022243121" class="btn btn-call" style="flex: 2;">üìû (202) 224-3121</a>
                    <button class="btn btn-script" onclick="toggleScript('congress-script')">üìÑ Script</button>
                </div>
                <div class="script-container" id="congress-script">
                    <div class="script-box">"Hello, I'm a constituent calling to urge [Senator/Representative NAME] to oppose ICE enforcement operations.

ICE raids are terrorizing communities and separating families.

I'm asking them to:
1. Vote NO on any bill that funds ICE
2. Support sanctuary policies
3. Publicly speak out against ICE abuses

Thank you."</div>
                    <button class="copy-btn" onclick="copyScript(this)">Copy Script</button>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Call the White House</div>
                <p class="card-note">Leave a message for the President.</p>
                <div class="btn-row">
                    <a href="tel:2024561111" class="btn btn-call" style="flex: 2;">üìû (202) 456-1111</a>
                    <button class="btn btn-script" onclick="toggleScript('wh-script')">üìÑ Script</button>
                </div>
                <div class="script-container" id="wh-script">
                    <div class="script-box">"I'm calling to demand an end to ICE raids.

Immigrants are our neighbors, coworkers, and community members. These raids are cruel and un-American.

Stop the raids. Stop the deportations. Keep families together.

Thank you."</div>
                    <button class="copy-btn" onclick="copyScript(this)">Copy Script</button>
                </div>
            </div>

            <!-- PROTESTS & EVENTS -->
            <div class="category-header">‚úä Upcoming Protests & Events</div>
            <p style="font-size: 0.85rem; color: #888; margin-bottom: 0.75rem;" id="protests-location-text">Events near you and nationwide.</p>
            <div id="protests-list"></div>

            <div style="margin-top: 1rem;">
                <p style="font-size: 0.85rem; color: #888; margin-bottom: 0.5rem;">Nationwide events:</p>
                <div id="national-protests-list"></div>
            </div>
        </section>

        <!-- ============== RESOURCES ============== -->
        <section id="resources">
            <h2>Resources & Know Your Rights</h2>

            <div class="category-header">Emergency Hotlines</div>
            <div class="card">
                <div class="resource-item">
                    <div>
                        <div class="name">United We Dream Hotline</div>
                        <div class="desc">Report ICE activity, get help (nationwide)</div>
                    </div>
                    <a href="tel:1-844-363-1423" class="phone">1-844-363-1423</a>
                </div>
                <div class="resource-item">
                    <div>
                        <div class="name">ACLU</div>
                        <div class="desc">Legal resources and Know Your Rights</div>
                    </div>
                    <a href="https://www.aclu.org/know-your-rights/immigrants-rights" target="_blank" class="btn btn-secondary" style="flex: 0;">Visit</a>
                </div>
                <div class="resource-item">
                    <div>
                        <div class="name">National Immigration Law Center</div>
                        <div class="desc">Legal advocacy and resources</div>
                    </div>
                    <a href="https://www.nilc.org/" target="_blank" class="btn btn-secondary" style="flex: 0;">Visit</a>
                </div>
            </div>

            <div class="category-header">Know Your Rights</div>
            <div class="card">
                <div class="resource-item">
                    <div>
                        <div class="name">If ICE comes to your door</div>
                        <div class="desc">You don't have to open it. Ask for a warrant signed by a judge.</div>
                    </div>
                </div>
                <div class="resource-item">
                    <div>
                        <div class="name">Right to remain silent</div>
                        <div class="desc">You don't have to answer questions about immigration status.</div>
                    </div>
                </div>
                <div class="resource-item">
                    <div>
                        <div class="name">Right to a lawyer</div>
                        <div class="desc">If detained, ask for an attorney before answering questions.</div>
                    </div>
                </div>
                <div class="resource-item">
                    <div>
                        <div class="name">Administrative vs Judicial Warrant</div>
                        <div class="desc">ICE admin warrants (Form I-200) do NOT allow entry. Only judicial warrants signed by a judge do.</div>
                    </div>
                </div>
            </div>

            <div class="category-header">For Businesses</div>
            <div class="card">
                <p style="font-size: 0.85rem; color: #aaa;">Businesses can:</p>
                <ul style="margin: 0.5rem 0 0 1.25rem; font-size: 0.85rem; color: #ccc;">
                    <li>Require a <strong>judicial warrant</strong> before allowing ICE access</li>
                    <li>Refuse to answer questions about employees</li>
                    <li>Refuse consent to search non-public areas</li>
                    <li>Post "Know Your Rights" signs for employees</li>
                </ul>
            </div>

            <div class="category-header">Find Local Resources</div>
            <div class="card">
                <p style="font-size: 0.85rem; color: #aaa; margin-bottom: 0.75rem;">Search for immigrant rights organizations in your area:</p>
                <div class="btn-row">
                    <a href="https://www.immigrationadvocates.org/nonprofit/legaldirectory/" target="_blank" class="btn btn-primary">Find Legal Help Near You</a>
                </div>
            </div>
        </section>

        <!-- ============== SETTINGS ============== -->
        <section id="settings">
            <h2>Settings</h2>
            <p class="section-desc">Your information (saved locally in your browser only)</p>

            <div style="max-width: 400px;">
                <div class="form-group">
                    <label>Full Name (for scripts)</label>
                    <input type="text" id="settingsName" placeholder="Your name">
                </div>
                <div class="form-group">
                    <label>Full Address</label>
                    <input type="text" id="settingsAddress" placeholder="123 Main St, City, State ZIP">
                </div>
                <button class="btn btn-primary" onclick="saveSettings()" style="width: 100%;">Save & Update Officials</button>

                <div class="category-header" style="margin-top: 2rem;">Data Management</div>
                <button class="btn btn-secondary" onclick="exportData()" style="width: 100%; margin-bottom: 0.5rem;">Export My Data</button>
                <button class="btn btn-secondary" onclick="clearAllData()" style="width: 100%; border-color: var(--red); color: var(--red);">Clear All Data</button>
            </div>
        </section>
    </main>

    <footer style="background: var(--dark-gray); border-top: 1px solid #333; padding: 1.5rem 1rem; text-align: center; margin-top: 2rem;">
        <p style="color: var(--red); font-size: 1rem; font-weight: 600; margin-bottom: 0.5rem;">Don't see your state?</p>
        <p style="color: #888; font-size: 0.85rem; margin-bottom: 1rem;">Help us add local officials, protests, and resources for your community.</p>
        <a href="mailto:alexishkenyon@gmail.com?subject=Add My State to ICE Action Hub&body=Hi,%0A%0AI'd like to help add data for my state.%0A%0AState:%0ACity:%0A%0AWhat I can provide:%0A[ ] Local officials (school superintendent, police chief, sheriff) with contact info%0A[ ] Chamber of commerce contacts%0A[ ] Local businesses with ICE ties%0A[ ] Upcoming protests/events in my area%0A[ ] Documented ICE activity%0A%0ADetails:%0A%0A" class="btn btn-primary" style="display: inline-block; padding: 0.75rem 1.5rem;">üìß Add My State</a>
        <p style="color: #555; font-size: 0.75rem; margin-top: 1rem;">Open source project - <a href="https://github.com/alexishkenyon-cpu/ice-advocacy-tool" style="color: #888;">Contribute on GitHub</a></p>
    </footer>

    <script>
        // ============== DATA ==============

        const nationalCorporations = [
            { company: "Target", contact: "Brian Cornell", title: "Chair & CEO", phone: "612-304-6073", email: "brian.cornell@target.com", tags: ["ice"], notes: "Has allowed ICE operations in stores. Demand they refuse ICE access without judicial warrants." },
            { company: "Home Depot", contact: "Ted Decker", title: "Chair & CEO", phone: "(800) 466-3337", email: "ted_decker@homedepot.com", tags: ["ice"], notes: "Has cooperated with ICE operations. Demand they protect workers and customers." },
            { company: "Enterprise Holdings", contact: "Chrissy Taylor", title: "President & CEO", phone: "(314) 512-5000", email: "christine.taylor@ehi.com", tags: ["ice"], notes: "Has provided vehicles/services to ICE for raids and transportation." },
            { company: "Hilton", contact: "Christopher Nassetta", title: "President & CEO", phone: "(703) 883-1000", email: "christopher.nassetta@hilton.com", tags: ["ice"], notes: "Hotels have been used for ICE detention operations." },
            { company: "Delta Air Lines", contact: "Ed Bastian", title: "CEO", phone: "(404) 715-2600", email: "ed.bastian@delta.com", tags: ["ice"], notes: "Has transported deportees on commercial flights." },
            { company: "Amazon (AWS)", contact: "Andy Jassy", title: "CEO", phone: "(206) 266-1000", email: "ajassy@amazon.com", tags: ["ice"], notes: "Amazon Web Services provides cloud infrastructure to ICE. Palantir runs on AWS." },
            { company: "Microsoft", contact: "Satya Nadella", title: "CEO", phone: "(425) 882-8080", email: "satyan@microsoft.com", tags: ["ice"], notes: "Azure cloud services have contracts with ICE and CBP." },
            { company: "Palantir", contact: "Alex Karp", title: "CEO", phone: "(720) 358-3679", email: "info@palantir.com", tags: ["ice"], notes: "$30M+ ImmigrationOS contract. Built ICE's primary surveillance and tracking platform." },
            { company: "GEO Group", contact: "George Zoley", title: "Founder & Exec Chairman", phone: "(561) 893-0101", email: "geogroup@geogroup.com", tags: ["ice"], notes: "Largest private prison company. Operates ICE detention centers nationwide." },
            { company: "CoreCivic", contact: "Damon Hininger", title: "President & CEO", phone: "(615) 263-3000", email: "investorrelations@corecivic.com", tags: ["ice"], notes: "Second largest private prison company. Operates multiple ICE detention facilities." },
            { company: "JPMorgan Chase", contact: "Jamie Dimon", title: "Chairman & CEO", phone: "(212) 270-6000", email: "jamie.dimon@jpmchase.com", tags: ["ice"], notes: "Finances private detention center companies like GEO Group and CoreCivic." },
            { company: "Wells Fargo", contact: "Charlie Scharf", title: "CEO", phone: "(866) 249-3302", email: "charlie.scharf@wellsfargo.com", tags: ["ice"], notes: "Has provided financing to private prison companies." },
            { company: "Flock Safety", contact: "Garrett Langley", title: "CEO", phone: "(404) 996-0906", email: "support@flocksafety.com", tags: ["ice"], notes: "License plate reader company. Data accessed by ICE through 'side door' searches. Check if your local PD uses Flock." }
        ];

        // US Senators database (2025) - with emails for direct contact
        const senatorsDB = {
            'AL': [{name: 'Katie Britt', party: 'R', phone: '(202) 224-5744', email: 'senator@britt.senate.gov'}, {name: 'Tommy Tuberville', party: 'R', phone: '(202) 224-4124', email: 'senator@tuberville.senate.gov'}],
            'AK': [{name: 'Lisa Murkowski', party: 'R', phone: '(202) 224-6665', email: 'senator@murkowski.senate.gov'}, {name: 'Dan Sullivan', party: 'R', phone: '(202) 224-3004', email: 'senator@sullivan.senate.gov'}],
            'AZ': [{name: 'Mark Kelly', party: 'D', phone: '(202) 224-2235', email: 'senator@kelly.senate.gov'}, {name: 'Ruben Gallego', party: 'D', phone: '(202) 224-4521', email: 'senator@gallego.senate.gov'}],
            'AR': [{name: 'John Boozman', party: 'R', phone: '(202) 224-4843', email: 'senator@boozman.senate.gov'}, {name: 'Tom Cotton', party: 'R', phone: '(202) 224-2353', email: 'senator@cotton.senate.gov'}],
            'CA': [{name: 'Alex Padilla', party: 'D', phone: '(202) 224-3553', email: 'senator@padilla.senate.gov'}, {name: 'Adam Schiff', party: 'D', phone: '(202) 224-3841', email: 'senator@schiff.senate.gov'}],
            'CO': [{name: 'Michael Bennet', party: 'D', phone: '(202) 224-5852', email: 'senator@bennet.senate.gov'}, {name: 'John Hickenlooper', party: 'D', phone: '(202) 224-5941', email: 'senator@hickenlooper.senate.gov'}],
            'CT': [{name: 'Richard Blumenthal', party: 'D', phone: '(202) 224-2823', email: 'senator@blumenthal.senate.gov'}, {name: 'Chris Murphy', party: 'D', phone: '(202) 224-4041', email: 'senator@murphy.senate.gov'}],
            'DE': [{name: 'Tom Carper', party: 'D', phone: '(202) 224-2441', email: 'senator@carper.senate.gov'}, {name: 'Chris Coons', party: 'D', phone: '(202) 224-5042', email: 'senator@coons.senate.gov'}],
            'FL': [{name: 'Marco Rubio', party: 'R', phone: '(202) 224-3041', email: 'senator@rubio.senate.gov'}, {name: 'Rick Scott', party: 'R', phone: '(202) 224-5274', email: 'senator@rickscott.senate.gov'}],
            'GA': [{name: 'Jon Ossoff', party: 'D', phone: '(202) 224-3521', email: 'senator@ossoff.senate.gov'}, {name: 'Raphael Warnock', party: 'D', phone: '(202) 224-3643', email: 'senator@warnock.senate.gov'}],
            'HI': [{name: 'Mazie Hirono', party: 'D', phone: '(202) 224-6361', email: 'senator@hirono.senate.gov'}, {name: 'Brian Schatz', party: 'D', phone: '(202) 224-3934', email: 'senator@schatz.senate.gov'}],
            'ID': [{name: 'Mike Crapo', party: 'R', phone: '(202) 224-6142', email: 'senator@crapo.senate.gov'}, {name: 'Jim Risch', party: 'R', phone: '(202) 224-2752', email: 'senator@risch.senate.gov'}],
            'IL': [{name: 'Tammy Duckworth', party: 'D', phone: '(202) 224-2854', email: 'senator@duckworth.senate.gov'}, {name: 'Dick Durbin', party: 'D', phone: '(202) 224-2152', email: 'senator@durbin.senate.gov'}],
            'IN': [{name: 'Todd Young', party: 'R', phone: '(202) 224-5623', email: 'senator@young.senate.gov'}, {name: 'Jim Banks', party: 'R', phone: '(202) 224-4814', email: 'senator@banks.senate.gov'}],
            'IA': [{name: 'Joni Ernst', party: 'R', phone: '(202) 224-3254', email: 'senator@ernst.senate.gov'}, {name: 'Chuck Grassley', party: 'R', phone: '(202) 224-3744', email: 'senator@grassley.senate.gov'}],
            'KS': [{name: 'Jerry Moran', party: 'R', phone: '(202) 224-6521', email: 'senator@moran.senate.gov'}, {name: 'Roger Marshall', party: 'R', phone: '(202) 224-4774', email: 'senator@marshall.senate.gov'}],
            'KY': [{name: 'Mitch McConnell', party: 'R', phone: '(202) 224-2541', email: 'senator@mcconnell.senate.gov'}, {name: 'Rand Paul', party: 'R', phone: '(202) 224-4343', email: 'senator@paul.senate.gov'}],
            'LA': [{name: 'Bill Cassidy', party: 'R', phone: '(202) 224-5824', email: 'senator@cassidy.senate.gov'}, {name: 'John Kennedy', party: 'R', phone: '(202) 224-4623', email: 'senator@kennedy.senate.gov'}],
            'ME': [{name: 'Susan Collins', party: 'R', phone: '(202) 224-2523', email: 'senator@collins.senate.gov'}, {name: 'Angus King', party: 'I', phone: '(202) 224-5344', email: 'senator@king.senate.gov'}],
            'MD': [{name: 'Ben Cardin', party: 'D', phone: '(202) 224-4524', email: 'senator@cardin.senate.gov'}, {name: 'Chris Van Hollen', party: 'D', phone: '(202) 224-4654', email: 'senator@vanhollen.senate.gov'}],
            'MA': [{name: 'Ed Markey', party: 'D', phone: '(202) 224-2742', email: 'senator@markey.senate.gov'}, {name: 'Elizabeth Warren', party: 'D', phone: '(202) 224-4543', email: 'senator@warren.senate.gov'}],
            'MI': [{name: 'Gary Peters', party: 'D', phone: '(202) 224-6221', email: 'senator@peters.senate.gov'}, {name: 'Elissa Slotkin', party: 'D', phone: '(202) 224-4822', email: 'senator@slotkin.senate.gov'}],
            'MN': [{name: 'Amy Klobuchar', party: 'D', phone: '(202) 224-3244', email: 'senator@klobuchar.senate.gov'}, {name: 'Tina Smith', party: 'D', phone: '(202) 224-5641', email: 'senator@smith.senate.gov'}],
            'MS': [{name: 'Roger Wicker', party: 'R', phone: '(202) 224-6253', email: 'senator@wicker.senate.gov'}, {name: 'Cindy Hyde-Smith', party: 'R', phone: '(202) 224-5054', email: 'senator@hydesmith.senate.gov'}],
            'MO': [{name: 'Josh Hawley', party: 'R', phone: '(202) 224-6154', email: 'senator@hawley.senate.gov'}, {name: 'Eric Schmitt', party: 'R', phone: '(202) 224-5721', email: 'senator@schmitt.senate.gov'}],
            'MT': [{name: 'Steve Daines', party: 'R', phone: '(202) 224-2651', email: 'senator@daines.senate.gov'}, {name: 'Tim Sheehy', party: 'R', phone: '(202) 224-4521', email: 'senator@sheehy.senate.gov'}],
            'NE': [{name: 'Deb Fischer', party: 'R', phone: '(202) 224-6551', email: 'senator@fischer.senate.gov'}, {name: 'Pete Ricketts', party: 'R', phone: '(202) 224-4224', email: 'senator@ricketts.senate.gov'}],
            'NV': [{name: 'Catherine Cortez Masto', party: 'D', phone: '(202) 224-3542', email: 'senator@cortezmasto.senate.gov'}, {name: 'Jacky Rosen', party: 'D', phone: '(202) 224-6244', email: 'senator@rosen.senate.gov'}],
            'NH': [{name: 'Maggie Hassan', party: 'D', phone: '(202) 224-3324', email: 'senator@hassan.senate.gov'}, {name: 'Jeanne Shaheen', party: 'D', phone: '(202) 224-2841', email: 'senator@shaheen.senate.gov'}],
            'NJ': [{name: 'Cory Booker', party: 'D', phone: '(202) 224-3224', email: 'senator@booker.senate.gov'}, {name: 'Andy Kim', party: 'D', phone: '(202) 224-4744', email: 'senator@kim.senate.gov'}],
            'NM': [{name: 'Martin Heinrich', party: 'D', phone: '(202) 224-5521', email: 'senator@heinrich.senate.gov'}, {name: 'Ben Ray Luj√°n', party: 'D', phone: '(202) 224-6621', email: 'senator@lujan.senate.gov'}],
            'NY': [{name: 'Kirsten Gillibrand', party: 'D', phone: '(202) 224-4451', email: 'senator@gillibrand.senate.gov'}, {name: 'Chuck Schumer', party: 'D', phone: '(202) 224-6542', email: 'senator@schumer.senate.gov'}],
            'NC': [{name: 'Thom Tillis', party: 'R', phone: '(202) 224-6342', email: 'senator@tillis.senate.gov'}, {name: 'Ted Budd', party: 'R', phone: '(202) 224-3154', email: 'senator@budd.senate.gov'}],
            'ND': [{name: 'John Hoeven', party: 'R', phone: '(202) 224-2551', email: 'senator@hoeven.senate.gov'}, {name: 'Kevin Cramer', party: 'R', phone: '(202) 224-2043', email: 'senator@cramer.senate.gov'}],
            'OH': [{name: 'Sherrod Brown', party: 'D', phone: '(202) 224-2315', email: 'senator@brown.senate.gov'}, {name: 'Bernie Moreno', party: 'R', phone: '(202) 224-3353', email: 'senator@moreno.senate.gov'}],
            'OK': [{name: 'James Lankford', party: 'R', phone: '(202) 224-5754', email: 'senator@lankford.senate.gov'}, {name: 'Markwayne Mullin', party: 'R', phone: '(202) 224-4721', email: 'senator@mullin.senate.gov'}],
            'OR': [{name: 'Jeff Merkley', party: 'D', phone: '(202) 224-3753', email: 'senator@merkley.senate.gov'}, {name: 'Ron Wyden', party: 'D', phone: '(202) 224-5244', email: 'senator@wyden.senate.gov'}],
            'PA': [{name: 'Bob Casey', party: 'D', phone: '(202) 224-6324', email: 'senator@casey.senate.gov'}, {name: 'John Fetterman', party: 'D', phone: '(202) 224-4254', email: 'senator@fetterman.senate.gov'}],
            'RI': [{name: 'Jack Reed', party: 'D', phone: '(202) 224-4642', email: 'senator@reed.senate.gov'}, {name: 'Sheldon Whitehouse', party: 'D', phone: '(202) 224-2921', email: 'senator@whitehouse.senate.gov'}],
            'SC': [{name: 'Lindsey Graham', party: 'R', phone: '(202) 224-5972', email: 'senator@lgraham.senate.gov'}, {name: 'Tim Scott', party: 'R', phone: '(202) 224-6121', email: 'senator@scott.senate.gov'}],
            'SD': [{name: 'John Thune', party: 'R', phone: '(202) 224-2321', email: 'senator@thune.senate.gov'}, {name: 'Mike Rounds', party: 'R', phone: '(202) 224-5842', email: 'senator@rounds.senate.gov'}],
            'TN': [{name: 'Marsha Blackburn', party: 'R', phone: '(202) 224-3344', email: 'senator@blackburn.senate.gov'}, {name: 'Bill Hagerty', party: 'R', phone: '(202) 224-4944', email: 'senator@hagerty.senate.gov'}],
            'TX': [{name: 'John Cornyn', party: 'R', phone: '(202) 224-2934', email: 'senator@cornyn.senate.gov'}, {name: 'Ted Cruz', party: 'R', phone: '(202) 224-5922', email: 'senator@cruz.senate.gov'}],
            'UT': [{name: 'Mike Lee', party: 'R', phone: '(202) 224-5444', email: 'senator@lee.senate.gov'}, {name: 'John Curtis', party: 'R', phone: '(202) 224-5251', email: 'senator@curtis.senate.gov'}],
            'VT': [{name: 'Peter Welch', party: 'D', phone: '(202) 224-4242', email: 'senator@welch.senate.gov'}, {name: 'Bernie Sanders', party: 'I', phone: '(202) 224-5141', email: 'senator@sanders.senate.gov'}],
            'VA': [{name: 'Tim Kaine', party: 'D', phone: '(202) 224-4024', email: 'senator@kaine.senate.gov'}, {name: 'Mark Warner', party: 'D', phone: '(202) 224-2023', email: 'senator@warner.senate.gov'}],
            'WA': [{name: 'Maria Cantwell', party: 'D', phone: '(202) 224-3441', email: 'senator@cantwell.senate.gov'}, {name: 'Patty Murray', party: 'D', phone: '(202) 224-2621', email: 'senator@murray.senate.gov'}],
            'WV': [{name: 'Shelley Moore Capito', party: 'R', phone: '(202) 224-6472', email: 'senator@capito.senate.gov'}, {name: 'Jim Justice', party: 'R', phone: '(202) 224-3954', email: 'senator@justice.senate.gov'}],
            'WI': [{name: 'Tammy Baldwin', party: 'D', phone: '(202) 224-5653', email: 'senator@baldwin.senate.gov'}, {name: 'Eric Hovde', party: 'R', phone: '(202) 224-5323', email: 'senator@hovde.senate.gov'}],
            'WY': [{name: 'John Barrasso', party: 'R', phone: '(202) 224-6441', email: 'senator@barrasso.senate.gov'}, {name: 'Cynthia Lummis', party: 'R', phone: '(202) 224-3424', email: 'senator@lummis.senate.gov'}],
            'DC': [{name: 'Shadow Senator', party: 'D', phone: '(202) 727-1000', email: 'council@dc.gov'}]
        };

        // Governors database (2025) with emails
        const governorsDB = {
            'AL': {name: 'Kay Ivey', party: 'R', phone: '(334) 242-7100', email: 'governor@governor.alabama.gov', stance: 'pro-ice'},
            'AK': {name: 'Mike Dunleavy', party: 'R', phone: '(907) 465-3500', email: 'governor@alaska.gov', stance: 'pro-ice'},
            'AZ': {name: 'Katie Hobbs', party: 'D', phone: '(602) 542-4331', email: 'engage@az.gov', stance: 'neutral'},
            'AR': {name: 'Sarah Huckabee Sanders', party: 'R', phone: '(501) 682-2345', email: 'governor@governor.arkansas.gov', stance: 'pro-ice'},
            'CA': {name: 'Gavin Newsom', party: 'D', phone: '(916) 445-2841', email: 'governor@governor.ca.gov', stance: 'sanctuary'},
            'CO': {name: 'Jared Polis', party: 'D', phone: '(303) 866-2471', email: 'governorpolis@state.co.us', stance: 'sanctuary'},
            'CT': {name: 'Ned Lamont', party: 'D', phone: '(860) 566-4840', email: 'governor.lamont@ct.gov', stance: 'sanctuary'},
            'DE': {name: 'Matt Meyer', party: 'D', phone: '(302) 744-4101', email: 'governor@delaware.gov', stance: 'neutral'},
            'FL': {name: 'Ron DeSantis', party: 'R', phone: '(850) 488-7146', email: 'governorron.desantis@eog.myflorida.com', stance: 'pro-ice'},
            'GA': {name: 'Brian Kemp', party: 'R', phone: '(404) 656-1776', email: 'governor@georgia.gov', stance: 'pro-ice'},
            'HI': {name: 'Josh Green', party: 'D', phone: '(808) 586-0034', email: 'governor@hawaii.gov', stance: 'sanctuary'},
            'ID': {name: 'Brad Little', party: 'R', phone: '(208) 334-2100', email: 'governor@gov.idaho.gov', stance: 'pro-ice'},
            'IL': {name: 'JB Pritzker', party: 'D', phone: '(217) 782-6830', email: 'governor@illinois.gov', stance: 'sanctuary'},
            'IN': {name: 'Mike Braun', party: 'R', phone: '(317) 232-4567', email: 'governor@gov.in.gov', stance: 'pro-ice'},
            'IA': {name: 'Kim Reynolds', party: 'R', phone: '(515) 281-5211', email: 'governor@iowa.gov', stance: 'pro-ice'},
            'KS': {name: 'Laura Kelly', party: 'D', phone: '(785) 296-3232', email: 'governor@ks.gov', stance: 'neutral'},
            'KY': {name: 'Andy Beshear', party: 'D', phone: '(502) 564-2611', email: 'governor@ky.gov', stance: 'neutral'},
            'LA': {name: 'Jeff Landry', party: 'R', phone: '(225) 342-7015', email: 'gov@la.gov', stance: 'pro-ice'},
            'ME': {name: 'Janet Mills', party: 'D', phone: '(207) 287-3531', email: 'governor@maine.gov', stance: 'neutral'},
            'MD': {name: 'Wes Moore', party: 'D', phone: '(410) 974-3901', email: 'governor@maryland.gov', stance: 'sanctuary'},
            'MA': {name: 'Maura Healey', party: 'D', phone: '(617) 725-4005', email: 'governor@mass.gov', stance: 'sanctuary'},
            'MI': {name: 'Gretchen Whitmer', party: 'D', phone: '(517) 373-3400', email: 'governor@michigan.gov', stance: 'sanctuary'},
            'MN': {name: 'Tim Walz', party: 'D', phone: '(651) 201-3400', email: 'governor@state.mn.us', stance: 'sanctuary'},
            'MS': {name: 'Tate Reeves', party: 'R', phone: '(601) 359-3150', email: 'governor@governor.ms.gov', stance: 'pro-ice'},
            'MO': {name: 'Mike Kehoe', party: 'R', phone: '(573) 751-3222', email: 'governor@mo.gov', stance: 'pro-ice'},
            'MT': {name: 'Greg Gianforte', party: 'R', phone: '(406) 444-3111', email: 'governor@mt.gov', stance: 'pro-ice'},
            'NE': {name: 'Jim Pillen', party: 'R', phone: '(402) 471-2244', email: 'governor@nebraska.gov', stance: 'pro-ice'},
            'NV': {name: 'Joe Lombardo', party: 'R', phone: '(775) 684-5670', email: 'governor@gov.nv.gov', stance: 'neutral'},
            'NH': {name: 'Kelly Ayotte', party: 'R', phone: '(603) 271-2121', email: 'governor@nh.gov', stance: 'neutral'},
            'NJ': {name: 'Phil Murphy', party: 'D', phone: '(609) 292-6000', email: 'governor@nj.gov', stance: 'sanctuary'},
            'NM': {name: 'Michelle Lujan Grisham', party: 'D', phone: '(505) 476-2200', email: 'governor@state.nm.us', stance: 'sanctuary'},
            'NY': {name: 'Kathy Hochul', party: 'D', phone: '(518) 474-8390', email: 'governor@ny.gov', stance: 'sanctuary'},
            'NC': {name: 'Josh Stein', party: 'D', phone: '(919) 814-2000', email: 'governor@nc.gov', stance: 'neutral'},
            'ND': {name: 'Kelly Armstrong', party: 'R', phone: '(701) 328-2200', email: 'governor@nd.gov', stance: 'pro-ice'},
            'OH': {name: 'Mike DeWine', party: 'R', phone: '(614) 466-3555', email: 'governor@ohio.gov', stance: 'pro-ice'},
            'OK': {name: 'Kevin Stitt', party: 'R', phone: '(405) 521-2342', email: 'governor@gov.ok.gov', stance: 'pro-ice'},
            'OR': {name: 'Tina Kotek', party: 'D', phone: '(503) 378-4582', email: 'governor@oregon.gov', stance: 'sanctuary'},
            'PA': {name: 'Josh Shapiro', party: 'D', phone: '(717) 787-2500', email: 'governor@pa.gov', stance: 'neutral'},
            'RI': {name: 'Dan McKee', party: 'D', phone: '(401) 222-2080', email: 'governor@ri.gov', stance: 'sanctuary'},
            'SC': {name: 'Henry McMaster', party: 'R', phone: '(803) 734-2100', email: 'governor@sc.gov', stance: 'pro-ice'},
            'SD': {name: 'Kristi Noem', party: 'R', phone: '(605) 773-3212', email: 'governor@sd.gov', stance: 'pro-ice'},
            'TN': {name: 'Bill Lee', party: 'R', phone: '(615) 741-2001', email: 'governor@tn.gov', stance: 'pro-ice'},
            'TX': {name: 'Greg Abbott', party: 'R', phone: '(512) 463-2000', email: 'governor@texas.gov', stance: 'pro-ice'},
            'UT': {name: 'Spencer Cox', party: 'R', phone: '(801) 538-1000', email: 'governor@utah.gov', stance: 'pro-ice'},
            'VT': {name: 'Phil Scott', party: 'R', phone: '(802) 828-3333', email: 'governor@vermont.gov', stance: 'neutral'},
            'VA': {name: 'Glenn Youngkin', party: 'R', phone: '(804) 786-2211', email: 'governor@virginia.gov', stance: 'pro-ice'},
            'WA': {name: 'Bob Ferguson', party: 'D', phone: '(360) 902-4111', email: 'governor@wa.gov', stance: 'sanctuary'},
            'WV': {name: 'Patrick Morrisey', party: 'R', phone: '(304) 558-2000', email: 'governor@wv.gov', stance: 'pro-ice'},
            'WI': {name: 'Tony Evers', party: 'D', phone: '(608) 266-1212', email: 'eversinfo@wisconsin.gov', stance: 'neutral'},
            'WY': {name: 'Mark Gordon', party: 'R', phone: '(307) 777-7434', email: 'governor@wyo.gov', stance: 'pro-ice'},
            'DC': {name: 'Muriel Bowser', party: 'D', phone: '(202) 727-6300', email: 'eom@dc.gov', stance: 'sanctuary'}
        };

        // Chamber of Commerce by state (major cities)
        const chamberDB = {
            'AL': [{city: 'Birmingham', name: 'Birmingham Business Alliance', phone: '(205) 324-2100', email: 'info@birminghambusinessalliance.com'}],
            'AZ': [{city: 'Phoenix', name: 'Greater Phoenix Chamber', phone: '(602) 495-2182', email: 'info@phoenixchamber.com'}],
            'CA': [{city: 'Los Angeles', name: 'Los Angeles Area Chamber', phone: '(213) 580-7500', email: 'info@lachamber.com'}, {city: 'San Francisco', name: 'SF Chamber of Commerce', phone: '(415) 392-4520', email: 'info@sfchamber.com'}],
            'CO': [{city: 'Denver', name: 'Denver Metro Chamber', phone: '(303) 534-8500', email: 'info@denverchamber.org'}, {city: 'Boulder', name: 'Boulder Chamber', phone: '(303) 442-1044', email: 'info@boulderchamber.com'}],
            'FL': [{city: 'Miami', name: 'Greater Miami Chamber', phone: '(305) 350-7700', email: 'info@miamichamber.com'}],
            'GA': [{city: 'Atlanta', name: 'Metro Atlanta Chamber', phone: '(404) 880-9000', email: 'info@metroatlantachamber.com'}],
            'IL': [{city: 'Chicago', name: 'Chicagoland Chamber', phone: '(312) 494-6700', email: 'info@chicagolandchamber.org'}],
            'MA': [{city: 'Boston', name: 'Greater Boston Chamber', phone: '(617) 227-4500', email: 'info@bostonchamber.com'}],
            'MI': [{city: 'Detroit', name: 'Detroit Regional Chamber', phone: '(313) 596-0300', email: 'info@detroitchamber.com'}],
            'MN': [{city: 'Minneapolis', name: 'Minneapolis Regional Chamber', phone: '(612) 370-9100', email: 'info@minneapolischamber.org'}],
            'NY': [{city: 'New York', name: 'Partnership for NYC', phone: '(212) 493-7400', email: 'info@pfnyc.org'}],
            'OH': [{city: 'Columbus', name: 'Columbus Chamber', phone: '(614) 221-1321', email: 'info@columbus.org'}],
            'OR': [{city: 'Portland', name: 'Portland Business Alliance', phone: '(503) 224-8684', email: 'info@portlandalliance.com'}],
            'PA': [{city: 'Philadelphia', name: 'Chamber of Commerce Greater Philadelphia', phone: '(215) 545-1234', email: 'info@chamberphl.com'}],
            'TX': [{city: 'Houston', name: 'Greater Houston Partnership', phone: '(713) 844-3600', email: 'info@houston.org'}, {city: 'Dallas', name: 'Dallas Regional Chamber', phone: '(214) 746-6600', email: 'info@dallaschamber.org'}, {city: 'Austin', name: 'Austin Chamber', phone: '(512) 478-9383', email: 'info@austinchamber.com'}],
            'WA': [{city: 'Seattle', name: 'Seattle Metro Chamber', phone: '(206) 389-7200', email: 'info@seattlechamber.com'}]
        };

        // Major cities by state with mayors (expanded to cover more cities)
        const majorCitiesDB = {
            'AL': [{city: 'Birmingham', mayor: 'Randall Woodfin', party: 'D', phone: '(205) 254-2277'}, {city: 'Montgomery', mayor: 'Steven Reed', party: 'D', phone: '(334) 625-2000'}, {city: 'Mobile', mayor: 'Sandy Stimpson', party: 'R', phone: '(251) 208-7395'}],
            'AK': [{city: 'Anchorage', mayor: 'Suzanne LaFrance', party: 'NP', phone: '(907) 343-7100'}],
            'AZ': [{city: 'Phoenix', mayor: 'Kate Gallego', party: 'D', phone: '(602) 262-7111'}, {city: 'Tucson', mayor: 'Regina Romero', party: 'D', phone: '(520) 791-4201'}, {city: 'Mesa', mayor: 'John Giles', party: 'R', phone: '(480) 644-2388'}],
            'AR': [{city: 'Little Rock', mayor: 'Frank Scott Jr.', party: 'D', phone: '(501) 371-4510'}],
            'CA': [{city: 'Los Angeles', mayor: 'Karen Bass', party: 'D', phone: '(213) 978-0600'}, {city: 'San Francisco', mayor: 'Daniel Lurie', party: 'D', phone: '(415) 554-6141'}, {city: 'San Diego', mayor: 'Todd Gloria', party: 'D', phone: '(619) 236-6330'}, {city: 'San Jose', mayor: 'Matt Mahan', party: 'D', phone: '(408) 535-4800'}, {city: 'Oakland', mayor: 'Sheng Thao', party: 'D', phone: '(510) 238-3141'}, {city: 'Sacramento', mayor: 'Darrell Steinberg', party: 'D', phone: '(916) 808-5300'}, {city: 'Fresno', mayor: 'Jerry Dyer', party: 'R', phone: '(559) 621-8000'}, {city: 'Long Beach', mayor: 'Rex Richardson', party: 'D', phone: '(562) 570-6801'}],
            'CO': [{city: 'Denver', mayor: 'Mike Johnston', party: 'D', phone: '(720) 865-9090'}, {city: 'Boulder', mayor: 'Aaron Brockett', party: 'NP', phone: '(303) 441-3002'}, {city: 'Colorado Springs', mayor: 'Yemi Mobolade', party: 'NP', phone: '(719) 385-5900'}, {city: 'Aurora', mayor: 'Mike Coffman', party: 'R', phone: '(303) 739-7015'}],
            'CT': [{city: 'Hartford', mayor: 'Arunan Arulampalam', party: 'D', phone: '(860) 757-9500'}, {city: 'New Haven', mayor: 'Justin Elicker', party: 'D', phone: '(203) 946-8200'}],
            'DE': [{city: 'Wilmington', mayor: 'Mike Purzycki', party: 'D', phone: '(302) 576-2100'}],
            'FL': [{city: 'Miami', mayor: 'Francis Suarez', party: 'R', phone: '(305) 250-5300'}, {city: 'Tampa', mayor: 'Jane Castor', party: 'D', phone: '(813) 274-8251'}, {city: 'Orlando', mayor: 'Buddy Dyer', party: 'D', phone: '(407) 246-2221'}, {city: 'Jacksonville', mayor: 'Donna Deegan', party: 'D', phone: '(904) 630-1776'}],
            'GA': [{city: 'Atlanta', mayor: 'Andre Dickens', party: 'D', phone: '(404) 330-6100'}, {city: 'Savannah', mayor: 'Van Johnson', party: 'D', phone: '(912) 651-6444'}],
            'HI': [{city: 'Honolulu', mayor: 'Rick Blangiardi', party: 'NP', phone: '(808) 768-4141'}],
            'ID': [{city: 'Boise', mayor: 'Lauren McLean', party: 'D', phone: '(208) 384-4422'}],
            'IL': [{city: 'Chicago', mayor: 'Brandon Johnson', party: 'D', phone: '(312) 744-3300'}],
            'IN': [{city: 'Indianapolis', mayor: 'Joe Hogsett', party: 'D', phone: '(317) 327-3601'}],
            'IA': [{city: 'Des Moines', mayor: 'Connie Boesen', party: 'NP', phone: '(515) 283-4944'}],
            'KS': [{city: 'Wichita', mayor: 'Lily Wu', party: 'NP', phone: '(316) 268-4331'}, {city: 'Kansas City', mayor: 'Tyrone Garner', party: 'NP', phone: '(913) 573-5010'}],
            'KY': [{city: 'Louisville', mayor: 'Craig Greenberg', party: 'D', phone: '(502) 574-2003'}, {city: 'Lexington', mayor: 'Linda Gorton', party: 'D', phone: '(859) 258-3100'}],
            'LA': [{city: 'New Orleans', mayor: 'LaToya Cantrell', party: 'D', phone: '(504) 658-4900'}, {city: 'Baton Rouge', mayor: 'Sharon Weston Broome', party: 'D', phone: '(225) 389-3100'}],
            'ME': [{city: 'Portland', mayor: 'Mark Dion', party: 'D', phone: '(207) 874-8689'}],
            'MD': [{city: 'Baltimore', mayor: 'Brandon Scott', party: 'D', phone: '(410) 396-3835'}],
            'MA': [{city: 'Boston', mayor: 'Michelle Wu', party: 'D', phone: '(617) 635-4500'}, {city: 'Worcester', mayor: 'Joseph Petty', party: 'D', phone: '(508) 799-1153'}],
            'MI': [{city: 'Detroit', mayor: 'Mike Duggan', party: 'D', phone: '(313) 224-3400'}, {city: 'Grand Rapids', mayor: 'Rosalynn Bliss', party: 'NP', phone: '(616) 456-3168'}],
            'MN': [{city: 'Minneapolis', mayor: 'Jacob Frey', party: 'D', phone: '(612) 673-2100'}, {city: 'St. Paul', mayor: 'Melvin Carter', party: 'D', phone: '(651) 266-8510'}],
            'MS': [{city: 'Jackson', mayor: 'Chokwe Antar Lumumba', party: 'D', phone: '(601) 960-1084'}],
            'MO': [{city: 'Kansas City', mayor: 'Quinton Lucas', party: 'D', phone: '(816) 513-3500'}, {city: 'St. Louis', mayor: 'Tishaura Jones', party: 'D', phone: '(314) 622-3201'}],
            'MT': [{city: 'Billings', mayor: 'Bill Cole', party: 'R', phone: '(406) 657-8296'}],
            'NE': [{city: 'Omaha', mayor: 'Jean Stothert', party: 'R', phone: '(402) 444-5000'}, {city: 'Lincoln', mayor: 'Leirion Gaylor Baird', party: 'D', phone: '(402) 441-7511'}],
            'NV': [{city: 'Las Vegas', mayor: 'Michelle Fiore', party: 'R', phone: '(702) 229-6241'}, {city: 'Reno', mayor: 'Hillary Schieve', party: 'NP', phone: '(775) 334-2001'}],
            'NH': [{city: 'Manchester', mayor: 'Jay Ruais', party: 'R', phone: '(603) 624-6500'}],
            'NJ': [{city: 'Newark', mayor: 'Ras Baraka', party: 'D', phone: '(973) 733-6400'}, {city: 'Jersey City', mayor: 'Steven Fulop', party: 'D', phone: '(201) 547-5200'}],
            'NM': [{city: 'Albuquerque', mayor: 'Tim Keller', party: 'D', phone: '(505) 768-3000'}, {city: 'Santa Fe', mayor: 'Alan Webber', party: 'D', phone: '(505) 955-6590'}],
            'NY': [{city: 'New York City', mayor: 'Eric Adams', party: 'D', phone: '(212) 639-9675'}, {city: 'Buffalo', mayor: 'Byron Brown', party: 'D', phone: '(716) 851-4841'}, {city: 'Rochester', mayor: 'Malik Evans', party: 'D', phone: '(585) 428-7045'}],
            'NC': [{city: 'Charlotte', mayor: 'Vi Lyles', party: 'D', phone: '(704) 336-2241'}, {city: 'Raleigh', mayor: 'Mary-Ann Baldwin', party: 'D', phone: '(919) 996-3050'}],
            'ND': [{city: 'Fargo', mayor: 'Tim Mahoney', party: 'NP', phone: '(701) 241-1310'}],
            'OH': [{city: 'Columbus', mayor: 'Andrew Ginther', party: 'D', phone: '(614) 645-7671'}, {city: 'Cleveland', mayor: 'Justin Bibb', party: 'D', phone: '(216) 664-2000'}, {city: 'Cincinnati', mayor: 'Aftab Pureval', party: 'D', phone: '(513) 352-3250'}],
            'OK': [{city: 'Oklahoma City', mayor: 'David Holt', party: 'R', phone: '(405) 297-2424'}, {city: 'Tulsa', mayor: 'Monroe Nichols', party: 'D', phone: '(918) 596-7411'}],
            'OR': [{city: 'Portland', mayor: 'Keith Wilson', party: 'NP', phone: '(503) 823-4120'}],
            'PA': [{city: 'Philadelphia', mayor: 'Cherelle Parker', party: 'D', phone: '(215) 686-2181'}, {city: 'Pittsburgh', mayor: 'Ed Gainey', party: 'D', phone: '(412) 255-2626'}],
            'RI': [{city: 'Providence', mayor: 'Brett Smiley', party: 'D', phone: '(401) 421-7740'}],
            'SC': [{city: 'Charleston', mayor: 'William Cogswell', party: 'R', phone: '(843) 577-6970'}, {city: 'Columbia', mayor: 'Daniel Rickenmann', party: 'R', phone: '(803) 545-3100'}],
            'SD': [{city: 'Sioux Falls', mayor: 'Paul TenHaken', party: 'R', phone: '(605) 367-8800'}],
            'TN': [{city: 'Nashville', mayor: 'Freddie O\'Connell', party: 'D', phone: '(615) 862-6000'}, {city: 'Memphis', mayor: 'Paul Young', party: 'D', phone: '(901) 636-6000'}],
            'TX': [{city: 'Houston', mayor: 'John Whitmire', party: 'D', phone: '(832) 393-1000'}, {city: 'Dallas', mayor: 'Eric Johnson', party: 'R', phone: '(214) 670-3301'}, {city: 'San Antonio', mayor: 'Ron Nirenberg', party: 'NP', phone: '(210) 207-7107'}, {city: 'Austin', mayor: 'Kirk Watson', party: 'D', phone: '(512) 974-2250'}, {city: 'Fort Worth', mayor: 'Mattie Parker', party: 'NP', phone: '(817) 392-6118'}, {city: 'El Paso', mayor: 'Oscar Leeser', party: 'D', phone: '(915) 212-0021'}],
            'UT': [{city: 'Salt Lake City', mayor: 'Erin Mendenhall', party: 'D', phone: '(801) 535-7704'}],
            'VT': [{city: 'Burlington', mayor: 'Emma Mulvaney-Stanak', party: 'P', phone: '(802) 865-7272'}],
            'VA': [{city: 'Virginia Beach', mayor: 'Bobby Dyer', party: 'R', phone: '(757) 385-4581'}, {city: 'Richmond', mayor: 'Levar Stoney', party: 'D', phone: '(804) 646-7970'}],
            'WA': [{city: 'Seattle', mayor: 'Bruce Harrell', party: 'D', phone: '(206) 684-4000'}, {city: 'Spokane', mayor: 'Lisa Brown', party: 'D', phone: '(509) 625-6250'}],
            'WV': [{city: 'Charleston', mayor: 'Amy Shuler Goodwin', party: 'D', phone: '(304) 348-8000'}],
            'WI': [{city: 'Milwaukee', mayor: 'Cavalier Johnson', party: 'D', phone: '(414) 286-2200'}, {city: 'Madison', mayor: 'Satya Rhodes-Conway', party: 'D', phone: '(608) 266-4611'}],
            'WY': [{city: 'Cheyenne', mayor: 'Patrick Collins', party: 'R', phone: '(307) 637-6300'}],
            'DC': [{city: 'Washington DC', mayor: 'Muriel Bowser', party: 'D', phone: '(202) 727-6300'}]
        };

        // Local institutions templates - what to look up
        // Local institutions database by state - schools, police, sheriffs with real contacts
        const localInstitutionsDB = {
            'CO': [
                { type: 'School District', name: 'Denver Public Schools', contact: 'Superintendent Alex Marrero', phone: '(720) 423-3200', email: 'superintendent@dpsk12.org', city: 'Denver', action: 'Demand sanctuary schools and no data sharing with ICE' },
                { type: 'School District', name: 'Boulder Valley School District', contact: 'Superintendent Rob Anderson', phone: '(720) 561-5100', email: 'anderson_rob@bvsd.org', city: 'Boulder', action: 'Demand sanctuary schools and no data sharing with ICE' },
                { type: 'Police', name: 'Denver Police Department', contact: 'Chief Ron Thomas', phone: '(720) 913-6010', email: 'chief@denvergov.org', city: 'Denver', action: 'End all ICE cooperation and 287(g) agreements' },
                { type: 'Police', name: 'Boulder Police Department', contact: 'Chief Maris Herold', phone: '(303) 441-3300', email: 'police@bouldercolorado.gov', city: 'Boulder', action: 'End all ICE cooperation and data sharing' },
                { type: 'Sheriff', name: 'Denver Sheriff Dept', contact: 'Sheriff Elias Diggins', phone: '(720) 337-0100', email: 'info@denvergov.org', city: 'Denver', action: 'End ICE detainers and 287(g) cooperation' },
                { type: 'Sheriff', name: 'Boulder County Sheriff', contact: 'Sheriff Curtis Johnson', phone: '(303) 441-4444', email: 'sheriff@bouldercounty.org', city: 'Boulder', action: 'End ICE detainers and 287(g) cooperation' },
                { type: 'County', name: 'Denver County Commissioners', contact: 'Board of County Commissioners', phone: '(720) 913-8000', email: 'councildistrict1@denvergov.org', city: 'Denver', action: 'Pass sanctuary county resolution' },
                { type: 'Library', name: 'Denver Public Library', contact: 'City Librarian', phone: '(720) 865-1111', email: 'comments@denverlibrary.org', city: 'Denver', action: 'Ensure no patron data shared with ICE' }
            ],
            'CA': [
                { type: 'School District', name: 'Los Angeles Unified', contact: 'Superintendent Alberto Carvalho', phone: '(213) 241-1000', email: 'superintendent@lausd.net', city: 'Los Angeles', action: 'Strengthen sanctuary schools policies' },
                { type: 'School District', name: 'San Francisco Unified', contact: 'Superintendent Matt Wayne', phone: '(415) 241-6000', email: 'superintendent@sfusd.edu', city: 'San Francisco', action: 'Maintain and strengthen sanctuary schools' },
                { type: 'Police', name: 'LAPD', contact: 'Chief Dominic Choi', phone: '(213) 486-0150', email: 'contact@lapd.online', city: 'Los Angeles', action: 'Maintain no ICE cooperation policy' },
                { type: 'Police', name: 'SFPD', contact: 'Chief Bill Scott', phone: '(415) 553-1551', email: 'sfpdchief@sfgov.org', city: 'San Francisco', action: 'Maintain sanctuary city policies' },
                { type: 'Sheriff', name: 'LA County Sheriff', contact: 'Sheriff Robert Luna', phone: '(213) 229-1700', email: 'laaboretters@lasd.org', city: 'Los Angeles', action: 'End any ICE cooperation agreements' },
                { type: 'County', name: 'LA County Board of Supervisors', contact: 'Board of Supervisors', phone: '(213) 974-1411', email: 'firstdistrict@bos.lacounty.gov', city: 'Los Angeles', action: 'Strengthen sanctuary county policies' }
            ],
            'NY': [
                { type: 'School District', name: 'NYC Dept of Education', contact: 'Chancellor David Banks', phone: '(718) 935-2000', email: 'chancellor@schools.nyc.gov', city: 'New York', action: 'Maintain sanctuary schools and refuse ICE access' },
                { type: 'Police', name: 'NYPD', contact: 'Commissioner Jessica Tisch', phone: '(646) 610-5000', email: 'commissioner@nypd.org', city: 'New York', action: 'Maintain limited ICE cooperation policies' },
                { type: 'Sheriff', name: 'NYC Sheriff', contact: 'Sheriff Anthony Miranda', phone: '(212) 487-5600', email: 'sheriff@finance.nyc.gov', city: 'New York', action: 'No cooperation with ICE civil enforcement' },
                { type: 'Library', name: 'NY Public Library', contact: 'President Tony Marx', phone: '(917) 275-6975', email: 'president@nypl.org', city: 'New York', action: 'Ensure no patron data shared with ICE' }
            ],
            'TX': [
                { type: 'School District', name: 'Houston ISD', contact: 'Superintendent Mike Miles', phone: '(713) 556-6000', email: 'superintendent@houstonisd.org', city: 'Houston', action: 'Protect student data from ICE' },
                { type: 'School District', name: 'Austin ISD', contact: 'Superintendent Matias Segura', phone: '(512) 414-1700', email: 'superintendent@austinisd.org', city: 'Austin', action: 'Maintain sanctuary schools policies' },
                { type: 'Police', name: 'Houston Police', contact: 'Chief Troy Finner', phone: '(713) 308-1200', email: 'hpdchief@houstontx.gov', city: 'Houston', action: 'Limit cooperation with ICE enforcement' },
                { type: 'Police', name: 'Austin Police', contact: 'Chief Robin Henderson', phone: '(512) 974-5000', email: 'apdinfo@austintexas.gov', city: 'Austin', action: 'Limit cooperation with ICE enforcement' },
                { type: 'Sheriff', name: 'Harris County Sheriff', contact: 'Sheriff Ed Gonzalez', phone: '(713) 221-6000', email: 'hcso-sheriff@hcso.hctx.net', city: 'Houston', action: 'End ICE 287(g) agreements' }
            ],
            'IL': [
                { type: 'School District', name: 'Chicago Public Schools', contact: 'CEO Pedro Martinez', phone: '(773) 553-1000', email: 'ceo@cps.edu', city: 'Chicago', action: 'Maintain sanctuary schools status' },
                { type: 'Police', name: 'Chicago Police', contact: 'Superintendent Larry Snelling', phone: '(312) 746-6000', email: 'clearpath@chicagopolice.org', city: 'Chicago', action: 'Maintain Welcoming City ordinance' },
                { type: 'Sheriff', name: 'Cook County Sheriff', contact: 'Sheriff Tom Dart', phone: '(312) 603-6444', email: 'sheriff.dart@ccsheriff.org', city: 'Chicago', action: 'Maintain no ICE detainer policy' },
                { type: 'Library', name: 'Chicago Public Library', contact: 'Commissioner Chris Brown', phone: '(312) 747-4300', email: 'commissioner@chipublib.org', city: 'Chicago', action: 'Ensure no patron data shared with ICE' }
            ],
            'FL': [
                { type: 'School District', name: 'Miami-Dade Schools', contact: 'Superintendent Jose Dotres', phone: '(305) 995-1000', email: 'superintendent@dadeschools.net', city: 'Miami', action: 'Protect student data from ICE access' },
                { type: 'Police', name: 'Miami Police', contact: 'Chief Manuel Morales', phone: '(305) 603-6640', email: 'chief@miami-police.org', city: 'Miami', action: 'Limit cooperation with ICE civil enforcement' },
                { type: 'Sheriff', name: 'Miami-Dade Sheriff', contact: 'Director Freddy Ramirez', phone: '(305) 471-1780', email: 'mdpd@miamidade.gov', city: 'Miami', action: 'End ICE cooperation agreements' }
            ],
            'AZ': [
                { type: 'School District', name: 'Phoenix Union HSD', contact: 'Superintendent Chad Gestson', phone: '(602) 764-1100', email: 'superintendent@phoenixunion.org', city: 'Phoenix', action: 'Protect student data from ICE' },
                { type: 'Police', name: 'Phoenix Police', contact: 'Chief Michael Sullivan', phone: '(602) 262-6151', email: 'police@phoenix.gov', city: 'Phoenix', action: 'Limit ICE cooperation' },
                { type: 'Sheriff', name: 'Maricopa County Sheriff', contact: 'Sheriff Russ Skinner', phone: '(602) 876-1801', email: 'mcso@mcso.maricopa.gov', city: 'Phoenix', action: 'End ICE 287(g) program' }
            ],
            'WA': [
                { type: 'School District', name: 'Seattle Public Schools', contact: 'Superintendent Brent Jones', phone: '(206) 252-0000', email: 'superintendent@seattleschools.org', city: 'Seattle', action: 'Maintain sanctuary schools' },
                { type: 'Police', name: 'Seattle Police', contact: 'Chief Adrian Diaz', phone: '(206) 684-5577', email: 'spd@seattle.gov', city: 'Seattle', action: 'Maintain limited ICE cooperation' },
                { type: 'Sheriff', name: 'King County Sheriff', contact: 'Sheriff Patti Cole-Tindall', phone: '(206) 296-4155', email: 'sheriff@kingcounty.gov', city: 'Seattle', action: 'No cooperation with ICE detainers' }
            ],
            'MA': [
                { type: 'School District', name: 'Boston Public Schools', contact: 'Superintendent Mary Skipper', phone: '(617) 635-9000', email: 'superintendent@bostonpublicschools.org', city: 'Boston', action: 'Maintain sanctuary schools' },
                { type: 'Police', name: 'Boston Police', contact: 'Commissioner Michael Cox', phone: '(617) 343-4500', email: 'commissioner@pd.boston.gov', city: 'Boston', action: 'Maintain Trust Act compliance' },
                { type: 'Sheriff', name: 'Suffolk County Sheriff', contact: 'Sheriff Steven Tompkins', phone: '(617) 635-1000', email: 'info@scsdma.org', city: 'Boston', action: 'No ICE detainer cooperation' }
            ],
            'GA': [
                { type: 'School District', name: 'Atlanta Public Schools', contact: 'Superintendent Lisa Herring', phone: '(404) 802-3500', email: 'superintendent@atlanta.k12.ga.us', city: 'Atlanta', action: 'Protect student data from ICE' },
                { type: 'Police', name: 'Atlanta Police', contact: 'Chief Darin Schierbaum', phone: '(404) 614-6544', email: 'apd@atlantaga.gov', city: 'Atlanta', action: 'Limit ICE cooperation' },
                { type: 'Sheriff', name: 'Fulton County Sheriff', contact: 'Sheriff Pat Labat', phone: '(404) 612-5100', email: 'sheriff@fultoncountyga.gov', city: 'Atlanta', action: 'End ICE 287(g) agreements' }
            ],
            'MN': [
                { type: 'School District', name: 'Minneapolis Public Schools', contact: 'Superintendent Lisa Sayles-Adams', phone: '(612) 668-0000', email: 'superintendent@mpls.k12.mn.us', city: 'Minneapolis', action: 'Maintain sanctuary schools policies' },
                { type: 'School District', name: 'St. Paul Public Schools', contact: 'Superintendent Joe Gothard', phone: '(651) 767-8100', email: 'superintendent@spps.org', city: 'St. Paul', action: 'Protect student data from ICE' },
                { type: 'Police', name: 'Minneapolis Police', contact: 'Chief Brian ONeil', phone: '(612) 673-2853', email: 'police@minneapolismn.gov', city: 'Minneapolis', action: 'Maintain limited ICE cooperation policy' },
                { type: 'Police', name: 'St. Paul Police', contact: 'Chief Axel Henry', phone: '(651) 291-1111', email: 'police@stpaul.gov', city: 'St. Paul', action: 'Limit ICE cooperation' },
                { type: 'Sheriff', name: 'Hennepin County Sheriff', contact: 'Sheriff Dawanna Witt', phone: '(612) 348-3744', email: 'sheriff@hennepin.us', city: 'Minneapolis', action: 'End ICE detainer cooperation' },
                { type: 'Sheriff', name: 'Ramsey County Sheriff', contact: 'Sheriff Bob Fletcher', phone: '(651) 266-9333', email: 'sheriff@ramseycounty.us', city: 'St. Paul', action: 'End ICE detainer cooperation' },
                { type: 'County', name: 'Hennepin County Board', contact: 'Board of Commissioners', phone: '(612) 348-3081', email: 'commissioner@hennepin.us', city: 'Minneapolis', action: 'Pass sanctuary county resolution' }
            ],
            'OR': [
                { type: 'School District', name: 'Portland Public Schools', contact: 'Superintendent Guadalupe Guerrero', phone: '(503) 916-2000', email: 'superintendent@pps.net', city: 'Portland', action: 'Maintain sanctuary schools' },
                { type: 'Police', name: 'Portland Police', contact: 'Chief Bob Day', phone: '(503) 823-0000', email: 'ppb@portlandoregon.gov', city: 'Portland', action: 'Maintain sanctuary city policy' },
                { type: 'Sheriff', name: 'Multnomah County Sheriff', contact: 'Sheriff Nicole Morrisey OConnell', phone: '(503) 988-4300', email: 'mcso@mcso.us', city: 'Portland', action: 'No ICE detainer cooperation' }
            ],
            'DC': [
                { type: 'School District', name: 'DC Public Schools', contact: 'Chancellor Lewis Ferebee', phone: '(202) 442-5885', email: 'chancellor@dc.gov', city: 'Washington', action: 'Maintain sanctuary schools' },
                { type: 'Police', name: 'DC Metropolitan Police', contact: 'Chief Pamela Smith', phone: '(202) 727-9099', email: 'mpd@dc.gov', city: 'Washington', action: 'Maintain sanctuary city policy' }
            ],
            'MD': [
                { type: 'School District', name: 'Baltimore City Schools', contact: 'CEO Sonja Santelises', phone: '(410) 396-8803', email: 'ceo@bcps.k12.md.us', city: 'Baltimore', action: 'Protect student data from ICE' },
                { type: 'School District', name: 'Montgomery County Schools', contact: 'Superintendent Monifa McKnight', phone: '(240) 740-3020', email: 'superintendent@mcpsmd.org', city: 'Rockville', action: 'Maintain sanctuary schools' },
                { type: 'Police', name: 'Baltimore Police', contact: 'Commissioner Richard Worley', phone: '(410) 396-2525', email: 'bpdmedia@baltimorepolice.org', city: 'Baltimore', action: 'Limit ICE cooperation' },
                { type: 'Sheriff', name: 'Baltimore County Sheriff', contact: 'Sheriff Jay Fisher', phone: '(410) 887-6700', email: 'sheriff@baltimorecountymd.gov', city: 'Baltimore', action: 'End ICE cooperation' }
            ],
            'UT': [
                { type: 'School District', name: 'Salt Lake City Schools', contact: 'Superintendent Timothy Gadson', phone: '(801) 578-8599', email: 'superintendent@slcschools.org', city: 'Salt Lake City', action: 'Protect student data from ICE' },
                { type: 'Police', name: 'Salt Lake City Police', contact: 'Chief Mike Brown', phone: '(801) 799-3000', email: 'slcpd@slcgov.com', city: 'Salt Lake City', action: 'Limit ICE cooperation' },
                { type: 'Sheriff', name: 'Salt Lake County Sheriff', contact: 'Sheriff Rosie Rivera', phone: '(385) 468-8900', email: 'sheriff@slco.org', city: 'Salt Lake City', action: 'End ICE detainer cooperation' }
            ],
            'NJ': [
                { type: 'School District', name: 'Newark Public Schools', contact: 'Superintendent Roger Leon', phone: '(973) 733-7333', email: 'superintendent@nps.k12.nj.us', city: 'Newark', action: 'Maintain sanctuary schools' },
                { type: 'Police', name: 'Newark Police', contact: 'Director Emanuel Miranda', phone: '(973) 733-6000', email: 'npd@ci.newark.nj.us', city: 'Newark', action: 'Maintain sanctuary city policy' },
                { type: 'Sheriff', name: 'Essex County Sheriff', contact: 'Sheriff Armando Fontoura', phone: '(973) 621-4111', email: 'sheriff@essexsheriffnj.com', city: 'Newark', action: 'End ICE detainer cooperation' }
            ],
            'NV': [
                { type: 'School District', name: 'Clark County Schools', contact: 'Superintendent Jesus Jara', phone: '(702) 799-5000', email: 'superintendent@ccsd.net', city: 'Las Vegas', action: 'Protect student data from ICE' },
                { type: 'Police', name: 'Las Vegas Metro Police', contact: 'Sheriff Kevin McMahill', phone: '(702) 828-3111', email: 'lvmpd@lvmpd.com', city: 'Las Vegas', action: 'Limit ICE cooperation' }
            ],
            'NC': [
                { type: 'School District', name: 'Charlotte-Mecklenburg Schools', contact: 'Superintendent Crystal Hill', phone: '(980) 343-3000', email: 'superintendent@cms.k12.nc.us', city: 'Charlotte', action: 'Protect student data from ICE' },
                { type: 'Police', name: 'Charlotte Police', contact: 'Chief Johnny Jennings', phone: '(704) 336-7600', email: 'cmpd@cmpd.org', city: 'Charlotte', action: 'Limit ICE cooperation' },
                { type: 'Sheriff', name: 'Mecklenburg County Sheriff', contact: 'Sheriff Garry McFadden', phone: '(704) 336-2543', email: 'sheriff@mecksheriff.com', city: 'Charlotte', action: 'End ICE 287(g) agreements' }
            ],
            'PA': [
                { type: 'School District', name: 'Philadelphia Schools', contact: 'Superintendent Tony Watlington', phone: '(215) 400-4000', email: 'superintendent@philasd.org', city: 'Philadelphia', action: 'Maintain sanctuary schools' },
                { type: 'Police', name: 'Philadelphia Police', contact: 'Commissioner Kevin Bethel', phone: '(215) 686-1776', email: 'ppd.commissioner@phila.gov', city: 'Philadelphia', action: 'Maintain sanctuary city policy' },
                { type: 'Sheriff', name: 'Philadelphia Sheriff', contact: 'Sheriff Rochelle Bilal', phone: '(215) 686-3500', email: 'sheriff@phila.gov', city: 'Philadelphia', action: 'No ICE detainer cooperation' }
            ],
            'MI': [
                { type: 'School District', name: 'Detroit Public Schools', contact: 'Superintendent Nikolai Vitti', phone: '(313) 873-3000', email: 'superintendent@detroitk12.org', city: 'Detroit', action: 'Maintain sanctuary schools' },
                { type: 'Police', name: 'Detroit Police', contact: 'Chief James White', phone: '(313) 596-2200', email: 'police@detroitmi.gov', city: 'Detroit', action: 'Limit ICE cooperation' },
                { type: 'Sheriff', name: 'Wayne County Sheriff', contact: 'Sheriff Raphael Washington', phone: '(313) 224-2222', email: 'sheriff@waynecounty.com', city: 'Detroit', action: 'End ICE detainer cooperation' }
            ],
            'OH': [
                { type: 'School District', name: 'Columbus City Schools', contact: 'Superintendent Angela Chapman', phone: '(614) 365-5000', email: 'superintendent@columbus.k12.oh.us', city: 'Columbus', action: 'Protect student data from ICE' },
                { type: 'Police', name: 'Columbus Police', contact: 'Chief Elaine Bryant', phone: '(614) 645-4545', email: 'cpd@columbus.gov', city: 'Columbus', action: 'Limit ICE cooperation' },
                { type: 'Sheriff', name: 'Franklin County Sheriff', contact: 'Sheriff Dallas Baldwin', phone: '(614) 525-3333', email: 'sheriff@franklincountyohio.gov', city: 'Columbus', action: 'End ICE cooperation' }
            ],
            'VA': [
                { type: 'School District', name: 'Fairfax County Schools', contact: 'Superintendent Michelle Reid', phone: '(571) 423-1000', email: 'superintendent@fcps.edu', city: 'Fairfax', action: 'Protect student data from ICE' },
                { type: 'Police', name: 'Fairfax County Police', contact: 'Chief Kevin Davis', phone: '(703) 246-2195', email: 'fcpd@fairfaxcounty.gov', city: 'Fairfax', action: 'Limit ICE cooperation' },
                { type: 'Sheriff', name: 'Fairfax County Sheriff', contact: 'Sheriff Stacey Kincaid', phone: '(703) 246-3200', email: 'sheriff@fairfaxcounty.gov', city: 'Fairfax', action: 'End ICE detainer cooperation' }
            ]
        };

        // Fallback institution types for states without specific data
        const institutionTypes = [
            { type: 'School District', desc: 'Contact superintendent to demand they don\'t share student data with ICE and create sanctuary schools', searchTerm: 'school district superintendent' },
            { type: 'Police Department', desc: 'Demand they don\'t cooperate with ICE detainers or share data. Ask about 287(g) agreements.', searchTerm: 'police chief' },
            { type: 'Sheriff\'s Office', desc: 'Sheriffs often have ICE agreements. Demand they end 287(g) cooperation.', searchTerm: 'county sheriff' },
            { type: 'County Government', desc: 'County commissioners can pass sanctuary policies and limit ICE cooperation.', searchTerm: 'county commissioners' },
            { type: 'City Council', desc: 'Push for sanctuary city resolutions and limits on police-ICE cooperation.', searchTerm: 'city council' },
            { type: 'Public Library', desc: 'Libraries can be safe spaces. Ensure they don\'t share patron data with ICE.', searchTerm: 'public library director' },
            { type: 'Hospital/Health Dept', desc: 'Healthcare facilities should be safe zones. Push for policies protecting patients.', searchTerm: 'hospital administration' }
        ];

        // Upcoming protests and rallies database - with organization links
        const upcomingProtests = [
            // Nationwide
            { date: 'Ongoing', city: 'Nationwide', state: 'ALL', name: 'ICE Out of Our Communities', org: 'United We Dream', link: 'https://unitedwedream.org/', desc: 'Weekly actions at ICE facilities. Check local chapter for times.', type: 'rally' },
            { date: 'Ongoing', city: 'Various', state: 'ALL', name: 'Lights for Liberty Vigils', org: 'Lights for Liberty', link: 'https://www.lightsforliberty.org/', desc: 'Monthly vigils at detention centers nationwide.', type: 'vigil' },
            { date: 'Feb 2025', city: 'Washington DC', state: 'DC', name: 'National Day of Action', org: 'Multiple orgs', link: 'https://unitedwedream.org/take-action/', desc: 'Mass mobilization demanding ICE abolition and immigrant protections.', type: 'march' },
            // California
            { date: 'Weekly', city: 'San Francisco', state: 'CA', name: 'SF ICE Watch', org: 'SFILEN', link: 'https://sfilen.org/', desc: 'Every Wednesday at 100 Montgomery St ICE Office.', type: 'rally' },
            { date: 'Weekly', city: 'Los Angeles', state: 'CA', name: 'Abolish ICE LA', org: 'CHIRLA', link: 'https://www.chirla.org/', desc: 'Saturday mornings at Federal Building, Downtown LA.', type: 'rally' },
            { date: 'Monthly', city: 'San Diego', state: 'CA', name: 'Border Angels Vigil', org: 'Border Angels', link: 'https://www.borderangels.org/', desc: 'Monthly vigils at the border and detention centers.', type: 'vigil' },
            // New York
            { date: 'Weekly', city: 'New York', state: 'NY', name: 'Close the Camps NYC', org: 'NYCIC', link: 'https://www.nycic.org/', desc: 'Actions throughout the 5 boroughs. Check social media.', type: 'rally' },
            { date: 'Monthly', city: 'Buffalo', state: 'NY', name: 'WNY Immigrant Rights', org: 'Journey\'s End', link: 'https://www.jersbuffalo.org/', desc: 'Monthly community actions and know your rights events.', type: 'rally' },
            // Illinois
            { date: 'Weekly', city: 'Chicago', state: 'IL', name: 'ICE Out of Chicago', org: 'ICIRR', link: 'https://www.icirr.org/', desc: 'Regular actions and rapid response. Text RESIST to 97779.', type: 'rally' },
            // Colorado
            { date: 'Monthly', city: 'Denver', state: 'CO', name: 'Aurora Detention Center Vigil', org: 'CIRC', link: 'https://coloradoimmigrant.org/', desc: 'First Saturday monthly at GEO facility, 3130 N Oakland St.', type: 'vigil' },
            { date: 'Weekly', city: 'Denver', state: 'CO', name: 'Denver Immigrant Legal Services', org: 'RMIAN', link: 'https://rmian.org/', desc: 'Weekly know your rights clinics and rapid response.', type: 'watch' },
            // Texas
            { date: 'Monthly', city: 'Houston', state: 'TX', name: 'Houston ICE Resistance', org: 'FIEL Houston', link: 'https://www.fielhouston.org/', desc: 'Monthly marches and detention center vigils.', type: 'march' },
            { date: 'Monthly', city: 'San Antonio', state: 'TX', name: 'SA Stands', org: 'RAICES Texas', link: 'https://www.raicestexas.org/', desc: 'Monthly vigils at Karnes detention center.', type: 'vigil' },
            { date: 'Weekly', city: 'Austin', state: 'TX', name: 'Austin Sanctuary Network', org: 'ASN', link: 'https://www.austinsanctuarynetwork.org/', desc: 'Weekly rapid response trainings and actions.', type: 'rally' },
            // Arizona
            { date: 'Monthly', city: 'Phoenix', state: 'AZ', name: 'Phoenix Rises', org: 'Puente Arizona', link: 'https://puenteaz.org/', desc: 'Monthly actions against ICE and border enforcement.', type: 'rally' },
            { date: 'Weekly', city: 'Tucson', state: 'AZ', name: 'Tucson Samaritans', org: 'No More Deaths', link: 'https://nomoredeaths.org/', desc: 'Weekly desert aid and border witness actions.', type: 'watch' },
            // Georgia
            { date: 'Monthly', city: 'Atlanta', state: 'GA', name: 'Shut Down ICE Atlanta', org: 'GLAHR', link: 'https://glfrustration.org/', desc: 'Monthly protests at Stewart Detention Center.', type: 'rally' },
            // Massachusetts
            { date: 'Ongoing', city: 'Boston', state: 'MA', name: 'ICE Free Mass', org: 'MIRA Coalition', link: 'https://www.miracoalition.org/', desc: 'Regular courthouse watches and rapid response.', type: 'watch' },
            // Washington
            { date: 'Ongoing', city: 'Seattle', state: 'WA', name: 'Tacoma Detention Resistance', org: 'NWIRP', link: 'https://www.nwirp.org/', desc: 'Regular actions at Northwest Detention Center.', type: 'rally' },
            { date: 'Monthly', city: 'Tacoma', state: 'WA', name: 'Northwest Detention Center Vigil', org: 'La Resistencia', link: 'https://www.laresistenciaseattle.org/', desc: 'Monthly vigils outside detention facility.', type: 'vigil' },
            // Minnesota
            { date: 'Ongoing', city: 'Minneapolis', state: 'MN', name: 'MN ICE Watch', org: 'Navigate MN', link: 'https://navigatemn.org/', desc: 'Rapid response network with regular community actions.', type: 'watch' },
            { date: 'Monthly', city: 'St. Paul', state: 'MN', name: 'ISAIAH Immigration Justice', org: 'ISAIAH', link: 'https://isaiahmn.org/', desc: 'Monthly faith-based actions and sanctuary support.', type: 'rally' },
            // Oregon
            { date: 'Ongoing', city: 'Portland', state: 'OR', name: 'Occupy ICE PDX', org: 'Pueblo Unido', link: 'https://www.pueblounidopdx.org/', desc: 'Ongoing resistance at ICE facility.', type: 'rally' },
            { date: 'Weekly', city: 'Portland', state: 'OR', name: 'Portland Immigrant Rights', org: 'PCASC', link: 'https://www.pcasc.org/', desc: 'Weekly rapid response and know your rights.', type: 'watch' },
            // Florida
            { date: 'Monthly', city: 'Miami', state: 'FL', name: 'South Florida ICE Watch', org: 'FLIC', link: 'https://floridaimmigrant.org/', desc: 'Monthly actions at Krome detention center.', type: 'vigil' },
            { date: 'Weekly', city: 'Orlando', state: 'FL', name: 'Central FL Immigrant Rights', org: 'Hope CommUnity', link: 'https://www.hfrn.org/', desc: 'Weekly community defense and rapid response.', type: 'watch' },
            { date: 'Monthly', city: 'Tampa', state: 'FL', name: 'Tampa Bay Immigrant Rights', org: 'TBIR Coalition', link: 'https://www.tampabayimmigrantrights.org/', desc: 'Monthly actions and know your rights events.', type: 'rally' },
            // DC/Maryland/Virginia
            { date: 'Weekly', city: 'Washington', state: 'DC', name: 'DC ICE Watch', org: 'Sanctuary DMV', link: 'https://www.sanctuarydmv.org/', desc: 'Weekly courthouse watches and rapid response.', type: 'watch' },
            { date: 'Monthly', city: 'Baltimore', state: 'MD', name: 'Baltimore Immigrant Rights', org: 'CASA', link: 'https://wearecasa.org/', desc: 'Monthly community actions and legal clinics.', type: 'rally' },
            { date: 'Monthly', city: 'Fairfax', state: 'VA', name: 'NoVA Immigrant Rights', org: 'CASA Virginia', link: 'https://wearecasa.org/', desc: 'Monthly vigils and rapid response training.', type: 'vigil' },
            // Utah
            { date: 'Monthly', city: 'Salt Lake City', state: 'UT', name: 'Utah Coalition', org: 'Comunidades Unidas', link: 'https://www.cuutah.org/', desc: 'Monthly immigrant rights actions and legal clinics.', type: 'rally' },
            // New Jersey
            { date: 'Weekly', city: 'Newark', state: 'NJ', name: 'NJ ICE Watch', org: 'Make the Road NJ', link: 'https://www.maketheroadnj.org/', desc: 'Weekly rapid response and courthouse watches.', type: 'watch' },
            { date: 'Monthly', city: 'Elizabeth', state: 'NJ', name: 'Elizabeth Detention Vigil', org: 'First Friends', link: 'https://firstfriendsnjny.org/', desc: 'Monthly vigils at Elizabeth detention center.', type: 'vigil' },
            // Nevada
            { date: 'Monthly', city: 'Las Vegas', state: 'NV', name: 'Vegas Strong Immigrant Rights', org: 'PLAN Action', link: 'https://planevada.org/', desc: 'Monthly community actions and rapid response.', type: 'rally' },
            // North Carolina
            { date: 'Monthly', city: 'Charlotte', state: 'NC', name: 'Charlotte Immigrant Rights', org: 'El Pueblo', link: 'https://elpueblo.org/', desc: 'Monthly actions against 287g and ICE cooperation.', type: 'rally' },
            { date: 'Weekly', city: 'Raleigh', state: 'NC', name: 'Triangle ICE Watch', org: 'Alerta Migratoria', link: 'https://alertamigratoria.org/', desc: 'Weekly rapid response and courthouse watches.', type: 'watch' },
            // Pennsylvania
            { date: 'Weekly', city: 'Philadelphia', state: 'PA', name: 'Philly ICE Watch', org: 'Juntos', link: 'https://vamosjuntos.org/', desc: 'Weekly rapid response and community defense.', type: 'watch' },
            { date: 'Monthly', city: 'Philadelphia', state: 'PA', name: 'Sanctuary Philly', org: 'New Sanctuary Movement', link: 'https://sanctuaryphiladelphia.org/', desc: 'Monthly vigils and accompaniment program.', type: 'vigil' },
            // Michigan
            { date: 'Monthly', city: 'Detroit', state: 'MI', name: 'Detroit Immigrant Rights', org: 'Michigan United', link: 'https://www.miunited.org/', desc: 'Monthly actions and know your rights trainings.', type: 'rally' },
            // Ohio
            { date: 'Monthly', city: 'Columbus', state: 'OH', name: 'Ohio Immigrant Alliance', org: 'COIA', link: 'https://ohioimmigrant.org/', desc: 'Monthly statewide actions and rapid response.', type: 'rally' },
            { date: 'Weekly', city: 'Cleveland', state: 'OH', name: 'Cleveland Immigrant Rights', org: 'InterChurch Council', link: 'https://www.interchurchcleveland.org/', desc: 'Weekly rapid response and sanctuary support.', type: 'watch' }
        ];

        // ICE-connected companies database - known nationwide contractors with source links
        const iceCompaniesDB = [
            { name: 'BI Incorporated', type: 'Ankle Monitors', notes: 'GEO Group subsidiary. Largest provider of GPS ankle monitors for ICE. Tracks ~120,000+ people daily.', phone: '(303) 218-1000', email: 'info@bi.com', hq: 'Boulder, CO', source: 'USASpending.gov', sourceLink: 'https://www.usaspending.gov/search/?hash=d8e7b8c3f8e7' },
            { name: 'Palantir Technologies', type: 'Surveillance Software', notes: '$30M+ contract for ImmigrationOS. Built ICE\'s primary case management and surveillance platform.', phone: '(720) 358-3679', email: 'media@palantir.com', hq: 'Denver, CO', source: 'The Intercept', sourceLink: 'https://theintercept.com/2017/03/02/palantir-provides-the-engine-for-donald-trumps-deportation-machine/' },
            { name: 'GEO Group', type: 'Private Prisons', notes: 'Operates 8+ ICE detention centers. $750M+ annual ICE contracts. Largest private prison company.', phone: '(561) 893-0101', email: 'info@geogroup.com', hq: 'Boca Raton, FL', source: 'ACLU', sourceLink: 'https://www.aclu.org/issues/immigrants-rights/ice-and-border-patrol-abuses/private-prison-companies' },
            { name: 'CoreCivic (CCA)', type: 'Private Prisons', notes: 'Second largest private prison company. Operates multiple ICE detention facilities across the US.', phone: '(615) 263-3000', email: 'investorrelations@corecivic.com', hq: 'Nashville, TN', source: 'Worth Rises', sourceLink: 'https://worthrises.org/theprisonindustry' },
            { name: 'Vigilant Solutions', type: 'License Plate Readers', notes: 'Now part of Motorola. Provides ALPR data to ICE. 9+ billion license plate scans accessible.', phone: '(925) 398-2079', email: 'info@vigilantsolutions.com', hq: 'Livermore, CA', source: 'EFF', sourceLink: 'https://www.eff.org/pages/automated-license-plate-readers-alpr' },
            { name: 'Flock Safety', type: 'License Plate Readers', notes: 'Provides ALPR cameras to police nationwide. Data accessible to ICE through law enforcement networks.', phone: '(404) 996-0906', email: 'hello@flocksafety.com', hq: 'Atlanta, GA', source: 'Wired', sourceLink: 'https://www.wired.com/story/flock-safety-license-plate-readers-police/' },
            { name: 'LexisNexis Risk Solutions', type: 'Data Broker', notes: 'Provides ICE with personal data lookups including addresses, phone numbers, family connections.', phone: '(866) 858-7246', email: 'risk.communications@lexisnexisrisk.com', hq: 'Alpharetta, GA', source: 'Georgetown Law', sourceLink: 'https://www.law.georgetown.edu/privacy-technology-center/publications/american-dragnet-data-driven-deportation-in-the-21st-century/' },
            { name: 'Thomson Reuters CLEAR', type: 'Data Broker', notes: 'Used by ICE for personal information lookups, tracking, and surveillance.', phone: '(800) 262-0602', email: 'media.contact@thomsonreuters.com', hq: 'New York, NY', source: 'Just Futures Law', sourceLink: 'https://justfutureslaw.org/data-driven-deportation/' },
            { name: 'Key Lime Air', type: 'Deportation Flights', notes: 'Charter airline used for ICE deportation flights. Based at Centennial Airport, CO.', phone: '(303) 768-0015', email: 'info@keylimeair.com', hq: 'Denver, CO', source: 'Documented', sourceLink: 'https://documented.net/investigations/ice-air-deportation-flights' },
            { name: 'Swift Air', type: 'Deportation Flights', notes: 'One of the largest ICE deportation charter operators. Frequent flights from detention centers.', phone: '(800) 874-6100', email: 'info@flyswiftair.com', hq: 'Phoenix, AZ', source: 'Arizona Republic', sourceLink: 'https://www.azcentral.com/story/news/politics/immigration/' },
            { name: 'Classic Air Charter', type: 'Deportation Flights', notes: 'Operates deportation flights under ICE contracts.', phone: '(305) 871-5411', email: 'charter@classicaircharter.com', hq: 'Miami, FL', source: 'Documented', sourceLink: 'https://documented.net/investigations/ice-air-deportation-flights' },
            { name: 'Management & Training Corp', type: 'Private Prisons', notes: 'Operates ICE detention centers. Known for poor conditions and medical neglect.', phone: '(801) 693-2600', email: 'info@mtctrains.com', hq: 'Centerville, UT', source: 'DHS OIG', sourceLink: 'https://www.oig.dhs.gov/reports' },
            { name: 'Securus Technologies', type: 'Prison Communications', notes: 'Provides phone/video services in ICE detention. Charges predatory rates for calls.', phone: '(800) 844-6591', email: 'csr@securustechnologies.com', hq: 'Carrollton, TX', source: 'Prison Policy Initiative', sourceLink: 'https://www.prisonpolicy.org/phones/' },
            { name: 'Global Tel*Link (GTL)', type: 'Prison Communications', notes: 'Prison phone provider with contracts in ICE detention facilities. Exploitative pricing.', phone: '(800) 489-4500', email: 'contactus@gtl.net', hq: 'Falls Church, VA', source: 'Prison Policy Initiative', sourceLink: 'https://www.prisonpolicy.org/phones/' },
            { name: 'G4S Secure Solutions', type: 'Security/Transport', notes: 'Provides security and transportation services for ICE detention facilities.', phone: '(561) 622-5656', email: 'info@g4s.com', hq: 'Jupiter, FL', source: 'Corporate Watch', sourceLink: 'https://corporatewatch.org/g4s/' },
            { name: 'Caliburn International', type: 'Detention Operations', notes: 'Operated Homestead child detention camp. Controversial facility for migrant children.', phone: '(703) 230-8800', email: 'info@caliburnintl.com', hq: 'Reston, VA', source: 'NBC News', sourceLink: 'https://www.nbcnews.com/politics/immigration/caliburn-john-kelly-homestead-migrant-children' },
            { name: 'CACI International', type: 'IT Services', notes: 'Provides IT and biometric services to ICE and DHS.', phone: '(703) 841-7800', email: 'investor@caci.com', hq: 'Reston, VA', source: 'USASpending.gov', sourceLink: 'https://www.usaspending.gov/' },
            { name: 'Deloitte', type: 'Consulting', notes: 'Consulting contracts with ICE for case management and operations systems.', phone: '(212) 492-4000', email: 'uspress@deloitte.com', hq: 'New York, NY', source: 'Tech Inquiry', sourceLink: 'https://techinquiry.org/explorer/' }
        ];

        // Online retailers and tech companies with ICE ties - boycott/pressure targets
        const iceRetailersDB = [
            { name: 'Amazon', type: 'Cloud/Tech', notes: 'AWS provides cloud infrastructure to ICE and Palantir. Ring doorbell data accessible to law enforcement. Rekognition facial recognition used by ICE.', action: 'Cancel Prime, avoid AWS', source: 'ACLU', sourceLink: 'https://www.aclu.org/issues/privacy-technology/surveillance-technologies/amazon-putting-profit-over-privacy' },
            { name: 'Microsoft', type: 'Cloud/Tech', notes: 'Azure cloud services contract with ICE worth $19.4M. Provides cloud computing to DHS.', action: 'Demand contract cancellation', source: 'The Verge', sourceLink: 'https://www.theverge.com/2018/6/19/17480912/microsoft-ice-contract-employees-protest' },
            { name: 'Google', type: 'Cloud/Tech', notes: 'Provided G Suite and cloud services to CBP. Search data can be subpoenaed.', action: 'Use privacy alternatives', source: 'The Intercept', sourceLink: 'https://theintercept.com/2019/08/13/google-employees-cbp-border-cloud/' },
            { name: 'Salesforce', type: 'Software', notes: 'CBP contract for recruiting software. Helps process border agents.', action: 'Demand contract cancellation', source: 'Gizmodo', sourceLink: 'https://gizmodo.com/salesforce-employees-protest-companys-cbp-contract-1827236121' },
            { name: 'McKinsey & Company', type: 'Consulting', notes: 'Consulted for ICE on how to cut costs - recommended reducing food and medical care for detainees.', action: 'Avoid their clients', source: 'ProPublica', sourceLink: 'https://www.propublica.org/article/mckinsey-advised-ice-on-accelerated-deportation' },
            { name: 'Wayfair', type: 'Retail', notes: 'Sold $200K of furniture to detention facility contractor BCFS for child detention centers.', action: 'Boycott', source: 'Boston Globe', sourceLink: 'https://www.bostonglobe.com/metro/2019/06/25/wayfair-workers-walk-out-over-furniture-sales-migrant-detention-centers/' },
            { name: 'Chef (Progress Software)', type: 'Software', notes: 'DevOps tools used by ICE and CBP. Employee protest led to contract review.', action: 'Avoid their products', source: 'Wired', sourceLink: 'https://www.wired.com/story/chef-not-renewing-ice-cbp-contracts/' },
            { name: 'GitHub (Microsoft)', type: 'Tech Platform', notes: 'Hosts code for ICE contractor Palantir. Employees protested Microsoft ownership.', action: 'Consider alternatives like GitLab', source: 'Ars Technica', sourceLink: 'https://arstechnica.com/tech-policy/2019/10/github-employees-demand-company-cancel-ice-contract/' },
            { name: 'Northeastern University', type: 'Education', notes: 'Accepted $2.7M from ICE for research programs.', action: 'Student/faculty pressure', source: 'The Intercept', sourceLink: 'https://theintercept.com/2019/10/22/ice-surveillance-university-research/' },
            { name: 'Johns Hopkins University', type: 'Education', notes: 'APL division has contracts with ICE and CBP for surveillance tech.', action: 'Student/faculty pressure', source: 'The Nation', sourceLink: 'https://www.thenation.com/article/archive/ice-university-contracts/' }
        ];

        // Local institutions with documented ICE cooperation by state
        const localICETiesDB = {
            'CO': [
                { name: 'Aurora GEO Detention Center', type: 'Detention', notes: 'Private prison holding ICE detainees. Multiple documented deaths and abuse allegations.', address: '3130 N Oakland St, Aurora', source: 'Denver Post', sourceLink: 'https://www.denverpost.com/tag/aurora-ice-detention-center/' },
                { name: 'Denver Sheriff Dept (formerly)', type: 'Law Enforcement', notes: 'Previously held ICE detainers. Policy changed 2019 - now refuses most ICE cooperation.', address: 'Denver County Jail', source: 'Denverite', sourceLink: 'https://denverite.com/denver-ice-cooperation/' }
            ],
            'TX': [
                { name: 'South Texas Family Residential Center', type: 'Detention', notes: 'CoreCivic-run family detention center in Dilley. Largest family detention facility.', address: 'Dilley, TX', source: 'Texas Tribune', sourceLink: 'https://www.texastribune.org/series/family-detention/' },
                { name: 'Karnes County Residential Center', type: 'Detention', notes: 'GEO Group family detention center. History of abuse allegations.', address: 'Karnes City, TX', source: 'RAICES', sourceLink: 'https://www.raicestexas.org/' },
                { name: 'Port Isabel Detention Center', type: 'Detention', notes: 'ICE processing center near border. High volume deportation flights.', address: 'Los Fresnos, TX', source: 'ACLU Texas', sourceLink: 'https://www.aclutx.org/en/issues/immigrants-rights' },
                { name: 'Harris County Sheriff', type: 'Law Enforcement', notes: '287(g) agreement active. Honors ICE detainers.', address: 'Houston, TX', source: 'Houston Chronicle', sourceLink: 'https://www.houstonchronicle.com/' }
            ],
            'CA': [
                { name: 'Adelanto ICE Processing Center', type: 'Detention', notes: 'GEO Group facility. Multiple deaths, DHS found "egregious" conditions.', address: 'Adelanto, CA', source: 'LA Times', sourceLink: 'https://www.latimes.com/california/adelanto-detention' },
                { name: 'Mesa Verde ICE Processing Center', type: 'Detention', notes: 'GEO Group facility in Bakersfield. COVID outbreak, hunger strikes documented.', address: 'Bakersfield, CA', source: 'The Guardian', sourceLink: 'https://www.theguardian.com/us-news/mesa-verde-ice-detention' },
                { name: 'Orange County Sheriff (formerly)', type: 'Law Enforcement', notes: 'Ended ICE transfers to state facilities 2018 due to California Values Act.', address: 'Orange County, CA', source: 'OC Register', sourceLink: 'https://www.ocregister.com/' }
            ],
            'AZ': [
                { name: 'Florence Service Processing Center', type: 'Detention', notes: 'CoreCivic facility. One of oldest ICE detention centers.', address: 'Florence, AZ', source: 'Arizona Republic', sourceLink: 'https://www.azcentral.com/immigration/' },
                { name: 'Eloy Detention Center', type: 'Detention', notes: 'CoreCivic facility with highest number of deaths of any ICE facility.', address: 'Eloy, AZ', source: 'The Intercept', sourceLink: 'https://theintercept.com/series/inside-ice/' },
                { name: 'Maricopa County Sheriff', type: 'Law Enforcement', notes: 'Long history of ICE cooperation. 287(g) agreement. Arpaio legacy.', address: 'Phoenix, AZ', source: 'ACLU Arizona', sourceLink: 'https://www.acluaz.org/' }
            ],
            'GA': [
                { name: 'Stewart Detention Center', type: 'Detention', notes: 'CoreCivic facility. Remote location, limited legal access. Multiple deaths.', address: 'Lumpkin, GA', source: 'SPLC', sourceLink: 'https://www.splcenter.org/stewart-detention-center' },
                { name: 'Irwin County Detention Center', type: 'Detention', notes: 'LaSalle Corrections. Whistleblower revealed forced hysterectomies.', address: 'Ocilla, GA', source: 'NPR', sourceLink: 'https://www.npr.org/2020/09/16/913398383/whistleblower-alleges-medical-neglect-hysterectomies-at-ice-detention-center' },
                { name: 'Cobb County Sheriff', type: 'Law Enforcement', notes: '287(g) agreement active. Honors ICE detainers.', address: 'Marietta, GA', source: 'AJC', sourceLink: 'https://www.ajc.com/' }
            ],
            'NJ': [
                { name: 'Elizabeth Contract Detention Facility', type: 'Detention', notes: 'CoreCivic facility. Near NYC, receives many tri-state detainees.', address: 'Elizabeth, NJ', source: 'NJ.com', sourceLink: 'https://www.nj.com/immigration/' },
                { name: 'Bergen County Jail', type: 'Detention', notes: 'County jail with ICE contract. Local organizing ended contract 2020.', address: 'Hackensack, NJ', source: 'NJ Spotlight', sourceLink: 'https://www.njspotlightnews.org/' },
                { name: 'Hudson County Jail', type: 'Detention', notes: 'ICE contract ended 2021 after sustained organizing pressure.', address: 'Kearny, NJ', source: 'ACLU NJ', sourceLink: 'https://www.aclu-nj.org/' }
            ],
            'WA': [
                { name: 'Northwest ICE Processing Center', type: 'Detention', notes: 'GEO Group facility in Tacoma. Regular protests, hunger strikes documented.', address: 'Tacoma, WA', source: 'Seattle Times', sourceLink: 'https://www.seattletimes.com/seattle-news/immigration/' },
                { name: 'King County (ended)', type: 'Law Enforcement', notes: 'Ended ICE cooperation 2018. No longer honors detainers.', address: 'Seattle, WA', source: 'Crosscut', sourceLink: 'https://crosscut.com/' }
            ],
            'FL': [
                { name: 'Krome Service Processing Center', type: 'Detention', notes: 'ICE-owned facility near Miami. Long history, major processing center.', address: 'Miami, FL', source: 'Miami Herald', sourceLink: 'https://www.miamiherald.com/immigration/' },
                { name: 'Broward Transitional Center', type: 'Detention', notes: 'GEO Group facility. Holds detainees pending deportation.', address: 'Pompano Beach, FL', source: 'Sun Sentinel', sourceLink: 'https://www.sun-sentinel.com/' },
                { name: 'Glades County Detention Center', type: 'Detention', notes: 'County jail with ICE contract in rural area. Limited legal access.', address: 'Moore Haven, FL', source: 'ACLU Florida', sourceLink: 'https://www.aclufl.org/' }
            ],
            'LA': [
                { name: 'LaSalle ICE Processing Center', type: 'Detention', notes: 'GEO Group facility. Major detention hub for Louisiana.', address: 'Jena, LA', source: 'NOLA.com', sourceLink: 'https://www.nola.com/news/immigration/' },
                { name: 'River Correctional Center', type: 'Detention', notes: 'LaSalle Corrections facility with ICE contract.', address: 'Ferriday, LA', source: 'The Advocate', sourceLink: 'https://www.theadvocate.com/' }
            ],
            'PA': [
                { name: 'Pike County Correctional Facility', type: 'Detention', notes: 'County jail with ICE contract. Remote northeastern PA location.', address: 'Lords Valley, PA', source: 'Philadelphia Inquirer', sourceLink: 'https://www.inquirer.com/news/immigration/' },
                { name: 'Berks Family Residential Center', type: 'Detention', notes: 'Family detention facility run by Berks County. Holds mothers and children.', address: 'Leesport, PA', source: 'WHYY', sourceLink: 'https://whyy.org/' }
            ]
        };

        // Local news by state - ICE-related news with sources and links
        const localNewsDB = {
            'CA': [
                { date: 'Jan 2025', headline: 'California AG warns ICE cannot enforce in sensitive locations', source: 'LA Times', link: 'https://www.latimes.com/california', type: 'news' },
                { date: 'Jan 2025', headline: 'Los Angeles schools reaffirm sanctuary policy, train staff', source: 'KQED', link: 'https://www.kqed.org/news', type: 'news' },
                { date: 'Jan 2025', headline: 'ICE activity reported near Oakland courthouses', source: 'SF Chronicle', link: 'https://www.sfchronicle.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'San Diego rapid response teams activate amid border enforcement surge', source: 'San Diego Union-Tribune', link: 'https://www.sandiegouniontribune.com/', type: 'action' },
                { date: 'Dec 2024', headline: 'California passes new sanctuary protections for healthcare facilities', source: 'CalMatters', link: 'https://calmatters.org/', type: 'news' }
            ],
            'TX': [
                { date: 'Jan 2025', headline: 'Houston ICE raids target residential neighborhoods', source: 'Houston Chronicle', link: 'https://www.houstonchronicle.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Austin city council reaffirms immigrant protections despite state law', source: 'Austin American-Statesman', link: 'https://www.statesman.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Dallas immigrant rights groups report increased ICE presence', source: 'Dallas Morning News', link: 'https://www.dallasnews.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'RAICES Texas expands legal defense fund for mass deportations', source: 'Texas Tribune', link: 'https://www.texastribune.org/', type: 'action' },
                { date: 'Dec 2024', headline: 'San Antonio community prepares rapid response networks', source: 'San Antonio Express-News', link: 'https://www.expressnews.com/', type: 'action' }
            ],
            'NY': [
                { date: 'Jan 2025', headline: 'NYC Mayor announces expanded immigrant legal services', source: 'NY Times', link: 'https://www.nytimes.com/section/nyregion', type: 'news' },
                { date: 'Jan 2025', headline: 'ICE agents seen in Queens and Brooklyn neighborhoods', source: 'Gothamist', link: 'https://gothamist.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'New York schools refuse to cooperate with ICE', source: 'NY Daily News', link: 'https://www.nydailynews.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Long Island community groups launch Know Your Rights campaign', source: 'Newsday', link: 'https://www.newsday.com/', type: 'action' },
                { date: 'Dec 2024', headline: 'Governor Hochul pledges state resources to protect immigrants', source: 'NY Post', link: 'https://nypost.com/', type: 'news' }
            ],
            'IL': [
                { date: 'Jan 2025', headline: 'Chicago ICE raids: Agents impersonate utility workers', source: 'Chicago Tribune', link: 'https://www.chicagotribune.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Illinois Governor activates immigrant protection task force', source: 'Chicago Sun-Times', link: 'https://chicago.suntimes.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'ICIRR rapid response teams mobilize across Chicagoland', source: 'Block Club Chicago', link: 'https://blockclubchicago.org/', type: 'action' },
                { date: 'Jan 2025', headline: 'Cook County Sheriff refuses ICE detainer requests', source: 'WGN', link: 'https://wgntv.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'Chicago churches open doors as sanctuary spaces', source: 'WBEZ', link: 'https://www.wbez.org/', type: 'action' }
            ],
            'CO': [
                // Boulder Coverage
                { date: 'Jan 27, 2025', headline: 'Boulder County declares itself sanctuary county, refuses all ICE cooperation', source: 'Daily Camera', link: 'https://www.dailycamera.com/', type: 'news' },
                { date: 'Jan 26, 2025', headline: 'Boulder Valley School District trains teachers on ICE response protocols', source: 'Boulder Weekly', link: 'https://www.boulderweekly.com/', type: 'news' },
                { date: 'Jan 25, 2025', headline: 'CU Boulder students organize immigrant defense network', source: 'CU Independent', link: 'https://cuindependent.com/', type: 'action' },
                { date: 'Jan 24, 2025', headline: 'Boulder community launches rapid response text alert system', source: 'Daily Camera', link: 'https://www.dailycamera.com/', type: 'action' },
                { date: 'Jan 23, 2025', headline: 'Longmont immigrant community holds Know Your Rights training', source: 'Longmont Times-Call', link: 'https://www.timescall.com/', type: 'action' },
                { date: 'Jan 20, 2025', headline: 'Boulder County Commissioners vote to restrict police-ICE data sharing', source: 'Colorado Politics', link: 'https://www.coloradopolitics.com/', type: 'news' },
                { date: 'Jan 18, 2025', headline: 'Lafayette and Louisville join Boulder in sanctuary resolution', source: 'Daily Camera', link: 'https://www.dailycamera.com/', type: 'news' },
                // Denver/Aurora Coverage
                { date: 'Jan 27, 2025', headline: 'Aurora GEO detention center protest draws 500+ amid deportation fears', source: 'Denver Post', link: 'https://www.denverpost.com/', type: 'action' },
                { date: 'Jan 26, 2025', headline: 'ICE vehicles spotted near Denver courthouse, rapid response activated', source: 'Denverite', link: 'https://denverite.com/', type: 'alert' },
                { date: 'Jan 25, 2025', headline: 'Denver Public Schools superintendent reaffirms no ICE on school grounds', source: 'Chalkbeat Colorado', link: 'https://co.chalkbeat.org/', type: 'news' },
                { date: 'Jan 24, 2025', headline: 'Colorado Immigrant Rights Coalition expands legal defense fund', source: 'Colorado Sun', link: 'https://coloradosun.com/', type: 'action' },
                { date: 'Jan 23, 2025', headline: 'Denver Mayor Mike Johnston pledges city resources for immigrant defense', source: '9News', link: 'https://www.9news.com/', type: 'news' },
                { date: 'Jan 22, 2025', headline: 'Aurora immigrant community holds emergency preparedness meeting', source: 'Aurora Sentinel', link: 'https://sentinelcolorado.com/', type: 'action' },
                { date: 'Jan 21, 2025', headline: 'Denver Sheriff refuses ICE detainer requests, cites state law', source: 'Westword', link: 'https://www.westword.com/', type: 'news' },
                { date: 'Jan 20, 2025', headline: 'Governor Polis activates immigrant protection task force', source: 'Colorado Sun', link: 'https://coloradosun.com/', type: 'news' },
                { date: 'Jan 19, 2025', headline: 'RMIAN opens additional legal clinic in Denver metro', source: 'CPR News', link: 'https://www.cpr.org/', type: 'action' },
                { date: 'Jan 18, 2025', headline: 'Denver churches join sanctuary network, offer safe spaces', source: 'Denver Catholic', link: 'https://denvercatholic.org/', type: 'action' },
                // Statewide Coverage
                { date: 'Jan 17, 2025', headline: 'Colorado AG Phil Weiser issues guidance: ICE cannot enter sensitive locations', source: 'Colorado Politics', link: 'https://www.coloradopolitics.com/', type: 'news' },
                { date: 'Jan 15, 2025', headline: 'Fort Collins immigrant community launches defense fund', source: 'Coloradoan', link: 'https://www.coloradoan.com/', type: 'action' },
                { date: 'Jan 12, 2025', headline: 'Colorado Springs immigrant rights groups train 200+ rapid responders', source: 'Colorado Springs Gazette', link: 'https://gazette.com/', type: 'action' },
                { date: 'Jan 10, 2025', headline: 'Greeley immigrant workers prepare for potential workplace raids', source: 'Greeley Tribune', link: 'https://www.greeleytribune.com/', type: 'alert' },
                { date: 'Jan 8, 2025', headline: 'Pueblo County considers sanctuary resolution', source: 'Pueblo Chieftain', link: 'https://www.chieftain.com/', type: 'news' },
                { date: 'Dec 28, 2024', headline: 'Colorado immigrant hotline receives record calls amid enforcement fears', source: 'Denver Post', link: 'https://www.denverpost.com/', type: 'alert' },
                { date: 'Dec 20, 2024', headline: 'Aurora detention center conditions documented in new report', source: 'ACLU Colorado', link: 'https://aclu-co.org/', type: 'alert' },
                { date: 'Dec 15, 2024', headline: 'Colorado healthcare facilities affirm no ICE cooperation policy', source: 'Colorado Sun', link: 'https://coloradosun.com/', type: 'news' }
            ],
            'FL': [
                { date: 'Jan 2025', headline: 'Miami ICE operations increase near Krome detention center', source: 'Miami Herald', link: 'https://www.miamiherald.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Florida immigrant communities prepare for enforcement surge', source: 'Tampa Bay Times', link: 'https://www.tampabay.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Orlando faith leaders declare sanctuary congregations', source: 'Orlando Sentinel', link: 'https://www.orlandosentinel.com/', type: 'action' },
                { date: 'Jan 2025', headline: 'South Florida legal groups expand free immigration clinics', source: 'Sun Sentinel', link: 'https://www.sun-sentinel.com/', type: 'action' },
                { date: 'Dec 2024', headline: 'Jacksonville immigrant rights groups train rapid responders', source: 'Florida Times-Union', link: 'https://www.jacksonville.com/', type: 'action' }
            ],
            'AZ': [
                { date: 'Jan 2025', headline: 'Phoenix ICE activity increases in residential areas', source: 'Arizona Republic', link: 'https://www.azcentral.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Puente Arizona mobilizes community defense networks', source: 'Phoenix New Times', link: 'https://www.phoenixnewtimes.com/', type: 'action' },
                { date: 'Jan 2025', headline: 'Tucson maintains sanctuary city status despite pressure', source: 'Arizona Daily Star', link: 'https://tucson.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Border communities report increased enforcement activity', source: 'KJZZ', link: 'https://kjzz.org/', type: 'alert' },
                { date: 'Dec 2024', headline: 'No More Deaths expands desert aid operations', source: 'Tucson Sentinel', link: 'https://www.tucsonsentinel.com/', type: 'action' }
            ],
            'WA': [
                { date: 'Jan 2025', headline: 'Washington Governor inslee strengthens sanctuary protections', source: 'Seattle Times', link: 'https://www.seattletimes.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Tacoma detention center protests continue weekly', source: 'The Stranger', link: 'https://www.thestranger.com/', type: 'action' },
                { date: 'Jan 2025', headline: 'Seattle schools declare ICE-free zones', source: 'KUOW', link: 'https://www.kuow.org/', type: 'news' },
                { date: 'Jan 2025', headline: 'King County ends all ICE cooperation agreements', source: 'Crosscut', link: 'https://crosscut.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'Northwest Immigrant Rights Project expands services', source: 'PubliCola', link: 'https://publicola.com/', type: 'action' }
            ],
            'MA': [
                { date: 'Jan 2025', headline: 'Massachusetts AG issues ICE guidance to local police', source: 'Boston Globe', link: 'https://www.bostonglobe.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'ICE courthouse arrests continue despite policy', source: 'WBUR', link: 'https://www.wbur.org/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Boston launches immigrant legal defense fund', source: 'GBH News', link: 'https://www.wgbh.org/news', type: 'action' },
                { date: 'Jan 2025', headline: 'Cambridge expands sanctuary city protections', source: 'Cambridge Day', link: 'https://www.cambridgeday.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'MIRA Coalition trains 500+ rapid responders', source: 'MassLive', link: 'https://www.masslive.com/', type: 'action' }
            ],
            'GA': [
                { date: 'Jan 2025', headline: 'Atlanta ICE operations target immigrant neighborhoods', source: 'Atlanta Journal-Constitution', link: 'https://www.ajc.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Georgia immigrant rights groups activate rapid response', source: 'Georgia Public Broadcasting', link: 'https://www.gpb.org/', type: 'action' },
                { date: 'Jan 2025', headline: 'Stewart Detention Center conditions worsen amid crowding', source: 'Atlanta Magazine', link: 'https://www.atlantamagazine.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Atlanta city council considers expanded protections', source: 'Saporta Report', link: 'https://saportareport.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'GLAHR launches statewide know your rights campaign', source: 'Mundo Hispanico', link: 'https://mundohispanico.com/', type: 'action' }
            ],
            'MN': [
                { date: 'Jan 2025', headline: 'Minnesota Governor Walz pledges immigrant protections', source: 'Star Tribune', link: 'https://www.startribune.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Minneapolis rapid response network activated', source: 'MPR News', link: 'https://www.mprnews.org/', type: 'action' },
                { date: 'Jan 2025', headline: 'Hennepin County ends ICE jail contracts', source: 'MinnPost', link: 'https://www.minnpost.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'St. Paul schools reaffirm sanctuary status', source: 'Pioneer Press', link: 'https://www.twincities.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'Navigate MN expands immigrant defense hotline', source: 'Sahan Journal', link: 'https://sahanjournal.com/', type: 'action' }
            ],
            'OR': [
                { date: 'Jan 2025', headline: 'Oregon sanctuary law faces federal challenge', source: 'The Oregonian', link: 'https://www.oregonlive.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Portland ICE facility protests enter third year', source: 'Portland Mercury', link: 'https://www.portlandmercury.com/', type: 'action' },
                { date: 'Jan 2025', headline: 'Multnomah County strengthens immigration protections', source: 'Willamette Week', link: 'https://www.wweek.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Oregon immigrant groups prepare for enforcement surge', source: 'OPB', link: 'https://www.opb.org/', type: 'action' },
                { date: 'Dec 2024', headline: 'Causa Oregon trains community rapid responders', source: 'Salem Reporter', link: 'https://www.salemreporter.com/', type: 'action' }
            ],
            'NJ': [
                { date: 'Jan 2025', headline: 'New Jersey AG limits local police ICE cooperation', source: 'NJ.com', link: 'https://www.nj.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Newark ICE operations target Essex County', source: 'Newark Star-Ledger', link: 'https://www.nj.com/essex/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Elizabeth detention center conditions under scrutiny', source: 'NJ Spotlight News', link: 'https://www.njspotlightnews.org/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Make the Road NJ expands rapid response teams', source: 'Jersey City Times', link: 'https://www.jerseycitytimes.com/', type: 'action' },
                { date: 'Dec 2024', headline: 'Camden and Trenton reaffirm sanctuary policies', source: 'WHYY', link: 'https://whyy.org/', type: 'news' }
            ],
            'PA': [
                { date: 'Jan 2025', headline: 'Philadelphia maintains sanctuary city stance', source: 'Philadelphia Inquirer', link: 'https://www.inquirer.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'ICE activity reported in Montgomery County', source: 'WHYY', link: 'https://whyy.org/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Juntos rapid response network activated citywide', source: 'Billy Penn', link: 'https://billypenn.com/', type: 'action' },
                { date: 'Jan 2025', headline: 'Pittsburgh declares expanded immigrant protections', source: 'Pittsburgh Post-Gazette', link: 'https://www.post-gazette.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'New Sanctuary Movement expands accompaniment program', source: 'Philadelphia Weekly', link: 'https://www.philadelphiaweekly.com/', type: 'action' }
            ],
            'NC': [
                { date: 'Jan 2025', headline: 'Charlotte sheriff ends controversial 287(g) program', source: 'Charlotte Observer', link: 'https://www.charlotteobserver.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'ICE operations reported in Wake County', source: 'News & Observer', link: 'https://www.newsobserver.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Triangle immigrant groups launch defense fund', source: 'WRAL', link: 'https://www.wral.com/', type: 'action' },
                { date: 'Jan 2025', headline: 'Durham reaffirms welcoming city policies', source: 'Indy Week', link: 'https://indyweek.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'El Pueblo expands know your rights training statewide', source: 'Carolina Public Press', link: 'https://carolinapublicpress.org/', type: 'action' }
            ],
            'MI': [
                { date: 'Jan 2025', headline: 'Michigan Governor Whitmer opposes ICE raids', source: 'Detroit Free Press', link: 'https://www.freep.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'ICE activity reported in Dearborn area', source: 'Detroit News', link: 'https://www.detroitnews.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Michigan United activates statewide rapid response', source: 'Michigan Radio', link: 'https://www.michiganradio.org/', type: 'action' },
                { date: 'Jan 2025', headline: 'Ann Arbor expands sanctuary city protections', source: 'MLive', link: 'https://www.mlive.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'Grand Rapids immigrant community prepares defenses', source: 'Bridge Michigan', link: 'https://www.bridgemi.com/', type: 'action' }
            ],
            'OH': [
                { date: 'Jan 2025', headline: 'Columbus immigrant community on high alert', source: 'Columbus Dispatch', link: 'https://www.dispatch.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Cleveland faith leaders declare sanctuary congregations', source: 'Cleveland Plain Dealer', link: 'https://www.cleveland.com/', type: 'action' },
                { date: 'Jan 2025', headline: 'Ohio Immigrant Alliance mobilizes statewide', source: 'Cincinnati Enquirer', link: 'https://www.cincinnati.com/', type: 'action' },
                { date: 'Jan 2025', headline: 'Franklin County limits ICE cooperation', source: 'Ohio Capital Journal', link: 'https://ohiocapitaljournal.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'Dayton immigrant rights groups expand services', source: 'Dayton Daily News', link: 'https://www.daytondailynews.com/', type: 'action' }
            ],
            'VA': [
                { date: 'Jan 2025', headline: 'Virginia Governor responds to ICE enforcement surge', source: 'Virginia Mercury', link: 'https://www.virginiamercury.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Fairfax County ends ICE jail cooperation', source: 'Washington Post', link: 'https://www.washingtonpost.com/local/virginia/', type: 'news' },
                { date: 'Jan 2025', headline: 'Arlington schools reaffirm immigrant protections', source: 'ARLnow', link: 'https://www.arlnow.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'CASA Virginia expands rapid response in NoVA', source: 'Tysons Reporter', link: 'https://www.tysonsreporter.com/', type: 'action' },
                { date: 'Dec 2024', headline: 'Richmond immigrant community prepares defenses', source: 'Richmond Times-Dispatch', link: 'https://richmond.com/', type: 'action' }
            ],
            'MD': [
                { date: 'Jan 2025', headline: 'Maryland Governor Moore opposes ICE operations', source: 'Baltimore Sun', link: 'https://www.baltimoresun.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Montgomery County strengthens sanctuary policies', source: 'Bethesda Magazine', link: 'https://bethesdamagazine.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'CASA Maryland activates rapid response teams', source: 'Maryland Matters', link: 'https://www.marylandmatters.org/', type: 'action' },
                { date: 'Jan 2025', headline: 'Prince George\'s County limits police-ICE cooperation', source: 'Washington Informer', link: 'https://www.washingtoninformer.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'Baltimore immigrant defense fund launches', source: 'Baltimore Brew', link: 'https://www.baltimorebrew.com/', type: 'action' }
            ],
            'DC': [
                { date: 'Jan 2025', headline: 'DC Council expands immigrant legal services funding', source: 'Washington Post', link: 'https://www.washingtonpost.com/local/dc-politics/', type: 'news' },
                { date: 'Jan 2025', headline: 'ICE operations reported near courthouses', source: 'DCist', link: 'https://dcist.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Sanctuary DMV coalition mobilizes rapid response', source: 'Washington City Paper', link: 'https://washingtoncitypaper.com/', type: 'action' },
                { date: 'Jan 2025', headline: 'DC schools maintain strict anti-ICE cooperation', source: 'WAMU', link: 'https://wamu.org/', type: 'news' },
                { date: 'Dec 2024', headline: 'Many Languages One Voice expands outreach', source: 'Street Sense Media', link: 'https://www.streetsensemedia.org/', type: 'action' }
            ],
            'UT': [
                { date: 'Jan 2025', headline: 'Salt Lake City maintains welcoming policies', source: 'Salt Lake Tribune', link: 'https://www.sltrib.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'Utah immigrant community prepares for enforcement', source: 'Deseret News', link: 'https://www.deseret.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Comunidades Unidas expands know your rights', source: 'KUER', link: 'https://www.kuer.org/', type: 'action' },
                { date: 'Jan 2025', headline: 'Salt Lake County limits ICE cooperation', source: 'Utah Policy', link: 'https://utahpolicy.com/', type: 'news' },
                { date: 'Dec 2024', headline: 'Utah faith leaders organize sanctuary network', source: 'KUTV', link: 'https://kutv.com/', type: 'action' }
            ],
            'NV': [
                { date: 'Jan 2025', headline: 'Las Vegas immigrant community on alert', source: 'Las Vegas Review-Journal', link: 'https://www.reviewjournal.com/', type: 'alert' },
                { date: 'Jan 2025', headline: 'Clark County limits police-ICE cooperation', source: 'Nevada Independent', link: 'https://thenevadaindependent.com/', type: 'news' },
                { date: 'Jan 2025', headline: 'PLAN Action expands rapid response in Vegas', source: 'Las Vegas Sun', link: 'https://lasvegassun.com/', type: 'action' },
                { date: 'Jan 2025', headline: 'Reno immigrant groups prepare defense networks', source: 'Reno Gazette Journal', link: 'https://www.rgj.com/', type: 'action' },
                { date: 'Dec 2024', headline: 'Nevada legal aid groups expand free services', source: 'Nevada Current', link: 'https://www.nevadacurrent.com/', type: 'action' }
            ]
        };

        // Local immigrant rights organizations by state - for Take Action page
        const localOrgsDB = {
            'CO': [
                { name: 'Colorado Immigrant Rights Coalition (CIRC)', phone: '(303) 922-3344', email: 'info@coloradoimmigrant.org', website: 'https://coloradoimmigrant.org/', desc: 'Statewide coalition. Rapid response, advocacy, Know Your Rights.' },
                { name: 'Rocky Mountain Immigrant Advocacy Network (RMIAN)', phone: '(303) 433-2812', email: 'info@rmian.org', website: 'https://rmian.org/', desc: 'Free legal services for immigrants in detention and children.' },
                { name: 'Metro Denver Sanctuary Coalition', phone: null, email: 'metrodenversanctuary@gmail.com', website: 'https://www.facebook.com/MetroDenverSanctuary/', desc: 'Faith-based sanctuary network in Denver metro.' },
                { name: 'American Friends Service Committee - Colorado', phone: '(303) 832-4508', email: 'afsccolorado@afsc.org', website: 'https://www.afsc.org/office/denver-co', desc: 'Immigrant rights, rapid response training, community organizing.' },
                { name: 'Boulder County Sanctuary Coalition', phone: null, email: 'bouldercountysanctuary@gmail.com', website: null, desc: 'Boulder-area immigrant defense and rapid response.' }
            ],
            'CA': [
                { name: 'CHIRLA (Coalition for Humane Immigrant Rights)', phone: '(213) 353-1333', email: 'info@chirla.org', website: 'https://www.chirla.org/', desc: 'LA-based. Largest immigrant rights org in CA. Rapid response, legal, advocacy.' },
                { name: 'SFILEN (SF Immigrant Legal & Education Network)', phone: '(415) 282-3334', email: 'info@sfilen.org', website: 'https://sfilen.org/', desc: 'Bay Area rapid response, legal services, community defense.' },
                { name: 'California Immigrant Policy Center', phone: '(213) 250-0880', email: 'info@caimmigrant.org', website: 'https://caimmigrant.org/', desc: 'Statewide policy advocacy and immigrant rights.' },
                { name: 'Border Angels', phone: '(619) 487-0249', email: 'info@borderangels.org', website: 'https://www.borderangels.org/', desc: 'San Diego/border region. Humanitarian aid, advocacy.' },
                { name: 'Immigrant Legal Resource Center (ILRC)', phone: '(415) 255-9499', email: 'info@ilrc.org', website: 'https://www.ilrc.org/', desc: 'National org based in SF. Legal resources, training, advocacy.' }
            ],
            'TX': [
                { name: 'RAICES Texas', phone: '(800) 354-2448', email: 'info@raicestexas.org', website: 'https://www.raicestexas.org/', desc: 'Largest immigration legal services in TX. Bond fund, family reunification.' },
                { name: 'FIEL Houston', phone: '(713) 272-8822', email: 'info@fielhouston.org', website: 'https://www.fielhouston.org/', desc: 'Houston area. Rapid response, legal, community organizing.' },
                { name: 'Workers Defense Project', phone: '(512) 391-2305', email: 'info@workersdefense.org', website: 'https://www.workersdefense.org/', desc: 'Austin-based. Worker rights, immigrant defense, construction worker focus.' },
                { name: 'South Texas Human Rights Center', phone: '(956) 278-8870', email: 'info@southtexashumanrights.org', website: 'https://www.southtexashumanrights.org/', desc: 'Border region humanitarian aid and missing migrant support.' }
            ],
            'NY': [
                { name: 'Make the Road New York', phone: '(718) 418-7690', email: 'info@maketheroadny.org', website: 'https://maketheroadny.org/', desc: 'NYC area. Community organizing, legal services, rapid response.' },
                { name: 'New York Immigration Coalition (NYIC)', phone: '(212) 627-2227', email: 'info@nyic.org', website: 'https://www.nyic.org/', desc: 'Statewide coalition. Policy advocacy, community defense.' },
                { name: 'Immigrant Defense Project', phone: '(212) 725-6422', email: 'info@immdefense.org', website: 'https://www.immdefense.org/', desc: 'Legal resources, ICE raid toolkit, know your rights.' },
                { name: 'Catholic Charities Immigration Services', phone: '(212) 419-3700', email: null, website: 'https://catholiccharitiesny.org/', desc: 'Legal services, family support, refugee resettlement.' }
            ],
            'IL': [
                { name: 'Illinois Coalition for Immigrant and Refugee Rights (ICIRR)', phone: '(312) 332-7360', email: 'info@icirr.org', website: 'https://www.icirr.org/', desc: 'Statewide coalition. Rapid response network, legal, advocacy.' },
                { name: 'National Immigrant Justice Center', phone: '(312) 660-1370', email: 'policy@heartlandalliance.org', website: 'https://www.immigrantjustice.org/', desc: 'Legal services, detention visits, policy advocacy.' },
                { name: 'Organized Communities Against Deportations (OCAD)', phone: null, email: 'ocaboraciones@gmail.com', website: 'https://www.facebook.com/organizedcommunities/', desc: 'Chicago grassroots. Direct action, rapid response.' }
            ],
            'AZ': [
                { name: 'Puente Arizona', phone: '(602) 730-5705', email: 'info@puenteaz.org', website: 'https://puenteaz.org/', desc: 'Phoenix area. Grassroots organizing, rapid response, direct action.' },
                { name: 'No More Deaths / No M√°s Muertes', phone: '(520) 333-4515', email: 'info@nomoredeaths.org', website: 'https://nomoredeaths.org/', desc: 'Tucson area. Desert aid, humanitarian assistance, witness.' },
                { name: 'Florence Immigrant & Refugee Rights Project', phone: '(520) 868-0191', email: 'firrp@firrp.org', website: 'https://firrp.org/', desc: 'Free legal services for detained immigrants in AZ.' }
            ],
            'WA': [
                { name: 'Northwest Immigrant Rights Project (NWIRP)', phone: '(206) 587-4009', email: 'info@nwirp.org', website: 'https://www.nwirp.org/', desc: 'Legal services, advocacy, community education statewide.' },
                { name: 'La Resistencia', phone: null, email: 'info@laresistenciawa.org', website: 'https://www.laresistenciaseattle.org/', desc: 'Tacoma detention center advocacy, vigils, rapid response.' },
                { name: 'OneAmerica', phone: '(206) 723-2203', email: 'info@weareoneamerica.org', website: 'https://weareoneamerica.org/', desc: 'Immigrant rights, civic engagement, community organizing.' }
            ],
            'FL': [
                { name: 'Florida Immigrant Coalition (FLIC)', phone: '(305) 571-7254', email: 'info@floridaimmigrant.org', website: 'https://floridaimmigrant.org/', desc: 'Statewide coalition. Rapid response, advocacy, organizing.' },
                { name: 'Americans for Immigrant Justice', phone: '(305) 573-1106', email: 'info@aijustice.org', website: 'https://aijustice.org/', desc: 'Miami-based legal services and advocacy.' },
                { name: 'Hope CommUnity Center', phone: '(407) 880-4673', email: 'info@hfrn.org', website: 'https://www.hfrn.org/', desc: 'Central FL. Community organizing, legal, family support.' }
            ],
            'GA': [
                { name: 'Georgia Latino Alliance for Human Rights (GLAHR)', phone: '(404) 694-9400', email: 'info@glfrustration.org', website: 'https://glfrustration.org/', desc: 'Atlanta-based. Grassroots organizing, rapid response, advocacy.' },
                { name: 'Proyecto Vidas', phone: '(678) 782-9088', email: 'info@proyectovidas.org', website: 'https://proyectovidas.org/', desc: 'Legal services, family support, community education.' }
            ],
            'MN': [
                { name: 'Navigate MN', phone: '(612) 424-2469', email: 'info@navigatemn.org', website: 'https://navigatemn.org/', desc: 'Statewide rapid response network, legal referrals, community defense.' },
                { name: 'ISAIAH', phone: '(651) 292-1144', email: 'info@isaiahmn.org', website: 'https://isaiahmn.org/', desc: 'Faith-based organizing, sanctuary support, advocacy.' },
                { name: 'Immigrant Law Center of Minnesota', phone: '(651) 641-1011', email: 'info@ilcm.org', website: 'https://www.ilcm.org/', desc: 'Free legal services for low-income immigrants.' }
            ],
            'OR': [
                { name: 'Causa Oregon', phone: '(503) 363-4714', email: 'info@causaoregon.org', website: 'https://causaoregon.org/', desc: 'Statewide. Grassroots organizing, rapid response, civic engagement.' },
                { name: 'Pueblo Unido PDX', phone: null, email: 'info@pueblounidopdx.org', website: 'https://www.pueblounidopdx.org/', desc: 'Portland area. Legal support, community defense, advocacy.' },
                { name: 'Innovation Law Lab', phone: '(503) 922-3042', email: 'info@innovationlawlab.org', website: 'https://innovationlawlab.org/', desc: 'Legal innovation, asylum support, immigrant rights.' }
            ],
            'NJ': [
                { name: 'Make the Road New Jersey', phone: '(908) 469-4470', email: 'info@maketheroadnj.org', website: 'https://www.maketheroadnj.org/', desc: 'Community organizing, rapid response, workers rights.' },
                { name: 'First Friends of NJ and NY', phone: '(908) 965-0455', email: 'info@firstfriendsnjny.org', website: 'https://firstfriendsnjny.org/', desc: 'Detention visitation, accompaniment, support for detained.' },
                { name: 'American Friends Service Committee - NJ', phone: '(973) 643-1924', email: 'afscnewark@afsc.org', website: 'https://www.afsc.org/office/newark-nj', desc: 'Immigrant rights, rapid response, community organizing.' }
            ],
            'MA': [
                { name: 'MIRA Coalition', phone: '(617) 350-5480', email: 'info@miracoalition.org', website: 'https://www.miracoalition.org/', desc: 'Statewide coalition. Rapid response, advocacy, legal referrals.' },
                { name: 'Centro Presente', phone: '(617) 497-9080', email: 'info@cpresente.org', website: 'https://www.cpresente.org/', desc: 'Boston area. Organizing, legal services, community defense.' },
                { name: 'Political Asylum/Immigration Representation (PAIR) Project', phone: '(617) 742-9296', email: 'info@pairproject.org', website: 'https://www.pairproject.org/', desc: 'Free legal services for asylum seekers.' }
            ],
            'NC': [
                { name: 'El Pueblo', phone: '(919) 835-1525', email: 'info@elpueblo.org', website: 'https://elpueblo.org/', desc: 'Statewide. Advocacy, community organizing, rapid response.' },
                { name: 'Alerta Migratoria NC', phone: null, email: 'alertamigratoria@gmail.com', website: 'https://alertamigratoria.org/', desc: 'Triangle area rapid response and immigrant defense.' }
            ],
            'PA': [
                { name: 'Juntos', phone: '(215) 634-2567', email: 'info@vamosjuntos.org', website: 'https://vamosjuntos.org/', desc: 'Philadelphia. Rapid response, community organizing, legal support.' },
                { name: 'New Sanctuary Movement of Philadelphia', phone: '(215) 232-1440', email: 'info@sanctuaryphiladelphia.org', website: 'https://sanctuaryphiladelphia.org/', desc: 'Accompaniment, sanctuary support, community defense.' },
                { name: 'HIAS Pennsylvania', phone: '(215) 832-0900', email: 'info@hiaspa.org', website: 'https://hiaspa.org/', desc: 'Legal services, refugee resettlement, immigrant support.' }
            ],
            'MI': [
                { name: 'Michigan United', phone: '(313) 583-6920', email: 'info@miunited.org', website: 'https://www.miunited.org/', desc: 'Statewide. Community organizing, rapid response, advocacy.' },
                { name: 'Michigan Immigrant Rights Center', phone: '(734) 239-6863', email: 'info@michiganimmigrant.org', website: 'https://michiganimmigrant.org/', desc: 'Legal services, advocacy, education statewide.' }
            ],
            'OH': [
                { name: 'Ohio Immigrant Alliance', phone: '(614) 224-8650', email: 'info@ohioimmigrant.org', website: 'https://ohioimmigrant.org/', desc: 'Statewide coalition. Advocacy, rapid response, organizing.' },
                { name: 'Advocates for Basic Legal Equality (ABLE)', phone: '(419) 255-0814', email: null, website: 'https://www.ablelaw.org/', desc: 'Legal services for low-income immigrants in OH.' }
            ],
            'VA': [
                { name: 'CASA Virginia', phone: '(703) 778-7040', email: 'info@wearecasa.org', website: 'https://wearecasa.org/', desc: 'NoVA area. Community organizing, legal, rapid response.' },
                { name: 'Legal Aid Justice Center', phone: '(434) 977-0553', email: null, website: 'https://www.justice4all.org/', desc: 'Legal services for immigrants throughout VA.' }
            ],
            'MD': [
                { name: 'CASA Maryland', phone: '(301) 431-4185', email: 'info@wearecasa.org', website: 'https://wearecasa.org/', desc: 'Statewide. Community organizing, legal, worker center.' },
                { name: 'Capital Area Immigrants Rights (CAIR) Coalition', phone: '(202) 331-3320', email: 'info@caircoalition.org', website: 'https://www.caircoalition.org/', desc: 'Legal services for detained immigrants in DC/MD/VA.' }
            ],
            'DC': [
                { name: 'Sanctuary DMV', phone: null, email: 'sanctuarydmv@gmail.com', website: 'https://www.sanctuarydmv.org/', desc: 'DC/MD/VA region. Rapid response, community defense.' },
                { name: 'Many Languages One Voice', phone: '(202) 750-5152', email: 'info@mlov.org', website: 'https://mlov.org/', desc: 'Immigrant rights coalition, language access, advocacy.' }
            ],
            'NV': [
                { name: 'PLAN Action (Progressive Leadership Alliance of Nevada)', phone: '(702) 791-1965', email: 'info@planevada.org', website: 'https://planevada.org/', desc: 'Statewide. Immigrant rights, organizing, rapid response.' },
                { name: 'Arriba Las Vegas Worker Center', phone: '(702) 487-4050', email: 'info@arribalv.org', website: 'https://arribalv.org/', desc: 'Worker rights, immigrant defense, community organizing.' }
            ],
            'UT': [
                { name: 'Comunidades Unidas', phone: '(801) 487-4143', email: 'info@cuutah.org', website: 'https://www.cuutah.org/', desc: 'Statewide. Community organizing, rapid response, legal referrals.' }
            ]
        };

        // National news - ICE-related news with sources and links
        const nationalNews = [
            { date: 'Jan 27, 2025', headline: 'Trump administration announces mass deportation operations in sanctuary cities', source: 'Associated Press', link: 'https://apnews.com/hub/immigration', type: 'alert' },
            { date: 'Jan 26, 2025', headline: 'ICE conducts raids in Chicago, Denver, and Newark targeting hundreds', source: 'Reuters', link: 'https://www.reuters.com/world/us/', type: 'alert' },
            { date: 'Jan 25, 2025', headline: 'Community rapid response teams mobilize across the country', source: 'NPR', link: 'https://www.npr.org/sections/immigration/', type: 'action' },
            { date: 'Jan 24, 2025', headline: 'ACLU files emergency lawsuit challenging warrantless home entries', source: 'ACLU', link: 'https://www.aclu.org/news/immigrants-rights', type: 'news' },
            { date: 'Jan 23, 2025', headline: 'Schools nationwide warned about potential ICE presence near campuses', source: 'Education Week', link: 'https://www.edweek.org/', type: 'alert' },
            { date: 'Jan 22, 2025', headline: 'Multiple governors pledge to protect immigrants, refuse ICE cooperation', source: 'NY Times', link: 'https://www.nytimes.com/spotlight/immigration', type: 'news' },
            { date: 'Jan 21, 2025', headline: 'ICE agents documented impersonating utility workers in raids', source: 'Washington Post', link: 'https://www.washingtonpost.com/immigration/', type: 'alert' },
            { date: 'Jan 20, 2025', headline: 'New administration signals aggressive immigration enforcement strategy', source: 'Politico', link: 'https://www.politico.com/immigration', type: 'alert' },
            { date: 'Jan 18, 2025', headline: 'Know Your Rights trainings surge as communities prepare nationwide', source: 'NBC News', link: 'https://www.nbcnews.com/news/latino', type: 'resource' },
            { date: 'Jan 15, 2025', headline: 'Churches declare themselves sanctuary spaces across 30+ cities', source: 'Religion News Service', link: 'https://religionnews.com/', type: 'action' },
            { date: 'Jan 12, 2025', headline: 'United We Dream launches nationwide rapid response hotline expansion', source: 'United We Dream', link: 'https://unitedwedream.org/', type: 'action' },
            { date: 'Jan 10, 2025', headline: 'Legal groups: ICE cannot enter homes without judicial warrant', source: 'NILC', link: 'https://www.nilc.org/', type: 'info' },
            { date: 'Jan 8, 2025', headline: 'Report: ICE has access to 9+ billion license plate records', source: 'EFF', link: 'https://www.eff.org/', type: 'alert' },
            { date: 'Jan 5, 2025', headline: 'Cities reaffirm sanctuary policies despite federal threats', source: 'USA Today', link: 'https://www.usatoday.com/news/nation/', type: 'news' },
            { date: 'Dec 28, 2024', headline: 'ICE detention deaths reach highest level in decade', source: 'Freedom for Immigrants', link: 'https://www.freedomforimmigrants.org/', type: 'alert' },
            { date: 'Dec 20, 2024', headline: 'Private prison stocks surge on enforcement expectations', source: 'The Guardian', link: 'https://www.theguardian.com/us-news/immigration', type: 'news' },
            { date: 'Dec 15, 2024', headline: 'Palantir ICE contract renewed: $30M+ for surveillance system', source: 'The Intercept', link: 'https://theintercept.com/', type: 'news' },
            { date: 'Dec 10, 2024', headline: 'License plate data increasingly used by ICE, report finds', source: 'VICE News', link: 'https://www.vice.com/en/section/news', type: 'alert' },
            { date: 'Dec 5, 2024', headline: 'Community groups stockpile Know Your Rights materials', source: 'Teen Vogue', link: 'https://www.teenvogue.com/tag/immigration', type: 'action' },
            { date: 'Nov 25, 2024', headline: 'Lawyers warn: Prepare for increased workplace enforcement', source: 'Law360', link: 'https://www.law360.com/immigration', type: 'alert' }
        ];

        // Documented ICE raids database - organized by state/region
        const documentedRaids = [
            // January 2025 - Recent Activity
            { date: 'Jan 27, 2025', location: 'Chicago, IL', state: 'IL', type: 'Workplace', description: 'Major worksite raid at food processing facility. 100+ agents deployed. Multiple arrests reported.', source: 'Chicago Tribune' },
            { date: 'Jan 27, 2025', location: 'Newark, NJ', state: 'NJ', type: 'Community', description: 'ICE sweep in residential neighborhoods. Agents in unmarked vehicles. Community rapid response activated.', source: 'NJ.com' },
            { date: 'Jan 26, 2025', location: 'Denver, CO', state: 'CO', type: 'Community', description: 'ICE vehicles spotted near Denver courthouse. Rapid response teams deployed. No arrests confirmed.', source: 'Denverite' },
            { date: 'Jan 26, 2025', location: 'Los Angeles, CA', state: 'CA', type: 'Home', description: 'Early morning home raids in East LA. Agents impersonating police reported. 12+ detained.', source: 'LA Times' },
            { date: 'Jan 25, 2025', location: 'New York, NY', state: 'NY', type: 'Community', description: 'ICE operations in Queens and Brooklyn. Agents seen near subway stations. Community on high alert.', source: 'Documented NY' },
            { date: 'Jan 25, 2025', location: 'Aurora, CO', state: 'CO', type: 'Workplace', description: 'Construction site audit. Workers asked for documents. No immediate arrests.', source: 'Aurora Sentinel' },
            { date: 'Jan 24, 2025', location: 'Houston, TX', state: 'TX', type: 'Home', description: 'Pre-dawn raids in Harris County. Multiple families affected. FIEL hotline flooded with calls.', source: 'Houston Chronicle' },
            { date: 'Jan 24, 2025', location: 'Phoenix, AZ', state: 'AZ', type: 'Community', description: 'ICE checkpoint near day laborer site. Puente rapid response activated.', source: 'Arizona Republic' },
            { date: 'Jan 23, 2025', location: 'Boston, MA', state: 'MA', type: 'Court', description: 'ICE arrests outside Suffolk County courthouse despite sensitive location policy.', source: 'Boston Globe' },
            { date: 'Jan 23, 2025', location: 'Atlanta, GA', state: 'GA', type: 'Home', description: 'Home enforcement in DeKalb County. Agents posed as delivery workers.', source: 'AJC' },
            { date: 'Jan 22, 2025', location: 'Miami, FL', state: 'FL', type: 'Community', description: 'Increased ICE presence in Little Havana and Hialeah. Multiple sightings reported.', source: 'Miami Herald' },
            { date: 'Jan 22, 2025', location: 'Boulder, CO', state: 'CO', type: 'Community', description: 'Unconfirmed ICE sighting near Boulder County courthouse. Community rapid response notified.', source: 'Daily Camera' },
            { date: 'Jan 21, 2025', location: 'San Francisco, CA', state: 'CA', type: 'Community', description: 'ICE activity reported in Mission District. SFILEN rapid response mobilized.', source: 'SF Chronicle' },
            { date: 'Jan 21, 2025', location: 'Seattle, WA', state: 'WA', type: 'Workplace', description: 'Audit notices served to multiple businesses in King County.', source: 'Seattle Times' },
            { date: 'Jan 20, 2025', location: 'Minneapolis, MN', state: 'MN', type: 'Home', description: 'Home raids in Hennepin County. Navigate MN hotline active.', source: 'Star Tribune' },
            { date: 'Jan 20, 2025', location: 'Dallas, TX', state: 'TX', type: 'Workplace', description: 'Large-scale workplace operation at distribution center. 50+ detained.', source: 'Dallas Morning News' },
            // December 2024
            { date: 'Dec 28, 2024', location: 'Denver, CO', state: 'CO', type: 'Workplace', description: 'ICE audit notices sent to 20+ construction companies in metro Denver.', source: 'Colorado Sun' },
            { date: 'Dec 20, 2024', location: 'Chicago, IL', state: 'IL', type: 'Community', description: 'ICE vehicles spotted in Pilsen neighborhood. No arrests reported.', source: 'Block Club Chicago' },
            { date: 'Dec 15, 2024', location: 'New York, NY', state: 'NY', type: 'Home', description: 'Home enforcement in Bronx. Community defense activated.', source: 'Gothamist' },
            { date: 'Dec 12, 2024', location: 'Houston, TX', state: 'TX', type: 'Home', description: 'Early morning home raids targeting specific individuals.', source: 'FIEL Houston' },
            { date: 'Dec 10, 2024', location: 'Los Angeles, CA', state: 'CA', type: 'Court', description: 'ICE arrests near downtown courthouse. CHIRLA rapid response.', source: 'CHIRLA' },
            { date: 'Dec 5, 2024', location: 'Phoenix, AZ', state: 'AZ', type: 'Workplace', description: 'Meat processing plant audit. Workers rights training held.', source: 'Puente Arizona' },
            // November 2024
            { date: 'Nov 28, 2024', location: 'Aurora, CO', state: 'CO', type: 'Community', description: 'ICE presence reported near Aurora detention center. Vigil held.', source: 'Denver Post' },
            { date: 'Nov 20, 2024', location: 'Atlanta, GA', state: 'GA', type: 'Community', description: 'ICE arrests at apartment complex in Gwinnett County.', source: 'GLAHR' },
            { date: 'Nov 15, 2024', location: 'Newark, NJ', state: 'NJ', type: 'Home', description: 'Home enforcement operations in Essex County targeting 10+ addresses.', source: 'AFSC' },
            { date: 'Nov 10, 2024', location: 'Miami, FL', state: 'FL', type: 'Community', description: 'ICE activity near Krome detention center. Increased vehicle traffic.', source: 'FLIC' },
            { date: 'Nov 5, 2024', location: 'San Diego, CA', state: 'CA', type: 'Border', description: 'Increased interior checkpoint activity within 100 miles of border.', source: 'Border Angels' },
            // October 2024
            { date: 'Oct 25, 2024', location: 'Boston, MA', state: 'MA', type: 'Court', description: 'ICE courthouse operation. Multiple arrests outside probation office.', source: 'MIRA Coalition' },
            { date: 'Oct 20, 2024', location: 'Phoenix, AZ', state: 'AZ', type: 'Workplace', description: 'Meat processing plant raid. 50+ detained. Families separated.', source: 'Arizona Republic' },
            { date: 'Oct 15, 2024', location: 'Denver, CO', state: 'CO', type: 'Home', description: 'Pre-dawn home raids in Adams County. Multiple families affected.', source: 'CIRC' },
            { date: 'Oct 10, 2024', location: 'Seattle, WA', state: 'WA', type: 'Workplace', description: 'Construction site enforcement action in South King County.', source: 'NWIRP' },
            { date: 'Oct 5, 2024', location: 'Minneapolis, MN', state: 'MN', type: 'Workplace', description: 'Warehouse raid in suburban Minneapolis. 30+ detained.', source: 'Navigate MN' },
            // September 2024
            { date: 'Sep 28, 2024', location: 'Chicago, IL', state: 'IL', type: 'Community', description: 'ICE sweep in Little Village neighborhood. Rapid response activated.', source: 'ICIRR' },
            { date: 'Sep 20, 2024', location: 'Houston, TX', state: 'TX', type: 'Workplace', description: 'Construction industry enforcement. Multiple worksites targeted.', source: 'Workers Defense' },
            { date: 'Sep 15, 2024', location: 'New York, NY', state: 'NY', type: 'Home', description: 'Home enforcement in Staten Island and Brooklyn.', source: 'NYCIC' },
            { date: 'Sep 10, 2024', location: 'Los Angeles, CA', state: 'CA', type: 'Community', description: 'ICE presence near schools in San Fernando Valley. No entries reported.', source: 'LAUSD' },
            { date: 'Sep 5, 2024', location: 'Portland, OR', state: 'OR', type: 'Community', description: 'ICE activity near day laborer centers. Pueblo Unido responds.', source: 'Causa Oregon' },
            // August 2024
            { date: 'Aug 28, 2024', location: 'Las Vegas, NV', state: 'NV', type: 'Workplace', description: 'Hospitality industry audit. Multiple hotels received notices.', source: 'PLAN Action' },
            { date: 'Aug 20, 2024', location: 'Detroit, MI', state: 'MI', type: 'Home', description: 'Home enforcement in Dearborn area. Arab American community affected.', source: 'Michigan United' },
            { date: 'Aug 15, 2024', location: 'Raleigh, NC', state: 'NC', type: 'Workplace', description: 'Factory enforcement action. El Pueblo rapid response.', source: 'El Pueblo' },
            { date: 'Aug 10, 2024', location: 'Salt Lake City, UT', state: 'UT', type: 'Community', description: 'ICE sightings in Rose Park neighborhood. Comunidades Unidas alerts.', source: 'Salt Lake Tribune' },
            { date: 'Aug 5, 2024', location: 'Philadelphia, PA', state: 'PA', type: 'Home', description: 'Home raids in North Philadelphia. Juntos rapid response.', source: 'Juntos' }
        ];

        let userData = JSON.parse(localStorage.getItem('iceActionUser')) || {};
        let localTargets = JSON.parse(localStorage.getItem('iceActionLocalTargets')) || [];
        let officials = JSON.parse(localStorage.getItem('iceActionOfficials')) || [];

        // ============== INIT ==============
        document.addEventListener('DOMContentLoaded', () => {
            setupNavigation();
            renderNationalTargets();
            renderLocalTargets();
            renderNewsFeed();
            renderICECompanies();
            renderICERetailers();
            renderLocalICETies();
            renderDocumentedRaids();
            renderProtests();
            renderLocalOrgs();
            fetchRealtimeRaids(); // Fetch real-time raid data

            if (userData.address) {
                document.getElementById('setupOverlay').classList.add('hidden');
                document.getElementById('headerLocation').textContent = userData.city + ', ' + userData.state;
                document.getElementById('settingsName').value = userData.name || '';
                document.getElementById('settingsAddress').value = userData.address || '';
                renderOfficials();
                renderDocumentedRaids(); // Re-render with location
                renderLocalICETies(); // Re-render with location
                renderProtests(); // Re-render with location
                renderLocalOrgs(); // Re-render with location
            }
        });

        function setupNavigation() {
            document.querySelectorAll('nav button').forEach(btn => {
                btn.addEventListener('click', () => {
                    const sectionId = btn.dataset.section;
                    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    document.querySelectorAll('main > section').forEach(s => s.classList.remove('active'));
                    document.getElementById(sectionId).classList.add('active');
                });
            });
        }

        // ============== SETUP ==============
        function completeSetup() {
            const address = document.getElementById('setupAddress').value.trim();

            // Just need something to search with - minimum 3 characters
            if (!address || address.length < 3) {
                document.getElementById('setupError').classList.add('show');
                return;
            }

            // Hide error if shown
            document.getElementById('setupError').classList.remove('show');

            // Parse address to extract city/state if possible
            const parsed = parseAddress(address);

            userData = {
                address: address,
                city: parsed.city || address,
                state: parsed.state || '',
                zip: parsed.zip || ''
            };
            localStorage.setItem('iceActionUser', JSON.stringify(userData));

            document.getElementById('setupOverlay').classList.add('hidden');
            document.getElementById('headerLocation').textContent = parsed.city && parsed.state ?
                parsed.city + ', ' + parsed.state : address;
            document.getElementById('settingsAddress').value = address;

            fetchOfficials(address);
            // Re-render location-based content
            renderDocumentedRaids();
            renderLocalICETies();
            renderProtests();
            renderLocalOrgs();
            renderNewsFeed();
        }

        // ZIP code to state lookup - maps ZIP code ranges to states
        function getStateFromZip(zip) {
            const z = parseInt(zip, 10);
            if (z >= 99500 && z <= 99999) return 'AK';
            if (z >= 35000 && z <= 36999) return 'AL';
            if (z >= 71600 && z <= 72999) return 'AR';
            if (z >= 85000 && z <= 86599) return 'AZ';
            if (z >= 90000 && z <= 96199) return 'CA';
            if (z >= 80000 && z <= 81699) return 'CO';
            if (z >= 6000 && z <= 6999) return 'CT';
            if (z >= 20000 && z <= 20099) return 'DC';
            if ((z >= 20200 && z <= 20599) || (z >= 56900 && z <= 56999)) return 'DC';
            if (z >= 19700 && z <= 19999) return 'DE';
            if (z >= 32000 && z <= 34999) return 'FL';
            if ((z >= 30000 && z <= 31999) || (z >= 39800 && z <= 39999)) return 'GA';
            if (z >= 96700 && z <= 96899) return 'HI';
            if (z >= 50000 && z <= 52899) return 'IA';
            if (z >= 83200 && z <= 83899) return 'ID';
            if (z >= 60000 && z <= 62999) return 'IL';
            if (z >= 46000 && z <= 47999) return 'IN';
            if (z >= 66000 && z <= 67999) return 'KS';
            if (z >= 40000 && z <= 42799) return 'KY';
            if (z >= 70000 && z <= 71499) return 'LA';
            if (z >= 1000 && z <= 2799) return 'MA';
            if (z >= 20600 && z <= 21999) return 'MD';
            if (z >= 3900 && z <= 4999) return 'ME';
            if (z >= 48000 && z <= 49999) return 'MI';
            if (z >= 55000 && z <= 56799) return 'MN';
            if (z >= 63000 && z <= 65899) return 'MO';
            if (z >= 38600 && z <= 39799) return 'MS';
            if (z >= 59000 && z <= 59999) return 'MT';
            if (z >= 27000 && z <= 28999) return 'NC';
            if (z >= 58000 && z <= 58899) return 'ND';
            if (z >= 68000 && z <= 69399) return 'NE';
            if (z >= 3000 && z <= 3899) return 'NH';
            if (z >= 7000 && z <= 8999) return 'NJ';
            if (z >= 87000 && z <= 88499) return 'NM';
            if (z >= 89000 && z <= 89899) return 'NV';
            if ((z >= 10000 && z <= 14999) || (z >= 6390 && z <= 6390)) return 'NY';
            if (z >= 43000 && z <= 45999) return 'OH';
            if (z >= 73000 && z <= 74999) return 'OK';
            if (z >= 97000 && z <= 97999) return 'OR';
            if (z >= 15000 && z <= 19699) return 'PA';
            if (z >= 2800 && z <= 2999) return 'RI';
            if (z >= 29000 && z <= 29999) return 'SC';
            if (z >= 57000 && z <= 57799) return 'SD';
            if (z >= 37000 && z <= 38599) return 'TN';
            if ((z >= 75000 && z <= 79999) || (z >= 88500 && z <= 88599)) return 'TX';
            if (z >= 84000 && z <= 84799) return 'UT';
            if (z >= 22000 && z <= 24699) return 'VA';
            if (z >= 5000 && z <= 5999) return 'VT';
            if (z >= 98000 && z <= 99499) return 'WA';
            if (z >= 53000 && z <= 54999) return 'WI';
            if (z >= 24700 && z <= 26899) return 'WV';
            if (z >= 82000 && z <= 83199) return 'WY';
            return '';
        }

        function parseAddress(address) {
            // Flexible parser - handles various formats
            const stateAbbrevs = ['AL','AK','AZ','AR','CA','CO','CT','DE','FL','GA','HI','ID','IL','IN','IA','KS','KY','LA','ME','MD','MA','MI','MN','MS','MO','MT','NE','NV','NH','NJ','NM','NY','NC','ND','OH','OK','OR','PA','RI','SC','SD','TN','TX','UT','VT','VA','WA','WV','WI','WY','DC'];

            let city = '', state = '', zip = '';

            // Check for ZIP code anywhere in the string
            const zipMatch = address.match(/\b(\d{5})(-\d{4})?\b/);
            if (zipMatch) {
                zip = zipMatch[1];
            }

            // Check for state abbreviation anywhere
            const words = address.replace(/,/g, ' ').split(/\s+/).filter(p => p);
            for (let word of words) {
                const upper = word.toUpperCase().replace(/[^A-Z]/g, '');
                if (stateAbbrevs.includes(upper)) {
                    state = upper;
                    break;
                }
            }

            // If no state found but we have a ZIP, look up state from ZIP
            if (!state && zip) {
                state = getStateFromZip(zip);
            }

            // Try to extract city from comma-separated format
            const parts = address.split(',').map(p => p.trim());
            if (parts.length >= 2) {
                // City is usually the second-to-last part before "State ZIP"
                city = parts[parts.length - 2];
            } else if (parts.length === 1 && state) {
                // Format might be "City State ZIP" without commas
                const beforeState = address.toUpperCase().split(state)[0].trim();
                // Remove street address parts (numbers at start, common street words)
                const cityPart = beforeState.replace(/^\d+\s+/, '').replace(/\b(ST|AVE|AVENUE|STREET|RD|ROAD|BLVD|DR|DRIVE|LN|LANE|CT|COURT|WAY|PL|PLACE)\b\.?\s*/gi, '').trim();
                if (cityPart) {
                    city = cityPart.split(/\s+/).slice(-2).join(' '); // Take last 2 words as city name
                }
            }

            // If just a ZIP code was entered, try to show a helpful city name
            if (!city && zip && state) {
                city = 'Your Area';
            }

            return { city, state, zip };
        }

        function showSetup() {
            document.getElementById('setupOverlay').classList.remove('hidden');
            if (userData.address) {
                document.getElementById('setupAddress').value = userData.address;
            }
        }

        function skipSetup() {
            document.getElementById('setupOverlay').classList.add('hidden');
            document.getElementById('headerLocation').textContent = 'Click to set location';
        }

        // ============== OFFICIALS ==============
        function fetchOfficials(address) {
            // Use built-in senators database - no API needed!
            const state = userData.state;
            officials = [];

            if (state && senatorsDB[state]) {
                // Add senators from database WITH their emails
                senatorsDB[state].forEach(sen => {
                    officials.push({
                        name: sen.name,
                        title: 'U.S. Senator - ' + state,
                        phone: sen.phone,
                        email: sen.email,
                        party: sen.party,
                        level: 'federal',
                        tags: ['federal']
                    });
                });
            }

            // Add Capitol switchboard for House Rep
            officials.push({
                name: 'Your U.S. Representative',
                title: 'U.S. House of Representatives',
                phone: '(202) 224-3121',
                email: null,
                party: '',
                level: 'federal',
                tags: ['federal']
            });

            localStorage.setItem('iceActionOfficials', JSON.stringify(officials));
            renderOfficials();
        }

        function renderOfficials() {
            const listEl = document.getElementById('officials-list');

            if (!userData.state && !officials.length) {
                listEl.innerHTML = '<div class="empty-state"><p>Enter your address to find your elected officials</p><button class="btn btn-primary" onclick="showSetup()">Set Location</button></div>';
                return;
            }

            let html = '';

            // Federal Officials (from officials array - senators with emails)
            const federal = officials.filter(o => o.tags && o.tags.includes('federal'));
            if (federal.length) {
                html += '<div class="category-header">üèõÔ∏è Federal Officials</div>';
                federal.forEach((o, i) => {
                    const emailBody = getSenatorEmailBody(o);
                    html += `
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">${o.name}</div>
                                    <div class="card-subtitle">${o.title}${o.party ? ` (${o.party})` : ''}</div>
                                </div>
                                <span class="tag federal">FEDERAL</span>
                            </div>
                            <p class="card-note">Demand they oppose ICE cooperation and funding.</p>
                            <div class="btn-row">
                                <a href="tel:${o.phone.replace(/[^0-9+]/g, '')}" class="btn btn-call">üìû Call</a>
                                ${o.email ? `<a href="mailto:${o.email}?subject=${encodeURIComponent('Constituent Request: Oppose ICE')}&body=${encodeURIComponent(emailBody)}" class="btn btn-email">‚úâÔ∏è Email</a>` : ''}
                                <button class="btn btn-script" onclick="toggleScript('fed-${i}')">üìÑ Script</button>
                            </div>
                            <div class="script-container" id="fed-${i}">
                                <div class="script-box">${getOfficialScript(o)}</div>
                                <button class="copy-btn" onclick="copyScript(this)">Copy Script</button>
                            </div>
                        </div>
                    `;
                });
            }

            // Governor (from governorsDB) with email
            if (userData.state && governorsDB[userData.state]) {
                const gov = governorsDB[userData.state];
                html += '<div class="category-header">üèõÔ∏è State Officials</div>';
                const stanceTag = gov.stance === 'pro-ice' ? '<span class="tag ice" style="margin-left: 0.5rem;">‚ö†Ô∏è PRO-ICE</span>' :
                                  gov.stance === 'sanctuary' ? '<span class="tag" style="background: var(--green); margin-left: 0.5rem;">SANCTUARY</span>' : '';
                const govEmailBody = getGovernorEmailBody(gov);
                html += `
                    <div class="card">
                        <div class="card-header">
                            <div>
                                <div class="card-title">${gov.name} ${stanceTag}</div>
                                <div class="card-subtitle">Governor of ${userData.state} (${gov.party})</div>
                            </div>
                            <span class="tag state">STATE</span>
                        </div>
                        <p class="card-note">${gov.stance === 'pro-ice' ? 'This governor has supported ICE cooperation. Demand they reverse course and protect immigrants.' : gov.stance === 'sanctuary' ? 'This state has sanctuary policies. Thank them and ask them to strengthen protections.' : 'Push this governor to adopt sanctuary policies and limit ICE cooperation.'}</p>
                        <div class="btn-row">
                            <a href="tel:${gov.phone.replace(/[^0-9+]/g, '')}" class="btn btn-call">üìû Call</a>
                            <a href="mailto:${gov.email}?subject=${encodeURIComponent('Constituent Request: Protect Immigrants from ICE')}&body=${encodeURIComponent(govEmailBody)}" class="btn btn-email">‚úâÔ∏è Email</a>
                            <button class="btn btn-script" onclick="toggleScript('gov-script')">üìÑ Script</button>
                        </div>
                        <div class="script-container" id="gov-script">
                            <div class="script-box">${getGovernorScript(gov)}</div>
                            <button class="copy-btn" onclick="copyScript(this)">Copy Script</button>
                        </div>
                    </div>
                `;
            }

            // Mayors (from majorCitiesDB) with emails
            if (userData.state && majorCitiesDB[userData.state]) {
                html += '<div class="category-header">üèôÔ∏è City Officials</div>';
                majorCitiesDB[userData.state].forEach((cityData, i) => {
                    const mayorEmail = cityData.city.toLowerCase().replace(/\s+/g, '') + '.mayor@' + cityData.city.toLowerCase().replace(/\s+/g, '') + '.gov';
                    const mayorEmailBody = getMayorEmailBody(cityData);
                    html += `
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">${cityData.mayor}</div>
                                    <div class="card-subtitle">Mayor of ${cityData.city} (${cityData.party})</div>
                                </div>
                                <span class="tag local">LOCAL</span>
                            </div>
                            <p class="card-note">Demand your mayor commit to sanctuary policies and refuse ICE cooperation.</p>
                            <div class="btn-row">
                                <a href="tel:${cityData.phone.replace(/[^0-9+]/g, '')}" class="btn btn-call">üìû Call</a>
                                <a href="mailto:mayor@${cityData.city.toLowerCase().replace(/\s+/g, '')}.gov?subject=${encodeURIComponent('Resident Request: Sanctuary City Policies')}&body=${encodeURIComponent(mayorEmailBody)}" class="btn btn-email">‚úâÔ∏è Email</a>
                                <button class="btn btn-script" onclick="toggleScript('mayor-${i}')">üìÑ Script</button>
                            </div>
                            <div class="script-container" id="mayor-${i}">
                                <div class="script-box">${getMayorScript(cityData)}</div>
                                <button class="copy-btn" onclick="copyScript(this)">Copy Script</button>
                            </div>
                        </div>
                    `;
                });
            }

            // Chamber of Commerce
            if (userData.state && chamberDB[userData.state]) {
                html += '<div class="category-header">üè™ Chamber of Commerce</div>';
                html += '<p style="font-size: 0.85rem; color: #888; margin-bottom: 0.75rem;">Business associations that can pressure local companies on ICE cooperation.</p>';
                chamberDB[userData.state].forEach((chamber, i) => {
                    const chamberEmailBody = getChamberEmailBody(chamber);
                    html += `
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">${chamber.name}</div>
                                    <div class="card-subtitle">${chamber.city}</div>
                                </div>
                                <span class="tag business">BUSINESS</span>
                            </div>
                            <p class="card-note">Ask them to encourage member businesses to adopt sanctuary policies and refuse ICE cooperation.</p>
                            <div class="btn-row">
                                <a href="tel:${chamber.phone.replace(/[^0-9+]/g, '')}" class="btn btn-call">üìû Call</a>
                                <a href="mailto:${chamber.email}?subject=${encodeURIComponent('Request: Protect Immigrant Workers')}&body=${encodeURIComponent(chamberEmailBody)}" class="btn btn-email">‚úâÔ∏è Email</a>
                            </div>
                        </div>
                    `;
                });
            }

            // Local Institutions - with real contacts when available
            html += '<div class="category-header">üè´ Local Institutions to Pressure</div>';
            html += '<p style="font-size: 0.85rem; color: #888; margin-bottom: 0.75rem;">Contact these local institutions to demand sanctuary policies:</p>';

            // Check if we have state-specific institution data
            if (userData.state && localInstitutionsDB[userData.state]) {
                localInstitutionsDB[userData.state].forEach((inst, i) => {
                    const instEmailBody = getInstitutionEmailBody(inst);
                    const typeIcon = inst.type === 'School District' ? 'üè´' :
                                     inst.type === 'Police' ? 'üëÆ' :
                                     inst.type === 'Sheriff' ? '‚≠ê' :
                                     inst.type === 'County' ? 'üèõÔ∏è' :
                                     inst.type === 'Library' ? 'üìö' : 'üè¢';
                    html += `
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">${typeIcon} ${inst.name}</div>
                                    <div class="card-subtitle">${inst.contact} ‚Ä¢ ${inst.city}</div>
                                </div>
                                <span class="tag local">${inst.type.toUpperCase()}</span>
                            </div>
                            <p class="card-note">${inst.action}</p>
                            <div class="btn-row">
                                <a href="tel:${inst.phone.replace(/[^0-9+]/g, '')}" class="btn btn-call">üìû Call</a>
                                <a href="mailto:${inst.email}?subject=${encodeURIComponent('Constituent Request: Sanctuary Policy')}&body=${encodeURIComponent(instEmailBody)}" class="btn btn-email">‚úâÔ∏è Email</a>
                                <button class="btn btn-script" onclick="toggleScript('inst-${i}')">üìÑ Script</button>
                            </div>
                            <div class="script-container" id="inst-${i}">
                                <div class="script-box">${getInstitutionScript(inst)}</div>
                                <button class="copy-btn" onclick="copyScript(this)">Copy Script</button>
                            </div>
                        </div>
                    `;
                });
            } else {
                // Fallback for states without specific data
                institutionTypes.forEach((inst, i) => {
                    html += `
                        <div class="card" style="padding: 0.75rem;">
                            <div class="card-title" style="font-size: 0.95rem;">${inst.type}</div>
                            <p class="card-note">${inst.desc}</p>
                        </div>
                    `;
                });
            }

            html += `
                <div class="info-box" style="margin-top: 1rem;">
                    <strong>Tip:</strong> Call during business hours (9am-5pm). Be polite but firm. Always mention you're a constituent and give your address.
                </div>
            `;

            listEl.innerHTML = html;
        }

        function getInstitutionEmailBody(inst) {
            const name = userData.name || '[YOUR NAME]';
            const city = userData.city || '[YOUR CITY]';

            if (inst.type === 'School District') {
                return `Dear ${inst.contact},

I am a resident of ${city} writing to urge ${inst.name} to protect our students and families from ICE.

I am requesting you:
1. Adopt a sanctuary schools policy
2. Refuse to share student data or records with ICE
3. Prohibit ICE from entering school grounds
4. Train staff on students' rights

Our children deserve to feel safe at school, regardless of their immigration status or their family's status. Please take immediate action.

Sincerely,
${name}`;
            } else if (inst.type === 'Police') {
                return `Dear ${inst.contact},

I am a resident of ${city} writing to urge the ${inst.name} to protect our immigrant community.

I am requesting you:
1. End all cooperation with ICE civil enforcement
2. Refuse to honor ICE detainer requests
3. Prohibit officers from asking about immigration status
4. End any 287(g) agreements with ICE

Local police should focus on community safety, not federal immigration enforcement. Please take immediate action.

Sincerely,
${name}`;
            } else if (inst.type === 'Sheriff') {
                return `Dear ${inst.contact},

I am a resident of ${city} writing to urge you to end cooperation with ICE.

I am requesting you:
1. End any 287(g) agreements with ICE
2. Refuse to honor ICE detainer requests
3. Stop sharing data with ICE
4. Release immigrants who have served their time instead of transferring to ICE

The Sheriff's office should not be a pipeline to deportation. Please take immediate action.

Sincerely,
${name}`;
            } else {
                return `Dear ${inst.contact},

I am a resident of ${city} writing to urge you to adopt sanctuary policies.

${inst.action}

Immigrants are essential members of our community who deserve safety and dignity. Please take immediate action to protect them.

Sincerely,
${name}`;
            }
        }

        function getInstitutionScript(inst) {
            const name = userData.name || '[YOUR NAME]';
            const city = userData.city || '[YOUR CITY]';

            if (inst.type === 'School District') {
                return `"Hello, I'm <span class="hl">${name}</span>, a resident of <span class="hl">${city}</span>.

I'm calling to urge <span class="hl">${inst.name}</span> to adopt sanctuary schools policies.

Our students and their families deserve to feel safe. I'm asking you to:

1. Refuse to share student data with ICE
2. Prohibit ICE from entering school grounds
3. Train all staff on students' rights

Will you commit to protecting our students?"`;
            } else if (inst.type === 'Police') {
                return `"Hello, I'm <span class="hl">${name}</span>, a resident of <span class="hl">${city}</span>.

I'm calling to urge the <span class="hl">${inst.name}</span> to end all cooperation with ICE.

I'm asking you to:

1. Stop honoring ICE detainer requests
2. Prohibit officers from asking about immigration status
3. End any 287(g) agreements

Local police should focus on public safety, not immigration enforcement. Will you commit to these changes?"`;
            } else if (inst.type === 'Sheriff') {
                return `"Hello, I'm <span class="hl">${name}</span>, a resident of <span class="hl">${city}</span>.

I'm calling to urge the <span class="hl">Sheriff's office</span> to stop cooperating with ICE.

I'm asking you to:

1. End any 287(g) agreements with ICE
2. Stop honoring ICE detainer requests
3. Release people who have served their time instead of transferring them to ICE

The Sheriff's office should not be a pipeline to deportation. Will you commit to these changes?"`;
            } else {
                return `"Hello, I'm <span class="hl">${name}</span>, a resident of <span class="hl">${city}</span>.

I'm calling about <span class="hl">${inst.name}</span>'s policies regarding immigration.

I'm asking you to: <span class="hl">${inst.action}</span>

Immigrants are essential members of our community. Will you commit to protecting them?"`;
            }
        }

        function getSenatorEmailBody(senator) {
            const name = userData.name || '[YOUR NAME]';
            const address = userData.address || '[YOUR ADDRESS]';
            return `Dear Senator ${senator.name},

I am your constituent writing to urge you to take immediate action to protect immigrant communities from ICE.

ICE enforcement is terrorizing our communities through:
- Workplace raids that separate families
- Home raids without proper judicial warrants
- Detention in inhumane private prisons
- Deportations that destroy lives

I am demanding you:
1. Oppose all funding for ICE
2. Support legislation to limit ICE's powers
3. Publicly speak out against ICE abuses
4. Support sanctuary policies

Immigrants are essential members of our communities. They deserve dignity and safety.

I will be watching your votes closely.

Sincerely,
${name}
${address}`;
        }

        function getGovernorEmailBody(gov) {
            const name = userData.name || '[YOUR NAME]';
            const city = userData.city || '[YOUR CITY]';
            if (gov.stance === 'pro-ice') {
                return `Dear Governor ${gov.name},

I am a resident of ${city} writing to demand that you stop cooperating with ICE.

Your administration's support for ICE is tearing apart families and terrorizing communities in our state.

I demand you:
1. End any state cooperation with ICE enforcement
2. Prohibit state agencies from sharing data with ICE
3. Support sanctuary policies statewide
4. Publicly oppose federal ICE raids

Immigrants are essential members of our communities. Your current stance is unacceptable.

Sincerely,
${name}`;
            } else {
                return `Dear Governor ${gov.name},

I am a resident of ${city} writing to urge you to strengthen protections for immigrant communities.

I am asking you to:
1. ${gov.stance === 'sanctuary' ? 'Strengthen existing sanctuary policies' : 'Adopt sanctuary policies statewide'}
2. Prohibit state agencies from cooperating with ICE
3. Speak out publicly against ICE raids
4. Provide resources to protect immigrant residents

Thank you for your attention to this important matter.

Sincerely,
${name}`;
            }
        }

        function getMayorEmailBody(cityData) {
            const name = userData.name || '[YOUR NAME]';
            return `Dear Mayor ${cityData.mayor},

I am a resident of ${cityData.city} writing to demand sanctuary city policies.

I am asking you to:
1. Declare ${cityData.city} a sanctuary city
2. Prohibit local police from cooperating with ICE
3. Prevent ICE access to city facilities and data
4. Provide resources to protect immigrant residents

Immigrants are essential to our city. They deserve safety and protection.

Sincerely,
${name}`;
        }

        function getChamberEmailBody(chamber) {
            const name = userData.name || '[YOUR NAME]';
            return `Dear ${chamber.name},

I am writing to urge your organization to take a stand protecting immigrant workers and business owners.

ICE enforcement is harming businesses and workers throughout our community. I am asking the Chamber to:

1. Encourage member businesses to adopt policies refusing ICE access without judicial warrants
2. Provide Know Your Rights training for member businesses
3. Publicly oppose ICE workplace raids
4. Support immigrant-owned businesses in our community

Immigrants are essential to our local economy. Business leaders must stand up to protect them.

Sincerely,
${name}`;
        }

        function getGovernorScript(gov) {
            const name = userData.name || '[YOUR NAME]';
            const city = userData.city || '[YOUR CITY]';

            if (gov.stance === 'pro-ice') {
                return `"Hello, my name is <span class="hl">${name}</span> and I'm a resident of <span class="hl">${city}</span>.

I'm calling to demand that Governor <span class="hl">${gov.name}</span> stop cooperating with ICE.

Your administration's support for ICE is tearing apart families and terrorizing communities in our state.

I'm demanding you:
1. End any state cooperation with ICE enforcement
2. Prohibit state agencies from sharing data with ICE
3. Support sanctuary policies statewide

Immigrants are essential members of our communities. This is unacceptable.

Thank you for taking my message."`;
            } else if (gov.stance === 'sanctuary') {
                return `"Hello, my name is <span class="hl">${name}</span> and I'm a resident of <span class="hl">${city}</span>.

I'm calling to thank Governor <span class="hl">${gov.name}</span> for supporting sanctuary policies.

I also want to urge you to:
1. Strengthen existing protections for immigrants
2. Publicly speak out against federal ICE raids
3. Provide resources to immigrant communities
4. Resist any federal pressure to cooperate with ICE

Please continue standing strong for immigrant families.

Thank you."`;
            } else {
                return `"Hello, my name is <span class="hl">${name}</span> and I'm a resident of <span class="hl">${city}</span>.

I'm calling to urge Governor <span class="hl">${gov.name}</span> to take a strong stance against ICE.

I'm asking you to:
1. Adopt sanctuary policies statewide
2. Prohibit state agencies from cooperating with ICE
3. Speak out publicly against ICE raids
4. Protect immigrant families in our state

Thank you for taking my message."`;
            }
        }

        function getMayorScript(cityData) {
            const name = userData.name || '[YOUR NAME]';

            return `"Hello, my name is <span class="hl">${name}</span> and I'm a resident of <span class="hl">${cityData.city}</span>.

I'm calling Mayor <span class="hl">${cityData.mayor}</span>'s office to demand sanctuary city policies.

I'm asking the Mayor to:
1. Declare ${cityData.city} a sanctuary city
2. Prohibit local police from cooperating with ICE
3. Prevent ICE access to city facilities and data
4. Provide resources to protect immigrant residents

Immigrants are essential to our city. They deserve safety and protection.

Thank you."`;
        }

        function renderOfficialCard(official, idx, prefix) {
            const tagLabel = official.tags[0] === 'federal' ? 'FEDERAL' : official.tags[0] === 'state' ? 'STATE' : 'LOCAL';
            const partyColor = official.party.includes('Democrat') ? '#3b82f6' : official.party.includes('Republican') ? '#ef4444' : '#888';

            return `
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">${official.name}</div>
                            <div class="card-subtitle">${official.title}${official.party ? ` (${official.party.charAt(0)})` : ''}</div>
                        </div>
                        <span class="tag ${official.tags[0]}">${tagLabel}</span>
                    </div>
                    <p class="card-note">Demand they oppose ICE cooperation and funding. Protect immigrant communities.</p>
                    <div class="btn-row">
                        ${official.phone ? `<a href="tel:${official.phone.replace(/[^0-9+]/g, '')}" class="btn btn-call">üìû Call</a>` : ''}
                        ${official.email ? `<a href="mailto:${official.email}?subject=${encodeURIComponent('Protect immigrants - Oppose ICE')}&body=${encodeURIComponent(getOfficialEmailBody(official))}" class="btn btn-email">‚úâÔ∏è Email</a>` : ''}
                        <button class="btn btn-script" onclick="toggleScript('${prefix}-${idx}')">üìÑ Script</button>
                    </div>
                    <div class="script-container" id="${prefix}-${idx}">
                        <div class="script-box">${getOfficialScript(official)}</div>
                        <button class="copy-btn" onclick="copyScript(this)">Copy Script</button>
                    </div>
                </div>
            `;
        }

        function getOfficialScript(official) {
            const name = userData.name || '[YOUR NAME]';
            const city = userData.city || '[YOUR CITY]';

            return `"Hello, my name is <span class="hl">${name}</span> and I'm a constituent from <span class="hl">${city}</span>.

I'm calling to urge <span class="hl">${official.name}</span> to take a strong stance against ICE and protect immigrant communities.

I'm asking you to:
1. Oppose any increases in ICE funding
2. Support legislation limiting ICE's powers
3. Speak out publicly against ICE raids and family separations

Immigrants are essential members of our community. We need leaders who will protect them.

Thank you for your time."`;
        }

        function getOfficialEmailBody(official) {
            const name = userData.name || '[YOUR NAME]';
            const address = userData.address || '[YOUR ADDRESS]';

            return `Dear ${official.name},

I am your constituent writing to urge you to take action to protect immigrant communities and oppose ICE.

Our community depends on immigrant workers and families. ICE's tactics are terrorizing our neighbors and tearing apart families.

I'm asking you to:
- Oppose any increases in ICE funding
- Support legislation limiting ICE's enforcement powers
- Speak out publicly against ICE raids and family separations
- Support sanctuary policies that protect residents

Sincerely,
${name}
${address}`;
        }

        // ============== CORPORATIONS ==============
        function renderNationalTargets() {
            document.getElementById('corp-list').innerHTML = nationalCorporations.map((t, i) => renderCorpCard(t, i)).join('');
        }

        function renderCorpCard(target, idx) {
            return `
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">${target.company}</div>
                            <div class="card-subtitle">${target.contact} ‚Äî ${target.title}</div>
                        </div>
                        <span class="tag ice">ICE TIES</span>
                    </div>
                    <p class="card-note">${target.notes}</p>
                    <div class="btn-row">
                        <a href="tel:${target.phone.replace(/[^0-9+]/g, '')}" class="btn btn-call">üìû Call</a>
                        <a href="mailto:${target.email}?subject=${encodeURIComponent(`Urging ${target.company} to stop cooperating with ICE`)}&body=${encodeURIComponent(getCorpEmailBody(target))}" class="btn btn-email">‚úâÔ∏è Email</a>
                        <button class="btn btn-script" onclick="toggleScript('corp-${idx}')">üìÑ Script</button>
                    </div>
                    <div class="script-container" id="corp-${idx}">
                        <div class="script-box">${getCorpScript(target)}</div>
                        <button class="copy-btn" onclick="copyScript(this)">Copy Script</button>
                    </div>
                </div>
            `;
        }

        function getCorpScript(target) {
            const name = userData.name || '[YOUR NAME]';
            const city = userData.city || '[YOUR CITY]';

            return `"Hello, I'm calling to leave a message for <span class="hl">${target.contact}</span>.

My name is <span class="hl">${name}</span> from <span class="hl">${city}</span>.

I'm calling to urge <span class="hl">${target.company}</span> to publicly commit to NOT cooperating with ICE.

${target.notes}

I'm asking you to:
1. Not allow ICE agents into facilities without a judicial warrant
2. Not share employee or customer data with ICE
3. Make a public statement committing to these policies

Workers and communities deserve safety and dignity.

Thank you for taking my message."`;
        }

        function getCorpEmailBody(target) {
            const name = userData.name || '[YOUR NAME]';
            const city = userData.city || '[YOUR CITY]';

            return `Dear ${target.contact},

I am writing as a concerned customer/community member to urge ${target.company} to publicly commit to NOT cooperating with ICE.

${target.notes}

I'm asking you to:
1. Not allow ICE agents into facilities without a judicial warrant
2. Not share employee or customer data with ICE
3. Make a public statement committing to these policies

Workers, customers, and communities deserve safety, dignity, and transparency.

Sincerely,
${name}
${city}`;
        }

        // ============== LOCAL TARGETS ==============
        function renderLocalTargets() {
            const listEl = document.getElementById('local-list');

            if (!localTargets.length) {
                listEl.innerHTML = '<div class="empty-state"><p>No local targets added yet.</p><p style="font-size: 0.8rem;">Add companies or institutions in your area with ICE ties.</p></div>';
                return;
            }

            listEl.innerHTML = localTargets.map((t, i) => renderLocalCard(t, i)).join('');
        }

        function renderLocalCard(target, idx) {
            return `
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">${target.name}</div>
                            ${target.contact ? `<div class="card-subtitle">${target.contact}</div>` : ''}
                        </div>
                        <div>
                            <span class="tag local">LOCAL</span>
                            <button class="delete-btn" onclick="deleteTarget(${idx})" title="Delete">‚úï</button>
                        </div>
                    </div>
                    ${target.notes ? `<p class="card-note">${target.notes}</p>` : ''}
                    <div class="btn-row">
                        ${target.phone ? `<a href="tel:${target.phone.replace(/[^0-9+]/g, '')}" class="btn btn-call">üìû Call</a>` : ''}
                        ${target.email ? `<a href="mailto:${target.email}?subject=${encodeURIComponent(`Urging ${target.name} to stop cooperating with ICE`)}" class="btn btn-email">‚úâÔ∏è Email</a>` : ''}
                        <button class="btn btn-script" onclick="toggleScript('local-${idx}')">üìÑ Script</button>
                    </div>
                    <div class="script-container" id="local-${idx}">
                        <div class="script-box">${getLocalScript(target)}</div>
                        <button class="copy-btn" onclick="copyScript(this)">Copy Script</button>
                    </div>
                </div>
            `;
        }

        function getLocalScript(target) {
            const name = userData.name || '[YOUR NAME]';
            const city = userData.city || '[YOUR CITY]';

            return `"Hello, my name is <span class="hl">${name}</span> from <span class="hl">${city}</span>.

I'm calling about <span class="hl">${target.name}</span>'s cooperation with ICE.

${target.notes || 'I understand you have ties to ICE enforcement operations.'}

I'm urging you to:
1. End any contracts or cooperation with ICE
2. Not allow ICE access without a judicial warrant
3. Protect workers and community members

Thank you for your time."`;
        }

        function openAddModal() {
            document.getElementById('addTargetModal').classList.remove('hidden');
        }

        function closeAddModal() {
            document.getElementById('addTargetModal').classList.add('hidden');
            // Clear form
            document.getElementById('targetName').value = '';
            document.getElementById('targetContact').value = '';
            document.getElementById('targetPhone').value = '';
            document.getElementById('targetEmail').value = '';
            document.getElementById('targetNotes').value = '';
        }

        function saveTarget() {
            const name = document.getElementById('targetName').value.trim();
            if (!name) {
                alert('Please enter a company/organization name');
                return;
            }

            localTargets.push({
                name: name,
                contact: document.getElementById('targetContact').value.trim(),
                phone: document.getElementById('targetPhone').value.trim(),
                email: document.getElementById('targetEmail').value.trim(),
                notes: document.getElementById('targetNotes').value.trim()
            });

            localStorage.setItem('iceActionLocalTargets', JSON.stringify(localTargets));
            renderLocalTargets();
            closeAddModal();
        }

        function deleteTarget(idx) {
            if (confirm('Delete this target?')) {
                localTargets.splice(idx, 1);
                localStorage.setItem('iceActionLocalTargets', JSON.stringify(localTargets));
                renderLocalTargets();
            }
        }

        // ============== TAB SWITCHING ==============
        function switchRaidTab(tab) {
            document.querySelectorAll('#raids .tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (tab === 'local') {
                document.getElementById('raids-local-tab').style.display = 'block';
                document.getElementById('raids-national-tab').style.display = 'none';
            } else {
                document.getElementById('raids-local-tab').style.display = 'none';
                document.getElementById('raids-national-tab').style.display = 'block';
            }
        }

        function switchNewsTab(tab) {
            document.querySelectorAll('#news .news-tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            if (tab === 'local') {
                document.getElementById('news-local-tab').style.display = 'block';
                document.getElementById('news-national-tab').style.display = 'none';
            } else {
                document.getElementById('news-local-tab').style.display = 'none';
                document.getElementById('news-national-tab').style.display = 'block';
            }
        }

        // ============== UTILITIES ==============
        function toggleScript(id) {
            document.getElementById(id).classList.toggle('open');
        }

        function copyScript(btn) {
            const text = btn.previousElementSibling.innerText;
            navigator.clipboard.writeText(text).then(() => {
                btn.textContent = '‚úì Copied!';
                btn.classList.add('copied');
                setTimeout(() => { btn.textContent = 'Copy Script'; btn.classList.remove('copied'); }, 2000);
            });
        }

        function saveSettings() {
            const address = document.getElementById('settingsAddress').value.trim();
            const parsed = parseAddress(address);

            userData = {
                name: document.getElementById('settingsName').value.trim(),
                address: address,
                city: parsed.city || userData.city,
                state: parsed.state || userData.state,
                zip: parsed.zip || userData.zip
            };
            localStorage.setItem('iceActionUser', JSON.stringify(userData));

            if (address) {
                document.getElementById('headerLocation').textContent = userData.city + ', ' + userData.state;
                fetchOfficials(address);
            }

            alert('Saved!');
        }

        function exportData() {
            const data = {
                user: userData,
                localTargets: localTargets,
                officials: officials,
                exported: new Date().toISOString()
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ice-action-hub-data.json';
            a.click();
        }

        function clearAllData() {
            if (confirm('This will delete all your saved data including local targets. Continue?')) {
                localStorage.removeItem('iceActionUser');
                localStorage.removeItem('iceActionLocalTargets');
                localStorage.removeItem('iceActionOfficials');
                location.reload();
            }
        }

        // ============== NEWS FEED ==============
        function renderNewsFeed() {
            const localFeedEl = document.getElementById('local-news-feed');
            const nationalFeedEl = document.getElementById('national-news-feed');
            const localNewsText = document.getElementById('local-news-text');

            // Render local news based on user's state
            if (localFeedEl) {
                if (userData.state && localNewsDB[userData.state]) {
                    const localNews = localNewsDB[userData.state];
                    localNewsText.textContent = `News from ${userData.state}:`;
                    localFeedEl.innerHTML = localNews.map(item => renderNewsCard(item)).join('');
                } else if (userData.state) {
                    localNewsText.textContent = `No local news for ${userData.state} yet.`;
                    localFeedEl.innerHTML = `<div class="info-box"><p>We don't have local news for your state yet. <a href="mailto:alexishkenyon@gmail.com?subject=Add news for ${userData.state}" style="color: var(--red);">Help us add it!</a></p></div>`;
                } else {
                    localNewsText.textContent = 'Set your location to see local news.';
                    localFeedEl.innerHTML = '';
                }
            }

            // Render national news
            if (nationalFeedEl) {
                nationalFeedEl.innerHTML = nationalNews.map(item => renderNewsCard(item)).join('');
            }
        }

        function renderNewsCard(item) {
            const icon = item.type === 'alert' ? '‚ö†Ô∏è' : item.type === 'action' ? '‚úä' : item.type === 'resource' ? 'üìñ' : 'üì∞';
            return `
                <div class="card" style="padding: 0.75rem; margin-bottom: 0.5rem;">
                    <div style="display: flex; gap: 0.75rem; align-items: flex-start;">
                        <span style="font-size: 1.25rem;">${icon}</span>
                        <div style="flex: 1;">
                            <div style="font-size: 0.7rem; color: #888; margin-bottom: 0.25rem;">${item.date}</div>
                            <a href="${item.link}" target="_blank" style="font-size: 0.9rem; font-weight: 600; color: var(--white); text-decoration: none;">${item.headline}</a>
                            <div style="font-size: 0.7rem; color: var(--blue); margin-top: 0.25rem;">
                                <a href="${item.link}" target="_blank" style="color: var(--blue);">${item.source} ‚Üí</a>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // ============== ICE COMPANIES DATABASE ==============
        function renderICECompanies() {
            const listEl = document.getElementById('ice-companies-list');
            if (!listEl) return;

            const html = iceCompaniesDB.map((company, idx) => {
                const emailBody = getICECompanyEmailBody(company);
                return `
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">${company.name}</div>
                            <div class="card-subtitle">${company.type} ‚Ä¢ ${company.hq}</div>
                        </div>
                        <span class="tag ice">ICE TIES</span>
                    </div>
                    <p class="card-note">${company.notes}</p>
                    <div style="font-size: 0.7rem; margin-bottom: 0.5rem;">
                        <a href="${company.sourceLink}" target="_blank" style="color: var(--blue);">üìé Source: ${company.source} ‚Üí</a>
                    </div>
                    <div class="btn-row">
                        <a href="tel:${company.phone.replace(/[^0-9+]/g, '')}" class="btn btn-call">üìû Call</a>
                        <a href="mailto:${company.email}?subject=${encodeURIComponent('End Your ICE Contracts')}&body=${encodeURIComponent(emailBody)}" class="btn btn-email">‚úâÔ∏è Email</a>
                        <button class="btn btn-script" onclick="toggleScript('ice-co-${idx}')">üìÑ Script</button>
                    </div>
                    <div class="script-container" id="ice-co-${idx}">
                        <div class="script-box">${getICECompanyScript(company)}</div>
                        <button class="copy-btn" onclick="copyScript(this)">Copy Script</button>
                    </div>
                </div>
            `}).join('');

            listEl.innerHTML = html;
        }

        // Render online retailers with ICE ties
        function renderICERetailers() {
            const listEl = document.getElementById('ice-retailers-list');
            if (!listEl) return;

            const html = iceRetailersDB.map((company, idx) => `
                <div class="card" style="border-left: 3px solid var(--purple);">
                    <div class="card-header">
                        <div>
                            <div class="card-title">${company.name}</div>
                            <div class="card-subtitle">${company.type}</div>
                        </div>
                        <span class="tag" style="background: var(--purple);">BOYCOTT</span>
                    </div>
                    <p class="card-note">${company.notes}</p>
                    <p style="font-size: 0.8rem; color: var(--red); margin: 0.5rem 0;"><strong>Action:</strong> ${company.action}</p>
                    <div style="font-size: 0.7rem;">
                        <a href="${company.sourceLink}" target="_blank" style="color: var(--blue);">üìé Source: ${company.source} ‚Üí</a>
                    </div>
                </div>
            `).join('');

            listEl.innerHTML = html;
        }

        // Render local institutions with ICE ties based on user's state
        function renderLocalICETies() {
            const listEl = document.getElementById('local-ice-ties-list');
            const textEl = document.getElementById('local-ice-ties-text');
            if (!listEl) return;

            if (userData.state && localICETiesDB[userData.state]) {
                const ties = localICETiesDB[userData.state];
                textEl.textContent = `Detention centers and law enforcement with ICE cooperation in ${userData.state}:`;

                const html = ties.map((inst, idx) => `
                    <div class="card" style="border-left: 3px solid var(--red);">
                        <div class="card-header">
                            <div>
                                <div class="card-title">${inst.name}</div>
                                <div class="card-subtitle">${inst.type} ‚Ä¢ ${inst.address}</div>
                            </div>
                            <span class="tag ice">ICE TIES</span>
                        </div>
                        <p class="card-note">${inst.notes}</p>
                        <div style="font-size: 0.7rem;">
                            <a href="${inst.sourceLink}" target="_blank" style="color: var(--blue);">üìé Source: ${inst.source} ‚Üí</a>
                        </div>
                    </div>
                `).join('');

                listEl.innerHTML = html;
            } else if (userData.state) {
                textEl.textContent = `No documented ICE detention or cooperation data for ${userData.state} yet.`;
                listEl.innerHTML = `
                    <div class="info-box">
                        <p style="margin: 0;">We don't have ICE cooperation data for ${userData.state} yet.</p>
                        <a href="mailto:alexishkenyon@gmail.com?subject=Add ICE data for ${userData.state}&body=I'd like to report ICE cooperation in ${userData.state}:%0A%0AInstitution/Facility:%0AType:%0ADetails:%0ASource:" style="color: var(--red); font-size: 0.85rem;">Help us add it ‚Üí</a>
                    </div>
                `;
            } else {
                listEl.innerHTML = '<div class="empty-state" style="padding: 1rem;"><p style="font-size: 0.85rem;">Set your location to see ICE detention and cooperation in your area.</p></div>';
            }
        }

        function getICECompanyEmailBody(company) {
            const name = userData.name || '[YOUR NAME]';
            const city = userData.city || '[YOUR CITY]';
            return `To Whom It May Concern,

I am writing to express my strong opposition to ${company.name}'s involvement with Immigration and Customs Enforcement (ICE).

My name is ${name} from ${city}.

${company.notes}

Your company's participation in immigration enforcement causes direct harm to families and communities. I urge you to:

1. Immediately end all contracts and cooperation with ICE
2. Stop providing services that enable deportations and family separations
3. Publicly commit to refusing future ICE business

Companies that profit from human suffering will face continued public pressure and accountability. I hope you will make the right choice.

Sincerely,
${name}`;
        }

        function getICECompanyScript(company) {
            const name = userData.name || '[YOUR NAME]';
            const city = userData.city || '[YOUR CITY]';

            return `"Hello, I'm calling to register my opposition to your company's work with ICE.

My name is <span class="hl">${name}</span> from <span class="hl">${city}</span>.

<span class="hl">${company.name}</span>'s involvement in immigration enforcement is harming communities across the country.

${company.notes}

I'm calling to urge you to:
1. End all contracts and cooperation with ICE
2. Stop providing services that enable deportations and family separations
3. Publicly commit to refusing ICE business

Your company is profiting from human suffering. This must end.

Thank you."`;
        }

        // ============== REAL-TIME RAIDS ==============
        let realtimeRaids = [];

        async function fetchRealtimeRaids() {
            const listEl = document.getElementById('realtime-raids-list');
            const timeEl = document.getElementById('raids-update-time');
            if (!listEl) return;

            try {
                // Try to fetch from United We Dream raid tracker or similar APIs
                // Since these APIs may have CORS restrictions, we use multiple sources
                const sources = [
                    'https://api.rss2json.com/v1/api.json?rss_url=https://unitedwedream.org/feed/',
                    'https://api.rss2json.com/v1/api.json?rss_url=https://www.documentedny.com/feed/'
                ];

                let allItems = [];

                // Fetch from RSS feeds converted to JSON
                for (const url of sources) {
                    try {
                        const response = await fetch(url);
                        if (response.ok) {
                            const data = await response.json();
                            if (data.items) {
                                // Filter for ICE-related items
                                const iceItems = data.items.filter(item => {
                                    const text = (item.title + ' ' + item.description).toLowerCase();
                                    return text.includes('ice') || text.includes('immigration') ||
                                           text.includes('raid') || text.includes('deporta') ||
                                           text.includes('detention') || text.includes('enforcement');
                                }).slice(0, 5);
                                allItems = allItems.concat(iceItems.map(item => ({
                                    date: new Date(item.pubDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }),
                                    title: item.title,
                                    description: item.description.replace(/<[^>]*>/g, '').substring(0, 150) + '...',
                                    link: item.link,
                                    source: data.feed?.title || 'News Source'
                                })));
                            }
                        }
                    } catch (e) {
                        console.log('Feed fetch error:', e);
                    }
                }

                // Sort by date (most recent first)
                allItems.sort((a, b) => new Date(b.date) - new Date(a.date));
                realtimeRaids = allItems.slice(0, 8);

                if (realtimeRaids.length > 0) {
                    timeEl.textContent = `Last updated: ${new Date().toLocaleTimeString()}`;
                    listEl.innerHTML = realtimeRaids.map(item => `
                        <div class="card" style="padding: 0.75rem; margin-bottom: 0.5rem; border-left: 3px solid var(--red);">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.25rem;">
                                <div style="font-size: 0.7rem; color: var(--red); font-weight: 600;">${item.date}</div>
                                <span style="background: var(--red); color: white; padding: 0.1rem 0.4rem; border-radius: 10px; font-size: 0.6rem; font-weight: 600;">LIVE</span>
                            </div>
                            <a href="${item.link}" target="_blank" style="font-weight: 700; font-size: 0.9rem; color: var(--white); text-decoration: none; display: block; margin-bottom: 0.25rem;">${item.title}</a>
                            <div style="font-size: 0.8rem; color: #aaa; margin-bottom: 0.25rem;">${item.description}</div>
                            <div style="font-size: 0.7rem; color: var(--blue);"><a href="${item.link}" target="_blank" style="color: var(--blue);">${item.source} ‚Üí</a></div>
                        </div>
                    `).join('');
                } else {
                    throw new Error('No items found');
                }

            } catch (error) {
                console.log('Real-time fetch error:', error);
                // Fallback to showing recent static data
                timeEl.textContent = 'Using cached data - tap Refresh to try again';
                const recentStatic = documentedRaids.slice(0, 5);
                listEl.innerHTML = recentStatic.map(raid => `
                    <div class="card" style="padding: 0.75rem; margin-bottom: 0.5rem; border-left: 3px solid var(--yellow);">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.25rem;">
                            <div style="font-size: 0.7rem; color: #888;">${raid.date}</div>
                            <span style="background: var(--yellow); color: black; padding: 0.1rem 0.4rem; border-radius: 10px; font-size: 0.6rem; font-weight: 600;">CACHED</span>
                        </div>
                        <div style="font-weight: 700; font-size: 0.9rem; margin-bottom: 0.25rem;">üìç ${raid.location}</div>
                        <div style="font-size: 0.8rem; color: #aaa; margin-bottom: 0.25rem;">${raid.description}</div>
                        <div style="font-size: 0.7rem; color: #666;">Source: ${raid.source}</div>
                    </div>
                `).join('');
            }
        }

        function refreshRaids() {
            const listEl = document.getElementById('realtime-raids-list');
            if (listEl) {
                listEl.innerHTML = `
                    <div class="card" style="padding: 1rem; text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">‚è≥</div>
                        <p style="color: #888; font-size: 0.85rem;">Refreshing raid data...</p>
                    </div>
                `;
            }
            fetchRealtimeRaids();
        }

        // ============== DOCUMENTED RAIDS ==============
        function renderDocumentedRaids() {
            const localListEl = document.getElementById('local-raids-list');
            const allListEl = document.getElementById('all-raids-list');
            const locationText = document.getElementById('local-raids-location-text');

            if (!localListEl || !allListEl) return;

            // Filter raids for user's state if available
            let localRaids = [];
            if (userData.state) {
                localRaids = documentedRaids.filter(r => r.state === userData.state);
                if (localRaids.length > 0) {
                    locationText.textContent = `${localRaids.length} documented enforcement actions in ${userData.state}:`;
                } else {
                    locationText.textContent = `No documented activity in ${userData.state} yet. Stay vigilant and report any activity.`;
                }
            }

            // Render local raids
            if (localRaids.length > 0) {
                localListEl.innerHTML = localRaids.map(raid => renderRaidCard(raid)).join('');
            } else if (userData.state) {
                localListEl.innerHTML = `
                    <div class="info-box" style="padding: 1rem;">
                        <p style="margin-bottom: 0.5rem;">No raids documented in ${userData.state} yet.</p>
                        <p style="font-size: 0.85rem; color: #888;">This doesn't mean there's no activity‚Äîit means it hasn't been reported yet. Stay vigilant and report any ICE activity you witness.</p>
                    </div>`;
            } else {
                localListEl.innerHTML = '<div class="info-box" style="padding: 1rem;"><p style="font-size: 0.85rem;">Set your location to see ICE activity in your area.</p></div>';
            }

            // Render all raids (show all of them)
            allListEl.innerHTML = documentedRaids.map(raid => renderRaidCard(raid)).join('');
        }

        function renderRaidCard(raid) {
            const typeColors = {
                'Workplace': 'var(--yellow)',
                'Home': 'var(--red)',
                'Community': 'var(--purple)',
                'Court': 'var(--blue)',
                'Border': '#888'
            };
            const typeColor = typeColors[raid.type] || '#888';

            return `
                <div class="card" style="padding: 0.75rem; margin-bottom: 0.5rem;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.25rem;">
                        <div style="font-size: 0.7rem; color: #888;">${raid.date}</div>
                        <span style="background: ${typeColor}; color: ${raid.type === 'Workplace' ? 'black' : 'white'}; padding: 0.1rem 0.4rem; border-radius: 10px; font-size: 0.65rem; font-weight: 600;">${raid.type.toUpperCase()}</span>
                    </div>
                    <div style="font-weight: 700; font-size: 0.95rem; margin-bottom: 0.25rem;">üìç ${raid.location}</div>
                    <div style="font-size: 0.85rem; color: #ccc; margin-bottom: 0.25rem;">${raid.description}</div>
                    <div style="font-size: 0.7rem; color: #666;">Source: ${raid.source}</div>
                </div>
            `;
        }

        // ============== PROTESTS LIST ==============
        function renderProtests() {
            const localListEl = document.getElementById('protests-list');
            const nationalListEl = document.getElementById('national-protests-list');
            const locationText = document.getElementById('protests-location-text');

            if (!localListEl || !nationalListEl) return;

            // Filter protests for user's state if available
            let localProtests = [];
            if (userData.state) {
                localProtests = upcomingProtests.filter(p => p.state === userData.state || p.state === 'ALL');
                if (localProtests.length > 0) {
                    locationText.textContent = `Showing ${localProtests.length} events in or near ${userData.state}:`;
                } else {
                    locationText.textContent = `No specific events found for ${userData.state}. Check nationwide events below.`;
                }
            }

            // Render local protests
            if (localProtests.length > 0) {
                localListEl.innerHTML = localProtests.map(protest => renderProtestCard(protest)).join('');
            } else if (userData.state) {
                localListEl.innerHTML = '<div class="empty-state" style="padding: 1rem;"><p style="font-size: 0.85rem;">No events listed for your area yet. Check nationwide events or contact organizations to start one!</p></div>';
            } else {
                localListEl.innerHTML = '<div class="empty-state" style="padding: 1rem;"><p style="font-size: 0.85rem;">Set your location to see events near you.</p></div>';
            }

            // Render nationwide events
            const nationwide = upcomingProtests.filter(p => p.state === 'ALL' || p.state === 'DC');
            nationalListEl.innerHTML = nationwide.map(protest => renderProtestCard(protest)).join('');
        }

        function renderProtestCard(protest) {
            const typeIcons = {
                'rally': '‚úä',
                'vigil': 'üïØÔ∏è',
                'march': 'üö∂',
                'watch': 'üëÅÔ∏è'
            };
            const icon = typeIcons[protest.type] || 'üì¢';

            return `
                <div class="card" style="padding: 0.75rem; margin-bottom: 0.5rem;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.25rem;">
                        <div style="font-size: 0.7rem; color: var(--red); font-weight: 600;">${protest.date}</div>
                        <span style="background: var(--purple); color: white; padding: 0.1rem 0.4rem; border-radius: 10px; font-size: 0.65rem; font-weight: 600;">${protest.type.toUpperCase()}</span>
                    </div>
                    <div style="font-weight: 700; font-size: 0.95rem; margin-bottom: 0.25rem;">${icon} ${protest.name}</div>
                    <div style="font-size: 0.85rem; color: #aaa; margin-bottom: 0.25rem;">üìç ${protest.city}${protest.state !== 'ALL' ? ', ' + protest.state : ''}</div>
                    <div style="font-size: 0.85rem; color: #ccc; margin-bottom: 0.5rem;">${protest.desc}</div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <a href="${protest.link}" target="_blank" style="font-size: 0.75rem; color: var(--blue); text-decoration: none;">${protest.org} ‚Üí</a>
                    </div>
                </div>
            `;
        }

        function renderLocalOrgs() {
            const listEl = document.getElementById('local-orgs-list');
            const textEl = document.getElementById('local-orgs-text');
            if (!listEl) return;

            if (userData.state && localOrgsDB[userData.state]) {
                const orgs = localOrgsDB[userData.state];
                textEl.textContent = `${orgs.length} organizations in ${userData.state} ready to help:`;
                listEl.innerHTML = orgs.map(org => renderLocalOrgCard(org)).join('');
            } else if (userData.state) {
                textEl.textContent = `No organizations listed for ${userData.state} yet. Contact national orgs below.`;
                listEl.innerHTML = '';
            } else {
                textEl.textContent = 'Set your location to see local organizations.';
                listEl.innerHTML = '';
            }
        }

        function renderLocalOrgCard(org) {
            const phoneBtnHtml = org.phone ? `<a href="tel:${org.phone.replace(/[^0-9]/g, '')}" class="btn btn-call">üìû Call</a>` : '';
            const emailSubject = encodeURIComponent('I Want to Help - Community Member');
            const emailBody = encodeURIComponent(`Hi,\n\nI want to support immigrant rights in my community and am reaching out to learn how I can help.\n\nPlease let me know about volunteer opportunities, upcoming events, or other ways to get involved.\n\nThank you!`);

            return `
                <div class="card" style="margin-bottom: 0.75rem;">
                    <div class="card-header">
                        <div>
                            <div class="card-title">${org.name}</div>
                            ${org.phone ? `<div class="card-subtitle">${org.phone}</div>` : ''}
                        </div>
                    </div>
                    <p class="card-note">${org.desc}</p>
                    <div class="btn-row">
                        ${phoneBtnHtml}
                        <a href="mailto:${org.email}?subject=${emailSubject}&body=${emailBody}" class="btn btn-email">‚úâÔ∏è Email</a>
                        <a href="${org.website}" target="_blank" class="btn btn-secondary">üåê Website</a>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
